require=function t(e,n,r){function i(a,u){if(!n[a]){if(!e[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return i(n?n:t)},c,c.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){function r(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,r=i(t),o=r.source,l=r.id;return e.forceNew||e["force new connection"]||!1===e.multiplex?(u("ignoring socket cache for %s",o),n=a(o,e)):(s[l]||(u("new io instance for %s",o),s[l]=a(o,e)),n=s[l]),n.socket(r.path)}var i=t("./url"),o=t("socket.io-parser"),a=t("./manager"),u=t("debug")("socket.io-client");e.exports=n=r;var s=n.managers={};n.protocol=o.protocol,n.connect=r,n.Manager=t("./manager"),n.Socket=t("./socket")},{"./manager":2,"./socket":4,"./url":5,debug:9,"socket.io-parser":45}],2:[function(t,e){function n(t,e){return this instanceof n?(t&&"object"==typeof t&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new f({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connected=[],this.encoding=!1,this.packetBuffer=[],this.encoder=new a.Encoder,this.decoder=new a.Decoder,this.autoConnect=e.autoConnect!==!1,void(this.autoConnect&&this.open())):new n(t,e)}var r=(t("./url"),t("engine.io-client")),i=t("./socket"),o=t("component-emitter"),a=t("socket.io-parser"),u=t("./on"),s=t("component-bind"),l=(t("object-component"),t("debug")("socket.io-client:manager")),c=t("indexof"),f=t("backo2");e.exports=n,n.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var t in this.nsps)this.nsps[t].emit.apply(this.nsps[t],arguments)},n.prototype.updateSocketIds=function(){for(var t in this.nsps)this.nsps[t].id=this.engine.id},o(n.prototype),n.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},n.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},n.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},n.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},n.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},n.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},n.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},n.prototype.open=n.prototype.connect=function(t){if(l("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;l("opening %s",this.uri),this.engine=r(this.uri,this.opts);var e=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var i=u(e,"open",function(){n.onopen(),t&&t()}),o=u(e,"error",function(e){if(l("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",e),t){var r=new Error("Connection error");r.data=e,t(r)}else n.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout;l("connect attempt will timeout after %d",a);var s=setTimeout(function(){l("connect attempt timed out after %d",a),i.destroy(),e.close(),e.emit("error","timeout"),n.emitAll("connect_timeout",a)},a);this.subs.push({destroy:function(){clearTimeout(s)}})}return this.subs.push(i),this.subs.push(o),this},n.prototype.onopen=function(){l("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(u(t,"data",s(this,"ondata"))),this.subs.push(u(this.decoder,"decoded",s(this,"ondecoded"))),this.subs.push(u(t,"error",s(this,"onerror"))),this.subs.push(u(t,"close",s(this,"onclose")))},n.prototype.ondata=function(t){this.decoder.add(t)},n.prototype.ondecoded=function(t){this.emit("packet",t)},n.prototype.onerror=function(t){l("error",t),this.emitAll("error",t)},n.prototype.socket=function(t){var e=this.nsps[t];if(!e){e=new i(this,t),this.nsps[t]=e;var n=this;e.on("connect",function(){e.id=n.engine.id,~c(n.connected,e)||n.connected.push(e)})}return e},n.prototype.destroy=function(t){var e=c(this.connected,t);~e&&this.connected.splice(e,1),this.connected.length||this.close()},n.prototype.packet=function(t){l("writing packet %j",t);var e=this;e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,function(t){for(var n=0;n<t.length;n++)e.engine.write(t[n]);e.encoding=!1,e.processPacketQueue()}))},n.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},n.prototype.cleanup=function(){for(var t;t=this.subs.shift();)t.destroy();this.packetBuffer=[],this.encoding=!1,this.decoder.destroy()},n.prototype.close=n.prototype.disconnect=function(){this.skipReconnect=!0,this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},n.prototype.onclose=function(t){l("close"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},n.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)l("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();l("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var n=setTimeout(function(){t.skipReconnect||(l("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open(function(e){e?(l("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(l("reconnect success"),t.onreconnect())}))},e);this.subs.push({destroy:function(){clearTimeout(n)}})}},n.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}},{"./on":3,"./socket":4,"./url":5,backo2:6,"component-bind":7,"component-emitter":8,debug:9,"engine.io-client":10,indexof:41,"object-component":42,"socket.io-parser":45}],3:[function(t,e){function n(t,e,n){return t.on(e,n),{destroy:function(){t.removeListener(e,n)}}}e.exports=n},{}],4:[function(t,e,n){function r(t,e){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.io.autoConnect&&this.open(),this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0}var i=t("socket.io-parser"),o=t("component-emitter"),a=t("to-array"),u=t("./on"),s=t("component-bind"),l=t("debug")("socket.io-client:socket"),c=t("has-binary");e.exports=n=r;var f={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1},p=o.prototype.emit;o(r.prototype),r.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[u(t,"open",s(this,"onopen")),u(t,"packet",s(this,"onpacket")),u(t,"close",s(this,"onclose"))]}},r.prototype.open=r.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this)},r.prototype.send=function(){var t=a(arguments);return t.unshift("message"),this.emit.apply(this,t),this},r.prototype.emit=function(t){if(f.hasOwnProperty(t))return p.apply(this,arguments),this;var e=a(arguments),n=i.EVENT;c(e)&&(n=i.BINARY_EVENT);var r={type:n,data:e};return"function"==typeof e[e.length-1]&&(l("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),r.id=this.ids++),this.connected?this.packet(r):this.sendBuffer.push(r),this},r.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},r.prototype.onopen=function(){l("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:i.CONNECT})},r.prototype.onclose=function(t){l("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},r.prototype.onpacket=function(t){if(t.nsp==this.nsp)switch(t.type){case i.CONNECT:this.onconnect();break;case i.EVENT:this.onevent(t);break;case i.BINARY_EVENT:this.onevent(t);break;case i.ACK:this.onack(t);break;case i.BINARY_ACK:this.onack(t);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",t.data)}},r.prototype.onevent=function(t){var e=t.data||[];l("emitting event %j",e),null!=t.id&&(l("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?p.apply(this,e):this.receiveBuffer.push(e)},r.prototype.ack=function(t){var e=this,n=!1;return function(){if(!n){n=!0;var r=a(arguments);l("sending ack %j",r);var o=c(r)?i.BINARY_ACK:i.ACK;e.packet({type:o,id:t,data:r})}}},r.prototype.onack=function(t){l("calling ack %s with %j",t.id,t.data);var e=this.acks[t.id];e.apply(this,t.data),delete this.acks[t.id]},r.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},r.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)p.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},r.prototype.ondisconnect=function(){l("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},r.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},r.prototype.close=r.prototype.disconnect=function(){return this.connected&&(l("performing disconnect (%s)",this.nsp),this.packet({type:i.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{"./on":3,"component-bind":7,"component-emitter":8,debug:9,"has-binary":39,"socket.io-parser":45,"to-array":49}],5:[function(t,e){(function(n){function r(t,e){var r=t,e=e||n.location;return null==t&&(t=e.protocol+"//"+e.host),"string"==typeof t&&("/"==t.charAt(0)&&(t="/"==t.charAt(1)?e.protocol+t:e.hostname+t),/^(https?|wss?):\/\//.test(t)||(o("protocol-less url %s",t),t="undefined"!=typeof e?e.protocol+"//"+t:"https://"+t),o("parse %s",t),r=i(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/",r.id=r.protocol+"://"+r.host+":"+r.port,r.href=r.protocol+"://"+r.host+(e&&e.port==r.port?"":":"+r.port),r}var i=t("parseuri"),o=t("debug")("socket.io-client:url");e.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{debug:9,parseuri:43}],6:[function(t,e){function n(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}e.exports=n,n.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(t){this.ms=t},n.prototype.setMax=function(t){this.max=t},n.prototype.setJitter=function(t){this.jitter=t}},{}],7:[function(t,e){var n=[].slice;e.exports=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var r=n.call(arguments,2);return function(){return e.apply(t,r.concat(n.call(arguments)))}}},{}],8:[function(t,e){function n(t){return t?r(t):void 0}function r(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},n.prototype.once=function(t,e){function n(){r.off(t,n),e.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},n.fn=e,this.on(t,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[t];if(!n)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks[t];if(n){n=n.slice(0);for(var r=0,i=n.length;i>r;++r)n[r].apply(this,e)}return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],9:[function(t,e){function n(t){return n.enabled(t)?function(e){e=r(e);var i=new Date,o=i-(n[t]||i);n[t]=i,e=t+" "+e+" +"+n.humanize(o),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}function r(t){return t instanceof Error?t.stack||t.message:t}e.exports=n,n.names=[],n.skips=[],n.enable=function(t){try{localStorage.debug=t}catch(e){}for(var r=(t||"").split(/[\s,]+/),i=r.length,o=0;i>o;o++)t=r[o].replace("*",".*?"),"-"===t[0]?n.skips.push(new RegExp("^"+t.substr(1)+"$")):n.names.push(new RegExp("^"+t+"$"))},n.disable=function(){n.enable("")},n.humanize=function(t){var e=1e3,n=6e4,r=60*n;return t>=r?(t/r).toFixed(1)+"h":t>=n?(t/n).toFixed(1)+"m":t>=e?(t/e|0)+"s":t+"ms"},n.enabled=function(t){for(var e=0,r=n.skips.length;r>e;e++)if(n.skips[e].test(t))return!1;for(var e=0,r=n.names.length;r>e;e++)if(n.names[e].test(t))return!0;return!1};try{window.localStorage&&n.enable(localStorage.debug)}catch(i){}},{}],10:[function(t,e){e.exports=t("./lib/")},{"./lib/":11}],11:[function(t,e){e.exports=t("./socket"),e.exports.parser=t("engine.io-parser")},{"./socket":12,"engine.io-parser":24}],12:[function(t,e){(function(n){function r(t,e){if(!(this instanceof r))return new r(t,e);if(e=e||{},t&&"object"==typeof t&&(e=t,t=null),t&&(t=c(t),e.host=t.host,e.secure="https"==t.protocol||"wss"==t.protocol,e.port=t.port,t.query&&(e.query=t.query)),this.secure=null!=e.secure?e.secure:n.location&&"https:"==location.protocol,e.host){var i=e.host.split(":");e.hostname=i.shift(),i.length?e.port=i.pop():e.port||(e.port=this.secure?"443":"80")}this.agent=e.agent||!1,this.hostname=e.hostname||(n.location?location.hostname:"localhost"),this.port=e.port||(n.location&&location.port?location.port:this.secure?443:80),this.query=e.query||{},"string"==typeof this.query&&(this.query=p.decode(this.query)),this.upgrade=!1!==e.upgrade,this.path=(e.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!e.forceJSONP,this.jsonp=!1!==e.jsonp,this.forceBase64=!!e.forceBase64,this.enablesXDR=!!e.enablesXDR,this.timestampParam=e.timestampParam||"t",this.timestampRequests=e.timestampRequests,this.transports=e.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.callbackBuffer=[],this.policyPort=e.policyPort||843,this.rememberUpgrade=e.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=e.onlyBinaryUpgrades,this.pfx=e.pfx||null,this.key=e.key||null,this.passphrase=e.passphrase||null,this.cert=e.cert||null,this.ca=e.ca||null,this.ciphers=e.ciphers||null,this.rejectUnauthorized=e.rejectUnauthorized||null,this.open()}function i(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var o=t("./transports"),a=t("component-emitter"),u=t("debug")("engine.io-client:socket"),s=t("indexof"),l=t("engine.io-parser"),c=t("parseuri"),f=t("parsejson"),p=t("parseqs");e.exports=r,r.priorWebsocketSuccess=!1,a(r.prototype),r.protocol=l.protocol,r.Socket=r,r.Transport=t("./transport"),r.transports=t("./transports"),r.parser=t("engine.io-parser"),r.prototype.createTransport=function(t){u('creating transport "%s"',t);var e=i(this.query);e.EIO=l.protocol,e.transport=t,this.id&&(e.sid=this.id);var n=new o[t]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:e,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized});return n},r.prototype.open=function(){var t;if(this.rememberUpgrade&&r.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))t="websocket";else{if(0==this.transports.length){var e=this;return void setTimeout(function(){e.emit("error","No transports available")},0)}t=this.transports[0]}this.readyState="opening";var t;try{t=this.createTransport(t)}catch(n){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},r.prototype.setTransport=function(t){u("setting transport %s",t.name);var e=this;this.transport&&(u("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",function(){e.onDrain()}).on("packet",function(t){e.onPacket(t)}).on("error",function(t){e.onError(t)}).on("close",function(){e.onClose("transport close")})},r.prototype.probe=function(t){function e(){if(p.onlyBinaryUpgrades){var e=!this.supportsBinary&&p.transport.supportsBinary;f=f||e}f||(u('probe transport "%s" opened',t),c.send([{type:"ping",data:"probe"}]),c.once("packet",function(e){if(!f)if("pong"==e.type&&"probe"==e.data){if(u('probe transport "%s" pong',t),p.upgrading=!0,p.emit("upgrading",c),!c)return;r.priorWebsocketSuccess="websocket"==c.name,u('pausing current transport "%s"',p.transport.name),p.transport.pause(function(){f||"closed"!=p.readyState&&(u("changing transport and sending upgrade packet"),l(),p.setTransport(c),c.send([{type:"upgrade"}]),p.emit("upgrade",c),c=null,p.upgrading=!1,p.flush())})}else{u('probe transport "%s" failed',t);var n=new Error("probe error");n.transport=c.name,p.emit("upgradeError",n)}}))}function n(){f||(f=!0,l(),c.close(),c=null)}function i(e){var r=new Error("probe error: "+e);r.transport=c.name,n(),u('probe transport "%s" failed because of error: %s',t,e),p.emit("upgradeError",r)}function o(){i("transport closed")}function a(){i("socket closed")}function s(t){c&&t.name!=c.name&&(u('"%s" works - aborting "%s"',t.name,c.name),n())}function l(){c.removeListener("open",e),c.removeListener("error",i),c.removeListener("close",o),p.removeListener("close",a),p.removeListener("upgrading",s)}u('probing transport "%s"',t);var c=this.createTransport(t,{probe:1}),f=!1,p=this;r.priorWebsocketSuccess=!1,c.once("open",e),c.once("error",i),c.once("close",o),this.once("close",a),this.once("upgrading",s),c.open()},r.prototype.onOpen=function(){if(u("socket open"),this.readyState="open",r.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){u("starting upgrade probes");for(var t=0,e=this.upgrades.length;e>t;t++)this.probe(this.upgrades[t])}},r.prototype.onPacket=function(t){if("opening"==this.readyState||"open"==this.readyState)switch(u('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(f(t.data));break;case"pong":this.setPing();break;case"error":var e=new Error("server error");e.code=t.data,this.emit("error",e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else u('packet received with socket readyState "%s"',this.readyState)},r.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},r.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){"closed"!=e.readyState&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)},r.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){u("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)},r.prototype.ping=function(){this.sendPacket("ping")},r.prototype.onDrain=function(){for(var t=0;t<this.prevBufferLen;t++)this.callbackBuffer[t]&&this.callbackBuffer[t]();this.writeBuffer.splice(0,this.prevBufferLen),this.callbackBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0==this.writeBuffer.length?this.emit("drain"):this.flush()},r.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(u("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},r.prototype.write=r.prototype.send=function(t,e){return this.sendPacket("message",t,e),this},r.prototype.sendPacket=function(t,e,n){if("closing"!=this.readyState&&"closed"!=this.readyState){var r={type:t,data:e};this.emit("packetCreate",r),this.writeBuffer.push(r),this.callbackBuffer.push(n),this.flush()}},r.prototype.close=function(){function t(){r.onClose("forced close"),u("socket closing - telling transport to close"),r.transport.close()}function e(){r.removeListener("upgrade",e),r.removeListener("upgradeError",e),t()}function n(){r.once("upgrade",e),r.once("upgradeError",e)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var r=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():t()}):this.upgrading?n():t()}return this},r.prototype.onError=function(t){u("socket error %j",t),r.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},r.prototype.onClose=function(t,e){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){u('socket close with reason: "%s"',t);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),setTimeout(function(){n.writeBuffer=[],n.callbackBuffer=[],n.prevBufferLen=0},0),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e)}},r.prototype.filterUpgrades=function(t){for(var e=[],n=0,r=t.length;r>n;n++)~s(this.transports,t[n])&&e.push(t[n]);return e}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./transport":13,"./transports":14,"component-emitter":8,debug:21,"engine.io-parser":24,indexof:41,parsejson:35,parseqs:36,parseuri:37}],13:[function(t,e){function n(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized}var r=t("engine.io-parser"),i=t("component-emitter");e.exports=n,i(n.prototype),n.timestamps=0,n.prototype.onError=function(t,e){var n=new Error(t);return n.type="TransportError",n.description=e,this.emit("error",n),this},n.prototype.open=function(){return("closed"==this.readyState||""==this.readyState)&&(this.readyState="opening",this.doOpen()),this},n.prototype.close=function(){return("opening"==this.readyState||"open"==this.readyState)&&(this.doClose(),this.onClose()),this},n.prototype.send=function(t){if("open"!=this.readyState)throw new Error("Transport not open");this.write(t)},n.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},n.prototype.onData=function(t){var e=r.decodePacket(t,this.socket.binaryType);this.onPacket(e)},n.prototype.onPacket=function(t){this.emit("packet",t)},n.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":8,"engine.io-parser":24}],14:[function(t,e,n){(function(e){function r(t){var n,r=!1,u=!1,s=!1!==t.jsonp;if(e.location){var l="https:"==location.protocol,c=location.port;c||(c=l?443:80),r=t.hostname!=location.hostname||c!=t.port,u=t.secure!=l}if(t.xdomain=r,t.xscheme=u,n=new i(t),"open"in n&&!t.forceJSONP)return new o(t);if(!s)throw new Error("JSONP disabled");return new a(t)}var i=t("xmlhttprequest"),o=t("./polling-xhr"),a=t("./polling-jsonp"),u=t("./websocket");n.polling=r,n.websocket=u}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling-jsonp":15,"./polling-xhr":16,"./websocket":18,xmlhttprequest:19}],15:[function(t,e){(function(n){function r(){}function i(t){o.call(this,t),this.query=this.query||{},u||(n.___eio||(n.___eio=[]),u=n.___eio),this.index=u.length;var e=this;u.push(function(t){e.onData(t)}),this.query.j=this.index,n.document&&n.addEventListener&&n.addEventListener("beforeunload",function(){e.script&&(e.script.onerror=r)},!1)}var o=t("./polling"),a=t("component-inherit");e.exports=i;var u,s=/\n/g,l=/\\n/g;a(i,o),i.prototype.supportsBinary=!1,i.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),o.prototype.doClose.call(this)},i.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n),this.script=e;var r="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);r&&setTimeout(function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)},100)},i.prototype.doWrite=function(t,e){function n(){r(),e()}function r(){if(i.iframe)try{i.form.removeChild(i.iframe)}catch(t){i.onError("jsonp polling iframe removal error",t)}try{var e='<iframe src="javascript:0" name="'+i.iframeId+'">';o=document.createElement(e)}catch(t){o=document.createElement("iframe"),o.name=i.iframeId,o.src="javascript:0"}o.id=i.iframeId,i.form.appendChild(o),i.iframe=o}var i=this;if(!this.form){var o,a=document.createElement("form"),u=document.createElement("textarea"),c=this.iframeId="eio_iframe_"+this.index;a.className="socketio",a.style.position="absolute",a.style.top="-1000px",a.style.left="-1000px",a.target=c,a.method="POST",a.setAttribute("accept-charset","utf-8"),u.name="d",a.appendChild(u),document.body.appendChild(a),this.form=a,this.area=u}this.form.action=this.uri(),r(),t=t.replace(l,"\\\n"),this.area.value=t.replace(s,"\\n");try{this.form.submit()}catch(f){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==i.iframe.readyState&&n()}:this.iframe.onload=n}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":17,"component-inherit":20}],16:[function(t,e){(function(n){function r(){}function i(t){if(s.call(this,t),n.location){var e="https:"==location.protocol,r=location.port;r||(r=e?443:80),this.xd=t.hostname!=n.location.hostname||r!=t.port,this.xs=t.secure!=e}}function o(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!=t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.create()}function a(){for(var t in o.requests)o.requests.hasOwnProperty(t)&&o.requests[t].abort()}var u=t("xmlhttprequest"),s=t("./polling"),l=t("component-emitter"),c=t("component-inherit"),f=t("debug")("engine.io-client:polling-xhr");e.exports=i,e.exports.Request=o,c(i,s),i.prototype.supportsBinary=!0,i.prototype.request=function(t){return t=t||{},t.uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,new o(t)},i.prototype.doWrite=function(t,e){var n="string"!=typeof t&&void 0!==t,r=this.request({method:"POST",data:t,isBinary:n}),i=this;r.on("success",e),r.on("error",function(t){i.onError("xhr post error",t)}),this.sendXhr=r},i.prototype.doPoll=function(){f("xhr poll");var t=this.request(),e=this;t.on("data",function(t){e.onData(t)}),t.on("error",function(t){e.onError("xhr poll error",t)}),this.pollXhr=t},l(o.prototype),o.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var e=this.xhr=new u(t),r=this;try{if(f("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async),this.supportsBinary&&(e.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?e.setRequestHeader("Content-type","application/octet-stream"):e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(i){}"withCredentials"in e&&(e.withCredentials=!0),this.hasXDR()?(e.onload=function(){r.onLoad()},e.onerror=function(){r.onError(e.responseText)}):e.onreadystatechange=function(){4==e.readyState&&(200==e.status||1223==e.status?r.onLoad():setTimeout(function(){r.onError(e.status)},0))},f("xhr data %s",this.data),e.send(this.data)}catch(i){return void setTimeout(function(){r.onError(i)},0)}n.document&&(this.index=o.requestsCount++,o.requests[this.index]=this)},o.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},o.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},o.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},o.prototype.cleanup=function(t){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=r:this.xhr.onreadystatechange=r,t)try{this.xhr.abort()}catch(e){}n.document&&delete o.requests[this.index],this.xhr=null}},o.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(n){}t="application/octet-stream"===e?this.xhr.response:this.supportsBinary?"ok":this.xhr.responseText}catch(n){this.onError(n)}null!=t&&this.onData(t)},o.prototype.hasXDR=function(){return"undefined"!=typeof n.XDomainRequest&&!this.xs&&this.enablesXDR},o.prototype.abort=function(){this.cleanup()},n.document&&(o.requestsCount=0,o.requests={},n.attachEvent?n.attachEvent("onunload",a):n.addEventListener&&n.addEventListener("beforeunload",a,!1))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":17,"component-emitter":8,"component-inherit":20,debug:21,xmlhttprequest:19}],17:[function(t,e){function n(t){var e=t&&t.forceBase64;(!s||e)&&(this.supportsBinary=!1),r.call(this,t)}var r=t("../transport"),i=t("parseqs"),o=t("engine.io-parser"),a=t("component-inherit"),u=t("debug")("engine.io-client:polling");
e.exports=n;var s=function(){var e=t("xmlhttprequest"),n=new e({xdomain:!1});return null!=n.responseType}();a(n,r),n.prototype.name="polling",n.prototype.doOpen=function(){this.poll()},n.prototype.pause=function(t){function e(){u("paused"),n.readyState="paused",t()}var n=this;if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(u("we are currently polling - waiting to pause"),r++,this.once("pollComplete",function(){u("pre-pause polling complete"),--r||e()})),this.writable||(u("we are currently writing - waiting to pause"),r++,this.once("drain",function(){u("pre-pause writing complete"),--r||e()}))}else e()},n.prototype.poll=function(){u("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},n.prototype.onData=function(t){var e=this;u("polling got data %s",t);var n=function(t){return"opening"==e.readyState&&e.onOpen(),"close"==t.type?(e.onClose(),!1):void e.onPacket(t)};o.decodePayload(t,this.socket.binaryType,n),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():u('ignoring poll - transport state "%s"',this.readyState))},n.prototype.doClose=function(){function t(){u("writing close packet"),e.write([{type:"close"}])}var e=this;"open"==this.readyState?(u("transport open - closing"),t()):(u("transport not open - deferring close"),this.once("open",t))},n.prototype.write=function(t){var e=this;this.writable=!1;var n=function(){e.writable=!0,e.emit("drain")},e=this;o.encodePayload(t,this.supportsBinary,function(t){e.doWrite(t,n)})},n.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(t[this.timestampParam]=+new Date+"-"+r.timestamps++),this.supportsBinary||t.sid||(t.b64=1),t=i.encode(t),this.port&&("https"==e&&443!=this.port||"http"==e&&80!=this.port)&&(n=":"+this.port),t.length&&(t="?"+t),e+"://"+this.hostname+n+this.path+t}},{"../transport":13,"component-inherit":20,debug:21,"engine.io-parser":24,parseqs:36,xmlhttprequest:19}],18:[function(t,e){function n(t){var e=t&&t.forceBase64;e&&(this.supportsBinary=!1),r.call(this,t)}var r=t("../transport"),i=t("engine.io-parser"),o=t("parseqs"),a=t("component-inherit"),u=t("debug")("engine.io-client:websocket"),s=t("ws");e.exports=n,a(n,r),n.prototype.name="websocket",n.prototype.supportsBinary=!0,n.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=void 0,n={agent:this.agent};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.ws=new s(t,e,n),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.binaryType="arraybuffer",this.addEventListeners()}},n.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(n.prototype.onData=function(t){var e=this;setTimeout(function(){r.prototype.onData.call(e,t)},0)}),n.prototype.write=function(t){function e(){n.writable=!0,n.emit("drain")}var n=this;this.writable=!1;for(var r=0,o=t.length;o>r;r++)i.encodePacket(t[r],this.supportsBinary,function(t){try{n.ws.send(t)}catch(e){u("websocket closed before onclose event")}});setTimeout(e,0)},n.prototype.onClose=function(){r.prototype.onClose.call(this)},n.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},n.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",n="";return this.port&&("wss"==e&&443!=this.port||"ws"==e&&80!=this.port)&&(n=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=+new Date),this.supportsBinary||(t.b64=1),t=o.encode(t),t.length&&(t="?"+t),e+"://"+this.hostname+n+this.path+t},n.prototype.check=function(){return!(!s||"__initialize"in s&&this.name===n.prototype.name)}},{"../transport":13,"component-inherit":20,debug:21,"engine.io-parser":24,parseqs:36,ws:38}],19:[function(t,e){var n=t("has-cors");e.exports=function(t){var e=t.xdomain,r=t.xscheme,i=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!e||n))return new XMLHttpRequest}catch(o){}try{if("undefined"!=typeof XDomainRequest&&!r&&i)return new XDomainRequest}catch(o){}if(!e)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(o){}}},{"has-cors":33}],20:[function(t,e){e.exports=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],21:[function(t,e,n){function r(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function i(){var t=arguments,e=this.useColors;if(t[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+t[0]+(e?"%c ":" ")+"+"+n.humanize(this.diff),!e)return t;var r="color: "+this.color;t=[t[0],r,"color: inherit"].concat(Array.prototype.slice.call(t,1));var i=0,o=0;return t[0].replace(/%[a-z%]/g,function(t){"%%"!==t&&(i++,"%c"===t&&(o=i))}),t.splice(o,0,r),t}function o(){return"object"==typeof console&&"function"==typeof console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(t){try{null==t?localStorage.removeItem("debug"):localStorage.debug=t}catch(e){}}function u(){var t;try{t=localStorage.debug}catch(e){}return t}n=e.exports=t("./debug"),n.log=o,n.formatArgs=i,n.save=a,n.load=u,n.useColors=r,n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(t){return JSON.stringify(t)},n.enable(u())},{"./debug":22}],22:[function(t,e,n){function r(){return n.colors[c++%n.colors.length]}function i(t){function e(){}function i(){var t=i,e=+new Date,o=e-(l||e);t.diff=o,t.prev=l,t.curr=e,l=e,null==t.useColors&&(t.useColors=n.useColors()),null==t.color&&t.useColors&&(t.color=r());var a=Array.prototype.slice.call(arguments);a[0]=n.coerce(a[0]),"string"!=typeof a[0]&&(a=["%o"].concat(a));var u=0;a[0]=a[0].replace(/%([a-z%])/g,function(e,r){if("%%"===e)return e;u++;var i=n.formatters[r];if("function"==typeof i){var o=a[u];e=i.call(t,o),a.splice(u,1),u--}return e}),"function"==typeof n.formatArgs&&(a=n.formatArgs.apply(t,a));var s=i.log||n.log||console.log.bind(console);s.apply(t,a)}e.enabled=!1,i.enabled=!0;var o=n.enabled(t)?i:e;return o.namespace=t,o}function o(t){n.save(t);for(var e=(t||"").split(/[\s,]+/),r=e.length,i=0;r>i;i++)e[i]&&(t=e[i].replace(/\*/g,".*?"),"-"===t[0]?n.skips.push(new RegExp("^"+t.substr(1)+"$")):n.names.push(new RegExp("^"+t+"$")))}function a(){n.enable("")}function u(t){var e,r;for(e=0,r=n.skips.length;r>e;e++)if(n.skips[e].test(t))return!1;for(e=0,r=n.names.length;r>e;e++)if(n.names[e].test(t))return!0;return!1}function s(t){return t instanceof Error?t.stack||t.message:t}n=e.exports=i,n.coerce=s,n.disable=a,n.enable=o,n.enabled=u,n.humanize=t("ms"),n.names=[],n.skips=[],n.formatters={};var l,c=0},{ms:23}],23:[function(t,e){function n(t){var e=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"y":return n*c;case"days":case"day":case"d":return n*l;case"hours":case"hour":case"h":return n*s;case"minutes":case"minute":case"m":return n*u;case"seconds":case"second":case"s":return n*a;case"ms":return n}}}function r(t){return t>=l?Math.round(t/l)+"d":t>=s?Math.round(t/s)+"h":t>=u?Math.round(t/u)+"m":t>=a?Math.round(t/a)+"s":t+"ms"}function i(t){return o(t,l,"day")||o(t,s,"hour")||o(t,u,"minute")||o(t,a,"second")||t+" ms"}function o(t,e,n){return e>t?void 0:1.5*e>t?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}var a=1e3,u=60*a,s=60*u,l=24*s,c=365.25*l;e.exports=function(t,e){return e=e||{},"string"==typeof t?n(t):e["long"]?i(t):r(t)}},{}],24:[function(t,e,n){(function(e){function r(t,e){var r="b"+n.packets[t.type]+t.data.data;return e(r)}function i(t,e,r){if(!e)return n.encodeBase64Packet(t,r);var i=t.data,o=new Uint8Array(i),a=new Uint8Array(1+i.byteLength);a[0]=v[t.type];for(var u=0;u<o.length;u++)a[u+1]=o[u];return r(a.buffer)}function o(t,e,r){if(!e)return n.encodeBase64Packet(t,r);var i=new FileReader;return i.onload=function(){t.data=i.result,n.encodePacket(t,e,!0,r)},i.readAsArrayBuffer(t.data)}function a(t,e,r){if(!e)return n.encodeBase64Packet(t,r);if(m)return o(t,e,r);var i=new Uint8Array(1);i[0]=v[t.type];var a=new x([i.buffer,t.data]);return r(a)}function u(t,e,n){for(var r=new Array(t.length),i=p(t.length,n),o=function(t,n,i){e(n,function(e,n){r[t]=n,i(e,r)})},a=0;a<t.length;a++)o(a,t[a],i)}var s=t("./keys"),l=t("has-binary"),c=t("arraybuffer.slice"),f=t("base64-arraybuffer"),p=t("after"),h=t("utf8"),d=navigator.userAgent.match(/Android/i),g=/PhantomJS/i.test(navigator.userAgent),m=d||g;n.protocol=3;var v=n.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},y=s(v),b={type:"error",data:"parser error"},x=t("blob");n.encodePacket=function(t,n,o,u){"function"==typeof n&&(u=n,n=!1),"function"==typeof o&&(u=o,o=null);var s=void 0===t.data?void 0:t.data.buffer||t.data;if(e.ArrayBuffer&&s instanceof ArrayBuffer)return i(t,n,u);if(x&&s instanceof e.Blob)return a(t,n,u);if(s&&s.base64)return r(t,u);var l=v[t.type];return void 0!==t.data&&(l+=o?h.encode(String(t.data)):String(t.data)),u(""+l)},n.encodeBase64Packet=function(t,r){var i="b"+n.packets[t.type];if(x&&t.data instanceof x){var o=new FileReader;return o.onload=function(){var t=o.result.split(",")[1];r(i+t)},o.readAsDataURL(t.data)}var a;try{a=String.fromCharCode.apply(null,new Uint8Array(t.data))}catch(u){for(var s=new Uint8Array(t.data),l=new Array(s.length),c=0;c<s.length;c++)l[c]=s[c];a=String.fromCharCode.apply(null,l)}return i+=e.btoa(a),r(i)},n.decodePacket=function(t,e,r){if("string"==typeof t||void 0===t){if("b"==t.charAt(0))return n.decodeBase64Packet(t.substr(1),e);if(r)try{t=h.decode(t)}catch(i){return b}var o=t.charAt(0);return Number(o)==o&&y[o]?t.length>1?{type:y[o],data:t.substring(1)}:{type:y[o]}:b}var a=new Uint8Array(t),o=a[0],u=c(t,1);return x&&"blob"===e&&(u=new x([u])),{type:y[o],data:u}},n.decodeBase64Packet=function(t,n){var r=y[t.charAt(0)];if(!e.ArrayBuffer)return{type:r,data:{base64:!0,data:t.substr(1)}};var i=f.decode(t.substr(1));return"blob"===n&&x&&(i=new x([i])),{type:r,data:i}},n.encodePayload=function(t,e,r){function i(t){return t.length+":"+t}function o(t,r){n.encodePacket(t,a?e:!1,!0,function(t){r(null,i(t))})}"function"==typeof e&&(r=e,e=null);var a=l(t);return e&&a?x&&!m?n.encodePayloadAsBlob(t,r):n.encodePayloadAsArrayBuffer(t,r):t.length?void u(t,o,function(t,e){return r(e.join(""))}):r("0:")},n.decodePayload=function(t,e,r){if("string"!=typeof t)return n.decodePayloadAsBinary(t,e,r);"function"==typeof e&&(r=e,e=null);var i;if(""==t)return r(b,0,1);for(var o,a,u="",s=0,l=t.length;l>s;s++){var c=t.charAt(s);if(":"!=c)u+=c;else{if(""==u||u!=(o=Number(u)))return r(b,0,1);if(a=t.substr(s+1,o),u!=a.length)return r(b,0,1);if(a.length){if(i=n.decodePacket(a,e,!0),b.type==i.type&&b.data==i.data)return r(b,0,1);var f=r(i,s+o,l);if(!1===f)return}s+=o,u=""}}return""!=u?r(b,0,1):void 0},n.encodePayloadAsArrayBuffer=function(t,e){function r(t,e){n.encodePacket(t,!0,!0,function(t){return e(null,t)})}return t.length?void u(t,r,function(t,n){var r=n.reduce(function(t,e){var n;return n="string"==typeof e?e.length:e.byteLength,t+n.toString().length+n+2},0),i=new Uint8Array(r),o=0;return n.forEach(function(t){var e="string"==typeof t,n=t;if(e){for(var r=new Uint8Array(t.length),a=0;a<t.length;a++)r[a]=t.charCodeAt(a);n=r.buffer}i[o++]=e?0:1;for(var u=n.byteLength.toString(),a=0;a<u.length;a++)i[o++]=parseInt(u[a]);i[o++]=255;for(var r=new Uint8Array(n),a=0;a<r.length;a++)i[o++]=r[a]}),e(i.buffer)}):e(new ArrayBuffer(0))},n.encodePayloadAsBlob=function(t,e){function r(t,e){n.encodePacket(t,!0,!0,function(t){var n=new Uint8Array(1);if(n[0]=1,"string"==typeof t){for(var r=new Uint8Array(t.length),i=0;i<t.length;i++)r[i]=t.charCodeAt(i);t=r.buffer,n[0]=0}for(var o=t instanceof ArrayBuffer?t.byteLength:t.size,a=o.toString(),u=new Uint8Array(a.length+1),i=0;i<a.length;i++)u[i]=parseInt(a[i]);if(u[a.length]=255,x){var s=new x([n.buffer,u.buffer,t]);e(null,s)}})}u(t,r,function(t,n){return e(new x(n))})},n.decodePayloadAsBinary=function(t,e,r){"function"==typeof e&&(r=e,e=null);for(var i=t,o=[],a=!1;i.byteLength>0;){for(var u=new Uint8Array(i),s=0===u[0],l="",f=1;255!=u[f];f++){if(l.length>310){a=!0;break}l+=u[f]}if(a)return r(b,0,1);i=c(i,2+l.length),l=parseInt(l);var p=c(i,0,l);if(s)try{p=String.fromCharCode.apply(null,new Uint8Array(p))}catch(h){var d=new Uint8Array(p);p="";for(var f=0;f<d.length;f++)p+=String.fromCharCode(d[f])}o.push(p),i=c(i,l)}var g=o.length;o.forEach(function(t,i){r(n.decodePacket(t,e,!0),i,g)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./keys":25,after:26,"arraybuffer.slice":27,"base64-arraybuffer":28,blob:29,"has-binary":30,utf8:32}],25:[function(t,e){e.exports=Object.keys||function(t){var e=[],n=Object.prototype.hasOwnProperty;for(var r in t)n.call(t,r)&&e.push(r);return e}},{}],26:[function(t,e){function n(t,e,n){function i(t,r){if(i.count<=0)throw new Error("after called too many times");--i.count,t?(o=!0,e(t),e=n):0!==i.count||o||e(null,r)}var o=!1;return n=n||r,i.count=t,0===t?e():i}function r(){}e.exports=n},{}],27:[function(t,e){e.exports=function(t,e,n){var r=t.byteLength;if(e=e||0,n=n||r,t.slice)return t.slice(e,n);if(0>e&&(e+=r),0>n&&(n+=r),n>r&&(n=r),e>=r||e>=n||0===r)return new ArrayBuffer(0);for(var i=new Uint8Array(t),o=new Uint8Array(n-e),a=e,u=0;n>a;a++,u++)o[u]=i[a];return o.buffer}},{}],28:[function(t,e,n){!function(t){"use strict";n.encode=function(e){var n,r=new Uint8Array(e),i=r.length,o="";for(n=0;i>n;n+=3)o+=t[r[n]>>2],o+=t[(3&r[n])<<4|r[n+1]>>4],o+=t[(15&r[n+1])<<2|r[n+2]>>6],o+=t[63&r[n+2]];return i%3===2?o=o.substring(0,o.length-1)+"=":i%3===1&&(o=o.substring(0,o.length-2)+"=="),o},n.decode=function(e){var n,r,i,o,a,u=.75*e.length,s=e.length,l=0;"="===e[e.length-1]&&(u--,"="===e[e.length-2]&&u--);var c=new ArrayBuffer(u),f=new Uint8Array(c);for(n=0;s>n;n+=4)r=t.indexOf(e[n]),i=t.indexOf(e[n+1]),o=t.indexOf(e[n+2]),a=t.indexOf(e[n+3]),f[l++]=r<<2|i>>4,f[l++]=(15&i)<<4|o>>2,f[l++]=(3&o)<<6|63&a;return c}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],29:[function(t,e){(function(t){function n(t,e){e=e||{};for(var n=new r,i=0;i<t.length;i++)n.append(t[i]);return e.type?n.getBlob(e.type):n.getBlob()}var r=t.BlobBuilder||t.WebKitBlobBuilder||t.MSBlobBuilder||t.MozBlobBuilder,i=function(){try{var t=new Blob(["hi"]);return 2==t.size}catch(e){return!1}}(),o=r&&r.prototype.append&&r.prototype.getBlob;e.exports=function(){return i?t.Blob:o?n:void 0}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],30:[function(t,e){(function(n){function r(t){function e(t){if(!t)return!1;if(n.Buffer&&n.Buffer.isBuffer(t)||n.ArrayBuffer&&t instanceof ArrayBuffer||n.Blob&&t instanceof Blob||n.File&&t instanceof File)return!0;if(i(t)){for(var r=0;r<t.length;r++)if(e(t[r]))return!0}else if(t&&"object"==typeof t){t.toJSON&&(t=t.toJSON());for(var o in t)if(t.hasOwnProperty(o)&&e(t[o]))return!0}return!1}return e(t)}var i=t("isarray");e.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:31}],31:[function(t,e){e.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},{}],32:[function(t,e,n){(function(t){!function(r){function i(t){for(var e,n,r=[],i=0,o=t.length;o>i;)e=t.charCodeAt(i++),e>=55296&&56319>=e&&o>i?(n=t.charCodeAt(i++),56320==(64512&n)?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--)):r.push(e);return r}function o(t){for(var e,n=t.length,r=-1,i="";++r<n;)e=t[r],e>65535&&(e-=65536,i+=y(e>>>10&1023|55296),e=56320|1023&e),i+=y(e);return i}function a(t,e){return y(t>>e&63|128)}function u(t){if(0==(4294967168&t))return y(t);var e="";return 0==(4294965248&t)?e=y(t>>6&31|192):0==(4294901760&t)?(e=y(t>>12&15|224),e+=a(t,6)):0==(4292870144&t)&&(e=y(t>>18&7|240),e+=a(t,12),e+=a(t,6)),e+=y(63&t|128)}function s(t){for(var e,n=i(t),r=n.length,o=-1,a="";++o<r;)e=n[o],a+=u(e);return a}function l(){if(v>=m)throw Error("Invalid byte index");var t=255&g[v];if(v++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function c(){var t,e,n,r,i;if(v>m)throw Error("Invalid byte index");if(v==m)return!1;if(t=255&g[v],v++,0==(128&t))return t;if(192==(224&t)){var e=l();if(i=(31&t)<<6|e,i>=128)return i;throw Error("Invalid continuation byte")}if(224==(240&t)){if(e=l(),n=l(),i=(15&t)<<12|e<<6|n,i>=2048)return i;throw Error("Invalid continuation byte")}if(240==(248&t)&&(e=l(),n=l(),r=l(),i=(15&t)<<18|e<<12|n<<6|r,i>=65536&&1114111>=i))return i;throw Error("Invalid UTF-8 detected")}function f(t){g=i(t),m=g.length,v=0;for(var e,n=[];(e=c())!==!1;)n.push(e);return o(n)}var p="object"==typeof n&&n,h="object"==typeof e&&e&&e.exports==p&&e,d="object"==typeof t&&t;(d.global===d||d.window===d)&&(r=d);var g,m,v,y=String.fromCharCode,b={version:"2.0.0",encode:s,decode:f};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return b});else if(p&&!p.nodeType)if(h)h.exports=b;else{var x={},w=x.hasOwnProperty;for(var M in b)w.call(b,M)&&(p[M]=b[M])}else r.utf8=b}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],33:[function(t,e){var n=t("global");try{e.exports="XMLHttpRequest"in n&&"withCredentials"in new n.XMLHttpRequest}catch(r){e.exports=!1}},{global:34}],34:[function(t,e){e.exports=function(){return this}()},{}],35:[function(t,e){(function(t){var n=/^[\],:{}\s]*$/,r=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,i=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,o=/(?:^|:|,)(?:\s*\[)+/g,a=/^\s+/,u=/\s+$/;e.exports=function(e){return"string"==typeof e&&e?(e=e.replace(a,"").replace(u,""),t.JSON&&JSON.parse?JSON.parse(e):n.test(e.replace(r,"@").replace(i,"]").replace(o,""))?new Function("return "+e)():void 0):null}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],36:[function(t,e,n){n.encode=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e},n.decode=function(t){for(var e={},n=t.split("&"),r=0,i=n.length;i>r;r++){var o=n[r].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}},{}],37:[function(t,e){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(t){var e=t,i=t.indexOf("["),o=t.indexOf("]");-1!=i&&-1!=o&&(t=t.substring(0,i)+t.substring(i,o).replace(/:/g,";")+t.substring(o,t.length));for(var a=n.exec(t||""),u={},s=14;s--;)u[r[s]]=a[s]||"";return-1!=i&&-1!=o&&(u.source=e,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u}},{}],38:[function(t,e){function n(t,e){var n;return n=e?new i(t,e):new i(t)}var r=function(){return this}(),i=r.WebSocket||r.MozWebSocket;e.exports=i?n:null,i&&(n.prototype=i.prototype)},{}],39:[function(t,e){(function(n){function r(t){function e(t){if(!t)return!1;if(n.Buffer&&n.Buffer.isBuffer(t)||n.ArrayBuffer&&t instanceof ArrayBuffer||n.Blob&&t instanceof Blob||n.File&&t instanceof File)return!0;if(i(t)){for(var r=0;r<t.length;r++)if(e(t[r]))return!0}else if(t&&"object"==typeof t){t.toJSON&&(t=t.toJSON());for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)&&e(t[o]))return!0}return!1}return e(t)}var i=t("isarray");e.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:40}],40:[function(t,e){e.exports=t(31)},{"/Users/traveler/Projects/bidask-multiplayer/node_modules/socket.io-client/node_modules/engine.io-client/node_modules/engine.io-parser/node_modules/has-binary/node_modules/isarray/index.js":31}],41:[function(t,e){var n=[].indexOf;e.exports=function(t,e){if(n)return t.indexOf(e);for(var r=0;r<t.length;++r)if(t[r]===e)return r;return-1}},{}],42:[function(t,e,n){var r=Object.prototype.hasOwnProperty;n.keys=Object.keys||function(t){var e=[];for(var n in t)r.call(t,n)&&e.push(n);return e},n.values=function(t){var e=[];for(var n in t)r.call(t,n)&&e.push(t[n]);return e},n.merge=function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);return t},n.length=function(t){return n.keys(t).length},n.isEmpty=function(t){return 0==n.length(t)}},{}],43:[function(t,e){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(t){for(var e=n.exec(t||""),i={},o=14;o--;)i[r[o]]=e[o]||"";return i}},{}],44:[function(t,e,n){(function(e){var r=t("isarray"),i=t("./is-buffer");n.deconstructPacket=function(t){function e(t){if(!t)return t;if(i(t)){var o={_placeholder:!0,num:n.length};return n.push(t),o}if(r(t)){for(var a=new Array(t.length),u=0;u<t.length;u++)a[u]=e(t[u]);return a}if("object"==typeof t&&!(t instanceof Date)){var a={};for(var s in t)a[s]=e(t[s]);return a}return t}var n=[],o=t.data,a=t;return a.data=e(o),a.attachments=n.length,{packet:a,buffers:n}},n.reconstructPacket=function(t,e){function n(t){if(t&&t._placeholder){var i=e[t.num];return i}if(r(t)){for(var o=0;o<t.length;o++)t[o]=n(t[o]);return t}if(t&&"object"==typeof t){for(var a in t)t[a]=n(t[a]);return t}return t}return t.data=n(t.data),t.attachments=void 0,t},n.removeBlobs=function(t,n){function o(t,s,l){if(!t)return t;if(e.Blob&&t instanceof Blob||e.File&&t instanceof File){a++;var c=new FileReader;c.onload=function(){l?l[s]=this.result:u=this.result,--a||n(u)},c.readAsArrayBuffer(t)}else if(r(t))for(var f=0;f<t.length;f++)o(t[f],f,t);else if(t&&"object"==typeof t&&!i(t))for(var p in t)o(t[p],p,t)}var a=0,u=t;o(u),a||n(u)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./is-buffer":46,isarray:47}],45:[function(t,e,n){function r(){}function i(t){var e="",r=!1;return e+=t.type,(n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type)&&(e+=t.attachments,e+="-"),t.nsp&&"/"!=t.nsp&&(r=!0,e+=t.nsp),null!=t.id&&(r&&(e+=",",r=!1),e+=t.id),null!=t.data&&(r&&(e+=","),e+=f.stringify(t.data)),c("encoded %j as %s",t,e),e}function o(t,e){function n(t){var n=h.deconstructPacket(t),r=i(n.packet),o=n.buffers;o.unshift(r),e(o)}h.removeBlobs(t,n)}function a(){this.reconstructor=null}function u(t){var e={},r=0;if(e.type=Number(t.charAt(0)),null==n.types[e.type])return l();if(n.BINARY_EVENT==e.type||n.BINARY_ACK==e.type){for(var i="";"-"!=t.charAt(++r)&&(i+=t.charAt(r),r+1!=t.length););if(i!=Number(i)||"-"!=t.charAt(r))throw new Error("Illegal attachments");e.attachments=Number(i)}if("/"==t.charAt(r+1))for(e.nsp="";++r;){var o=t.charAt(r);if(","==o)break;if(e.nsp+=o,r+1==t.length)break}else e.nsp="/";var a=t.charAt(r+1);if(""!==a&&Number(a)==a){for(e.id="";++r;){var o=t.charAt(r);if(null==o||Number(o)!=o){--r;break}if(e.id+=t.charAt(r),r+1==t.length)break}e.id=Number(e.id)}if(t.charAt(++r))try{e.data=f.parse(t.substr(r))}catch(u){return l()}return c("decoded %s as %j",t,e),e}function s(t){this.reconPack=t,this.buffers=[]}function l(){return{type:n.ERROR,data:"parser error"}}var c=t("debug")("socket.io-parser"),f=t("json3"),p=(t("isarray"),t("component-emitter")),h=t("./binary"),d=t("./is-buffer");n.protocol=4,n.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],n.CONNECT=0,n.DISCONNECT=1,n.EVENT=2,n.ACK=3,n.ERROR=4,n.BINARY_EVENT=5,n.BINARY_ACK=6,n.Encoder=r,n.Decoder=a,r.prototype.encode=function(t,e){if(c("encoding packet %j",t),n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type)o(t,e);else{var r=i(t);e([r])}},p(a.prototype),a.prototype.add=function(t){var e;if("string"==typeof t)e=u(t),n.BINARY_EVENT==e.type||n.BINARY_ACK==e.type?(this.reconstructor=new s(e),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",e)):this.emit("decoded",e);else{if(!d(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,this.emit("decoded",e))}},a.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},s.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length==this.reconPack.attachments){var e=h.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},s.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":44,"./is-buffer":46,"component-emitter":8,debug:9,isarray:47,json3:48}],46:[function(t,e){(function(t){function n(e){return t.Buffer&&t.Buffer.isBuffer(e)||t.ArrayBuffer&&e instanceof ArrayBuffer}e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],47:[function(t,e){e.exports=t(31)},{"/Users/traveler/Projects/bidask-multiplayer/node_modules/socket.io-client/node_modules/engine.io-client/node_modules/engine.io-parser/node_modules/has-binary/node_modules/isarray/index.js":31}],48:[function(t,e,n){!function(t){function e(t){if(e[t]!==o)return e[t];var n;if("bug-string-char-index"==t)n="a"!="a"[0];else if("json"==t)n=e("json-stringify")&&e("json-parse");else{var r,i='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==t){var u=l.stringify,s="function"==typeof u&&c;if(s){(r=function(){return 1}).toJSON=r;try{s="0"===u(0)&&"0"===u(new Number)&&'""'==u(new String)&&u(a)===o&&u(o)===o&&u()===o&&"1"===u(r)&&"[1]"==u([r])&&"[null]"==u([o])&&"null"==u(null)&&"[null,null,null]"==u([o,a,null])&&u({a:[r,!0,!1,null,"\x00\b\n\f\r	"]})==i&&"1"===u(null,r)&&"[\n 1,\n 2\n]"==u([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==u(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==u(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==u(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==u(new Date(-1))}catch(f){s=!1}}n=s}if("json-parse"==t){var p=l.parse;if("function"==typeof p)try{if(0===p("0")&&!p(!1)){r=p(i);var h=5==r.a.length&&1===r.a[0];if(h){try{h=!p('"	"')}catch(f){}if(h)try{h=1!==p("01")}catch(f){}if(h)try{h=1!==p("1.")}catch(f){}}}}catch(f){h=!1}n=h}}return e[t]=!!n}var r,i,o,a={}.toString,u="function"==typeof define&&define.amd,s="object"==typeof JSON&&JSON,l="object"==typeof n&&n&&!n.nodeType&&n;l&&s?(l.stringify=s.stringify,l.parse=s.parse):l=t.JSON=s||{};var c=new Date(-0xc782b5b800cec);try{c=-109252==c.getUTCFullYear()&&0===c.getUTCMonth()&&1===c.getUTCDate()&&10==c.getUTCHours()&&37==c.getUTCMinutes()&&6==c.getUTCSeconds()&&708==c.getUTCMilliseconds()}catch(f){}if(!e("json")){var p="[object Function]",h="[object Date]",d="[object Number]",g="[object String]",m="[object Array]",v="[object Boolean]",y=e("bug-string-char-index");if(!c)var b=Math.floor,x=[0,31,59,90,120,151,181,212,243,273,304,334],w=function(t,e){return x[e]+365*(t-1970)+b((t-1969+(e=+(e>1)))/4)-b((t-1901+e)/100)+b((t-1601+e)/400)};(r={}.hasOwnProperty)||(r=function(t){var e,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=a?r=function(t){var e=this.__proto__,n=t in(this.__proto__=null,this);return this.__proto__=e,n}:(e=n.constructor,r=function(t){var n=(this.constructor||e).prototype;return t in this&&!(t in n&&this[t]===n[t])}),n=null,r.call(this,t)});var M={"boolean":1,number:1,string:1,undefined:1},k=function(t,e){var n=typeof t[e];return"object"==n?!!t[e]:!M[n]};if(i=function(t,e){var n,o,u,s=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,o=new n;for(u in o)r.call(o,u)&&s++;return n=o=null,s?i=2==s?function(t,e){var n,i={},o=a.call(t)==p;for(n in t)o&&"prototype"==n||r.call(i,n)||!(i[n]=1)||!r.call(t,n)||e(n)}:function(t,e){var n,i,o=a.call(t)==p;for(n in t)o&&"prototype"==n||!r.call(t,n)||(i="constructor"===n)||e(n);(i||r.call(t,n="constructor"))&&e(n)}:(o=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],i=function(t,e){var n,i,u=a.call(t)==p,s=!u&&"function"!=typeof t.constructor&&k(t,"hasOwnProperty")?t.hasOwnProperty:r;for(n in t)u&&"prototype"==n||!s.call(t,n)||e(n);for(i=o.length;n=o[--i];s.call(t,n)&&e(n));}),i(t,e)},!e("json-stringify")){var E={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},S="000000",_=function(t,e){return(S+(e||0)).slice(-t)},C="\\u00",N=function(t){var e,n='"',r=0,i=t.length,o=i>10&&y;for(o&&(e=t.split(""));i>r;r++){var a=t.charCodeAt(r);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:n+=E[a];break;default:if(32>a){n+=C+_(2,a.toString(16));break}n+=o?e[r]:y?t.charAt(r):t[r]}}return n+'"'},A=function(t,e,n,u,s,l,c){var f,p,y,x,M,k,E,S,C,T,D,O,R,B,P,j;try{f=e[t]}catch(L){}if("object"==typeof f&&f)if(p=a.call(f),p!=h||r.call(f,"toJSON"))"function"==typeof f.toJSON&&(p!=d&&p!=g&&p!=m||r.call(f,"toJSON"))&&(f=f.toJSON(t));else if(f>-1/0&&1/0>f){if(w){for(M=b(f/864e5),y=b(M/365.2425)+1970-1;w(y+1,0)<=M;y++);for(x=b((M-w(y,0))/30.42);w(y,x+1)<=M;x++);M=1+M-w(y,x),k=(f%864e5+864e5)%864e5,E=b(k/36e5)%24,S=b(k/6e4)%60,C=b(k/1e3)%60,T=k%1e3}else y=f.getUTCFullYear(),x=f.getUTCMonth(),M=f.getUTCDate(),E=f.getUTCHours(),S=f.getUTCMinutes(),C=f.getUTCSeconds(),T=f.getUTCMilliseconds();f=(0>=y||y>=1e4?(0>y?"-":"+")+_(6,0>y?-y:y):_(4,y))+"-"+_(2,x+1)+"-"+_(2,M)+"T"+_(2,E)+":"+_(2,S)+":"+_(2,C)+"."+_(3,T)+"Z"}else f=null;if(n&&(f=n.call(e,t,f)),null===f)return"null";if(p=a.call(f),p==v)return""+f;if(p==d)return f>-1/0&&1/0>f?""+f:"null";if(p==g)return N(""+f);if("object"==typeof f){for(B=c.length;B--;)if(c[B]===f)throw TypeError();if(c.push(f),D=[],P=l,l+=s,p==m){for(R=0,B=f.length;B>R;R++)O=A(R,f,n,u,s,l,c),D.push(O===o?"null":O);j=D.length?s?"[\n"+l+D.join(",\n"+l)+"\n"+P+"]":"["+D.join(",")+"]":"[]"}else i(u||f,function(t){var e=A(t,f,n,u,s,l,c);e!==o&&D.push(N(t)+":"+(s?" ":"")+e)}),j=D.length?s?"{\n"+l+D.join(",\n"+l)+"\n"+P+"}":"{"+D.join(",")+"}":"{}";return c.pop(),j}};l.stringify=function(t,e,n){var r,i,o,u;if("function"==typeof e||"object"==typeof e&&e)if((u=a.call(e))==p)i=e;else if(u==m){o={};for(var s,l=0,c=e.length;c>l;s=e[l++],u=a.call(s),(u==g||u==d)&&(o[s]=1));}if(n)if((u=a.call(n))==d){if((n-=n%1)>0)for(r="",n>10&&(n=10);r.length<n;r+=" ");}else u==g&&(r=n.length<=10?n:n.slice(0,10));return A("",(s={},s[""]=t,s),i,o,r,"",[])}}if(!e("json-parse")){var T,D,O=String.fromCharCode,R={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},B=function(){throw T=D=null,SyntaxError()},P=function(){for(var t,e,n,r,i,o=D,a=o.length;a>T;)switch(i=o.charCodeAt(T)){case 9:case 10:case 13:case 32:T++;break;case 123:case 125:case 91:case 93:case 58:case 44:return t=y?o.charAt(T):o[T],T++,t;case 34:for(t="@",T++;a>T;)if(i=o.charCodeAt(T),32>i)B();else if(92==i)switch(i=o.charCodeAt(++T)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:t+=R[i],T++;break;case 117:for(e=++T,n=T+4;n>T;T++)i=o.charCodeAt(T),i>=48&&57>=i||i>=97&&102>=i||i>=65&&70>=i||B();t+=O("0x"+o.slice(e,T));break;default:B()}else{if(34==i)break;for(i=o.charCodeAt(T),e=T;i>=32&&92!=i&&34!=i;)i=o.charCodeAt(++T);t+=o.slice(e,T)}if(34==o.charCodeAt(T))return T++,t;
B();default:if(e=T,45==i&&(r=!0,i=o.charCodeAt(++T)),i>=48&&57>=i){for(48==i&&(i=o.charCodeAt(T+1),i>=48&&57>=i)&&B(),r=!1;a>T&&(i=o.charCodeAt(T),i>=48&&57>=i);T++);if(46==o.charCodeAt(T)){for(n=++T;a>n&&(i=o.charCodeAt(n),i>=48&&57>=i);n++);n==T&&B(),T=n}if(i=o.charCodeAt(T),101==i||69==i){for(i=o.charCodeAt(++T),(43==i||45==i)&&T++,n=T;a>n&&(i=o.charCodeAt(n),i>=48&&57>=i);n++);n==T&&B(),T=n}return+o.slice(e,T)}if(r&&B(),"true"==o.slice(T,T+4))return T+=4,!0;if("false"==o.slice(T,T+5))return T+=5,!1;if("null"==o.slice(T,T+4))return T+=4,null;B()}return"$"},j=function(t){var e,n;if("$"==t&&B(),"string"==typeof t){if("@"==(y?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(e=[];t=P(),"]"!=t;n||(n=!0))n&&(","==t?(t=P(),"]"==t&&B()):B()),","==t&&B(),e.push(j(t));return e}if("{"==t){for(e={};t=P(),"}"!=t;n||(n=!0))n&&(","==t?(t=P(),"}"==t&&B()):B()),(","==t||"string"!=typeof t||"@"!=(y?t.charAt(0):t[0])||":"!=P())&&B(),e[t.slice(1)]=j(P());return e}B()}return t},L=function(t,e,n){var r=I(t,e,n);r===o?delete t[e]:t[e]=r},I=function(t,e,n){var r,o=t[e];if("object"==typeof o&&o)if(a.call(o)==m)for(r=o.length;r--;)L(o,r,n);else i(o,function(t){L(o,t,n)});return n.call(t,e,o)};l.parse=function(t,e){var n,r;return T=0,D=""+t,n=j(P()),"$"!=P()&&B(),T=D=null,e&&a.call(e)==p?I((r={},r[""]=n,r),"",e):n}}}u&&define(function(){return l})}(this)},{}],49:[function(t,e){function n(t,e){var n=[];e=e||0;for(var r=e||0;r<t.length;r++)n[r-e]=t[r];return n}e.exports=n},{}],d3:[function(t,e){!function(){function t(t){return t&&(t.ownerDocument||t.document||t).documentElement}function n(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function r(t,e){return e>t?-1:t>e?1:t>=e?0:0/0}function i(t){return null===t?0/0:+t}function o(t){return!isNaN(t)}function a(t){return{left:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);i>r;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);i>r;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}function u(t){return t.length}function s(t){for(var e=1;t*e%1;)e*=10;return e}function l(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function c(){this._=Object.create(null)}function f(t){return(t+="")===mu||t[0]===vu?vu+t:t}function p(t){return(t+="")[0]===vu?t.slice(1):t}function h(t){return f(t)in this._}function d(t){return(t=f(t))in this._&&delete this._[t]}function g(){var t=[];for(var e in this._)t.push(p(e));return t}function m(){var t=0;for(var e in this._)++t;return t}function v(){for(var t in this._)return!1;return!0}function y(){this._=Object.create(null)}function b(t){return t}function x(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}function w(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,r=yu.length;r>n;++n){var i=yu[n]+e;if(i in t)return i}}function M(){}function k(){}function E(t){function e(){for(var e,r=n,i=-1,o=r.length;++i<o;)(e=r[i].on)&&e.apply(this,arguments);return t}var n=[],r=new c;return e.on=function(e,i){var o,a=r.get(e);return arguments.length<2?a&&a.on:(a&&(a.on=null,n=n.slice(0,o=n.indexOf(a)).concat(n.slice(o+1)),r.remove(e)),i&&n.push(r.set(e,{on:i})),t)},e}function S(){ru.event.preventDefault()}function _(){for(var t,e=ru.event;t=e.sourceEvent;)e=t;return e}function C(t){for(var e=new k,n=0,r=arguments.length;++n<r;)e[arguments[n]]=E(e);return e.of=function(n,r){return function(i){try{var o=i.sourceEvent=ru.event;i.target=t,ru.event=i,e[i.type].apply(n,r)}finally{ru.event=o}}},e}function N(t){return xu(t,Eu),t}function A(t){return"function"==typeof t?t:function(){return wu(t,this)}}function T(t){return"function"==typeof t?t:function(){return Mu(t,this)}}function D(t,e){function n(){this.removeAttribute(t)}function r(){this.removeAttributeNS(t.space,t.local)}function i(){this.setAttribute(t,e)}function o(){this.setAttributeNS(t.space,t.local,e)}function a(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function u(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=ru.ns.qualify(t),null==e?t.local?r:n:"function"==typeof e?t.local?u:a:t.local?o:i}function O(t){return t.trim().replace(/\s+/g," ")}function R(t){return new RegExp("(?:^|\\s+)"+ru.requote(t)+"(?:\\s+|$)","g")}function B(t){return(t+"").trim().split(/^|\s+/)}function P(t,e){function n(){for(var n=-1;++n<i;)t[n](this,e)}function r(){for(var n=-1,r=e.apply(this,arguments);++n<i;)t[n](this,r)}t=B(t).map(j);var i=t.length;return"function"==typeof e?r:n}function j(t){var e=R(t);return function(n,r){if(i=n.classList)return r?i.add(t):i.remove(t);var i=n.getAttribute("class")||"";r?(e.lastIndex=0,e.test(i)||n.setAttribute("class",O(i+" "+t))):n.setAttribute("class",O(i.replace(e," ")))}}function L(t,e,n){function r(){this.style.removeProperty(t)}function i(){this.style.setProperty(t,e,n)}function o(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}return null==e?r:"function"==typeof e?o:i}function I(t,e){function n(){delete this[t]}function r(){this[t]=e}function i(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return null==e?n:"function"==typeof e?i:r}function q(t){function e(){var e=this.ownerDocument,n=this.namespaceURI;return n?e.createElementNS(n,t):e.createElement(t)}function n(){return this.ownerDocument.createElementNS(t.space,t.local)}return"function"==typeof t?t:(t=ru.ns.qualify(t)).local?n:e}function z(){var t=this.parentNode;t&&t.removeChild(this)}function F(t){return{__data__:t}}function H(t){return function(){return ku(this,t)}}function U(t){return arguments.length||(t=r),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function V(t,e){for(var n=0,r=t.length;r>n;n++)for(var i,o=t[n],a=0,u=o.length;u>a;a++)(i=o[a])&&e(i,a,n);return t}function $(t){return xu(t,_u),t}function W(t){var e,n;return function(r,i,o){var a,u=t[o].update,s=u.length;for(o!=n&&(n=o,e=0),i>=e&&(e=i+1);!(a=u[e])&&++e<s;);return a}}function J(t,e,n){function r(){var e=this[a];e&&(this.removeEventListener(t,e,e.$),delete this[a])}function i(){var i=s(e,ou(arguments));r.call(this),this.addEventListener(t,this[a]=i,i.$=n),i._=e}function o(){var e,n=new RegExp("^__on([^.]+)"+ru.requote(t)+"$");for(var r in this)if(e=r.match(n)){var i=this[r];this.removeEventListener(e[1],i,i.$),delete this[r]}}var a="__on"+t,u=t.indexOf("."),s=Y;u>0&&(t=t.slice(0,u));var l=Cu.get(t);return l&&(t=l,s=X),u?e?i:r:e?M:o}function Y(t,e){return function(n){var r=ru.event;ru.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{ru.event=r}}}function X(t,e){var n=Y(t,e);return function(t){var e=this,r=t.relatedTarget;r&&(r===e||8&r.compareDocumentPosition(e))||n.call(e,t)}}function K(e){var r=".dragsuppress-"+ ++Au,i="click"+r,o=ru.select(n(e)).on("touchmove"+r,S).on("dragstart"+r,S).on("selectstart"+r,S);if(null==Nu&&(Nu="onselectstart"in e?!1:w(e.style,"userSelect")),Nu){var a=t(e).style,u=a[Nu];a[Nu]="none"}return function(t){if(o.on(r,null),Nu&&(a[Nu]=u),t){var e=function(){o.on(i,null)};o.on(i,function(){S(),e()},!0),setTimeout(e,0)}}}function Z(t,e){e.changedTouches&&(e=e.changedTouches[0]);var r=t.ownerSVGElement||t;if(r.createSVGPoint){var i=r.createSVGPoint();if(0>Tu){var o=n(t);if(o.scrollX||o.scrollY){r=ru.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var a=r[0][0].getScreenCTM();Tu=!(a.f||a.e),r.remove()}}return Tu?(i.x=e.pageX,i.y=e.pageY):(i.x=e.clientX,i.y=e.clientY),i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var u=t.getBoundingClientRect();return[e.clientX-u.left-t.clientLeft,e.clientY-u.top-t.clientTop]}function G(){return ru.event.changedTouches[0].identifier}function Q(t){return t>0?1:0>t?-1:0}function te(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function ee(t){return t>1?0:-1>t?Ru:Math.acos(t)}function ne(t){return t>1?ju:-1>t?-ju:Math.asin(t)}function re(t){return((t=Math.exp(t))-1/t)/2}function ie(t){return((t=Math.exp(t))+1/t)/2}function oe(t){return((t=Math.exp(2*t))-1)/(t+1)}function ae(t){return(t=Math.sin(t/2))*t}function ue(){}function se(t,e,n){return this instanceof se?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof se?new se(t.h,t.s,t.l):Me(""+t,ke,se):new se(t,e,n)}function le(t,e,n){function r(t){return t>360?t-=360:0>t&&(t+=360),60>t?o+(a-o)*t/60:180>t?a:240>t?o+(a-o)*(240-t)/60:o}function i(t){return Math.round(255*r(t))}var o,a;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:0>e?0:e>1?1:e,n=0>n?0:n>1?1:n,a=.5>=n?n*(1+e):n+e-n*e,o=2*n-a,new ye(i(t+120),i(t),i(t-120))}function ce(t,e,n){return this instanceof ce?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof ce?new ce(t.h,t.c,t.l):t instanceof pe?de(t.l,t.a,t.b):de((t=Ee((t=ru.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new ce(t,e,n)}function fe(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new pe(n,Math.cos(t*=Lu)*e,Math.sin(t)*e)}function pe(t,e,n){return this instanceof pe?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof pe?new pe(t.l,t.a,t.b):t instanceof ce?fe(t.h,t.c,t.l):Ee((t=ye(t)).r,t.g,t.b):new pe(t,e,n)}function he(t,e,n){var r=(t+16)/116,i=r+e/500,o=r-n/200;return i=ge(i)*Yu,r=ge(r)*Xu,o=ge(o)*Ku,new ye(ve(3.2404542*i-1.5371385*r-.4985314*o),ve(-.969266*i+1.8760108*r+.041556*o),ve(.0556434*i-.2040259*r+1.0572252*o))}function de(t,e,n){return t>0?new ce(Math.atan2(n,e)*Iu,Math.sqrt(e*e+n*n),t):new ce(0/0,0/0,t)}function ge(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function me(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function ve(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function ye(t,e,n){return this instanceof ye?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof ye?new ye(t.r,t.g,t.b):Me(""+t,ye,le):new ye(t,e,n)}function be(t){return new ye(t>>16,t>>8&255,255&t)}function xe(t){return be(t)+""}function we(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function Me(t,e,n){var r,i,o,a=0,u=0,s=0;if(r=/([a-z]+)\((.*)\)/i.exec(t))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return e(_e(i[0]),_e(i[1]),_e(i[2]))}return(o=Qu.get(t.toLowerCase()))?e(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.slice(1),16))||(4===t.length?(a=(3840&o)>>4,a=a>>4|a,u=240&o,u=u>>4|u,s=15&o,s=s<<4|s):7===t.length&&(a=(16711680&o)>>16,u=(65280&o)>>8,s=255&o)),e(a,u,s))}function ke(t,e,n){var r,i,o=Math.min(t/=255,e/=255,n/=255),a=Math.max(t,e,n),u=a-o,s=(a+o)/2;return u?(i=.5>s?u/(a+o):u/(2-a-o),r=t==a?(e-n)/u+(n>e?6:0):e==a?(n-t)/u+2:(t-e)/u+4,r*=60):(r=0/0,i=s>0&&1>s?0:r),new se(r,i,s)}function Ee(t,e,n){t=Se(t),e=Se(e),n=Se(n);var r=me((.4124564*t+.3575761*e+.1804375*n)/Yu),i=me((.2126729*t+.7151522*e+.072175*n)/Xu),o=me((.0193339*t+.119192*e+.9503041*n)/Ku);return pe(116*i-16,500*(r-i),200*(i-o))}function Se(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function _e(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function Ce(t){return"function"==typeof t?t:function(){return t}}function Ne(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),Ae(e,n,t,r)}}function Ae(t,e,n,r){function i(){var t,e=s.status;if(!e&&De(s)||e>=200&&300>e||304===e){try{t=n.call(o,s)}catch(r){return void a.error.call(o,r)}a.load.call(o,t)}else a.error.call(o,s)}var o={},a=ru.dispatch("beforesend","progress","load","error"),u={},s=new XMLHttpRequest,l=null;return!this.XDomainRequest||"withCredentials"in s||!/^(http(s)?:)?\/\//.test(t)||(s=new XDomainRequest),"onload"in s?s.onload=s.onerror=i:s.onreadystatechange=function(){s.readyState>3&&i()},s.onprogress=function(t){var e=ru.event;ru.event=t;try{a.progress.call(o,s)}finally{ru.event=e}},o.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?u[t]:(null==e?delete u[t]:u[t]=e+"",o)},o.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",o):e},o.responseType=function(t){return arguments.length?(l=t,o):l},o.response=function(t){return n=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(ou(arguments)))}}),o.send=function(n,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),s.open(n,t,!0),null==e||"accept"in u||(u.accept=e+",*/*"),s.setRequestHeader)for(var c in u)s.setRequestHeader(c,u[c]);return null!=e&&s.overrideMimeType&&s.overrideMimeType(e),null!=l&&(s.responseType=l),null!=i&&o.on("error",i).on("load",function(t){i(null,t)}),a.beforesend.call(o,s),s.send(null==r?null:r),o},o.abort=function(){return s.abort(),o},ru.rebind(o,a,"on"),null==r?o:o.get(Te(r))}function Te(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}function De(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}function Oe(){var t=Re(),e=Be()-t;e>24?(isFinite(e)&&(clearTimeout(rs),rs=setTimeout(Oe,e)),ns=0):(ns=1,os(Oe))}function Re(){var t=Date.now();for(is=ts;is;)t>=is.t&&(is.f=is.c(t-is.t)),is=is.n;return t}function Be(){for(var t,e=ts,n=1/0;e;)e.f?e=t?t.n=e.n:ts=e.n:(e.t<n&&(n=e.t),e=(t=e).n);return es=t,n}function Pe(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function je(t,e){var n=Math.pow(10,3*gu(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}function Le(t){var e=t.decimal,n=t.thousands,r=t.grouping,i=t.currency,o=r&&n?function(t,e){for(var i=t.length,o=[],a=0,u=r[0],s=0;i>0&&u>0&&(s+u+1>e&&(u=Math.max(1,e-s)),o.push(t.substring(i-=u,i+u)),!((s+=u+1)>e));)u=r[a=(a+1)%r.length];return o.reverse().join(n)}:b;return function(t){var n=us.exec(t),r=n[1]||" ",a=n[2]||">",u=n[3]||"-",s=n[4]||"",l=n[5],c=+n[6],f=n[7],p=n[8],h=n[9],d=1,g="",m="",v=!1,y=!0;switch(p&&(p=+p.substring(1)),(l||"0"===r&&"="===a)&&(l=r="0",a="="),h){case"n":f=!0,h="g";break;case"%":d=100,m="%",h="f";break;case"p":d=100,m="%",h="r";break;case"b":case"o":case"x":case"X":"#"===s&&(g="0"+h.toLowerCase());case"c":y=!1;case"d":v=!0,p=0;break;case"s":d=-1,h="r"}"$"===s&&(g=i[0],m=i[1]),"r"!=h||p||(h="g"),null!=p&&("g"==h?p=Math.max(1,Math.min(21,p)):("e"==h||"f"==h)&&(p=Math.max(0,Math.min(20,p)))),h=ss.get(h)||Ie;var b=l&&f;return function(t){var n=m;if(v&&t%1)return"";var i=0>t||0===t&&0>1/t?(t=-t,"-"):"-"===u?"":u;if(0>d){var s=ru.formatPrefix(t,p);t=s.scale(t),n=s.symbol+m}else t*=d;t=h(t,p);var x,w,M=t.lastIndexOf(".");if(0>M){var k=y?t.lastIndexOf("e"):-1;0>k?(x=t,w=""):(x=t.substring(0,k),w=t.substring(k))}else x=t.substring(0,M),w=e+t.substring(M+1);!l&&f&&(x=o(x,1/0));var E=g.length+x.length+w.length+(b?0:i.length),S=c>E?new Array(E=c-E+1).join(r):"";return b&&(x=o(S+x,S.length?c-w.length:1/0)),i+=g,t=x+w,("<"===a?i+t+S:">"===a?S+i+t:"^"===a?S.substring(0,E>>=1)+i+t+S.substring(E):i+(b?t:S+t))+n}}}function Ie(t){return t+""}function qe(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function ze(t,e,n){function r(e){var n=t(e),r=o(n,1);return r-e>e-n?n:r}function i(n){return e(n=t(new cs(n-1)),1),n}function o(t,n){return e(t=new cs(+t),n),t}function a(t,r,o){var a=i(t),u=[];if(o>1)for(;r>a;)n(a)%o||u.push(new Date(+a)),e(a,1);else for(;r>a;)u.push(new Date(+a)),e(a,1);return u}function u(t,e,n){try{cs=qe;var r=new qe;return r._=t,a(r,e,n)}finally{cs=Date}}t.floor=t,t.round=r,t.ceil=i,t.offset=o,t.range=a;var s=t.utc=Fe(t);return s.floor=s,s.round=Fe(r),s.ceil=Fe(i),s.offset=Fe(o),s.range=u,t}function Fe(t){return function(e,n){try{cs=qe;var r=new qe;return r._=e,t(r,n)._}finally{cs=Date}}}function He(t){function e(t){function e(e){for(var n,i,o,a=[],u=-1,s=0;++u<r;)37===t.charCodeAt(u)&&(a.push(t.slice(s,u)),null!=(i=ps[n=t.charAt(++u)])&&(n=t.charAt(++u)),(o=N[n])&&(n=o(e,null==i?"e"===n?" ":"0":i)),a.push(n),s=u+1);return a.push(t.slice(s,u)),a.join("")}var r=t.length;return e.parse=function(e){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=n(r,t,e,0);if(i!=e.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var o=null!=r.Z&&cs!==qe,a=new(o?qe:cs);return"j"in r?a.setFullYear(r.y,0,r.j):"w"in r&&("W"in r||"U"in r)?(a.setFullYear(r.y,0,1),a.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(a.getDay()+5)%7:r.w+7*r.U-(a.getDay()+6)%7)):a.setFullYear(r.y,r.m,r.d),a.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),o?a._:a},e.toString=function(){return t},e}function n(t,e,n,r){for(var i,o,a,u=0,s=e.length,l=n.length;s>u;){if(r>=l)return-1;if(i=e.charCodeAt(u++),37===i){if(a=e.charAt(u++),o=A[a in ps?e.charAt(u++):a],!o||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function r(t,e,n){M.lastIndex=0;var r=M.exec(e.slice(n));return r?(t.w=k.get(r[0].toLowerCase()),n+r[0].length):-1}function i(t,e,n){x.lastIndex=0;var r=x.exec(e.slice(n));return r?(t.w=w.get(r[0].toLowerCase()),n+r[0].length):-1}function o(t,e,n){_.lastIndex=0;var r=_.exec(e.slice(n));return r?(t.m=C.get(r[0].toLowerCase()),n+r[0].length):-1}function a(t,e,n){E.lastIndex=0;var r=E.exec(e.slice(n));return r?(t.m=S.get(r[0].toLowerCase()),n+r[0].length):-1}function u(t,e,r){return n(t,N.c.toString(),e,r)}function s(t,e,r){return n(t,N.x.toString(),e,r)}function l(t,e,r){return n(t,N.X.toString(),e,r)}function c(t,e,n){var r=b.get(e.slice(n,n+=2).toLowerCase());return null==r?-1:(t.p=r,n)}var f=t.dateTime,p=t.date,h=t.time,d=t.periods,g=t.days,m=t.shortDays,v=t.months,y=t.shortMonths;e.utc=function(t){function n(t){try{cs=qe;var e=new cs;return e._=t,r(e)}finally{cs=Date}}var r=e(t);return n.parse=function(t){try{cs=qe;var e=r.parse(t);return e&&e._}finally{cs=Date}},n.toString=r.toString,n},e.multi=e.utc.multi=ln;var b=ru.map(),x=Ve(g),w=$e(g),M=Ve(m),k=$e(m),E=Ve(v),S=$e(v),_=Ve(y),C=$e(y);d.forEach(function(t,e){b.set(t.toLowerCase(),e)});var N={a:function(t){return m[t.getDay()]},A:function(t){return g[t.getDay()]},b:function(t){return y[t.getMonth()]},B:function(t){return v[t.getMonth()]},c:e(f),d:function(t,e){return Ue(t.getDate(),e,2)},e:function(t,e){return Ue(t.getDate(),e,2)},H:function(t,e){return Ue(t.getHours(),e,2)},I:function(t,e){return Ue(t.getHours()%12||12,e,2)},j:function(t,e){return Ue(1+ls.dayOfYear(t),e,3)},L:function(t,e){return Ue(t.getMilliseconds(),e,3)},m:function(t,e){return Ue(t.getMonth()+1,e,2)},M:function(t,e){return Ue(t.getMinutes(),e,2)},p:function(t){return d[+(t.getHours()>=12)]},S:function(t,e){return Ue(t.getSeconds(),e,2)},U:function(t,e){return Ue(ls.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Ue(ls.mondayOfYear(t),e,2)},x:e(p),X:e(h),y:function(t,e){return Ue(t.getFullYear()%100,e,2)},Y:function(t,e){return Ue(t.getFullYear()%1e4,e,4)},Z:un,"%":function(){return"%"}},A={a:r,A:i,b:o,B:a,c:u,d:tn,e:tn,H:nn,I:nn,j:en,L:an,m:Qe,M:rn,p:c,S:on,U:Je,w:We,W:Ye,x:s,X:l,y:Ke,Y:Xe,Z:Ze,"%":sn};return e}function Ue(t,e,n){var r=0>t?"-":"",i=(r?-t:t)+"",o=i.length;return r+(n>o?new Array(n-o+1).join(e)+i:i)}function Ve(t){return new RegExp("^(?:"+t.map(ru.requote).join("|")+")","i")}function $e(t){for(var e=new c,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function We(t,e,n){hs.lastIndex=0;var r=hs.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Je(t,e,n){hs.lastIndex=0;var r=hs.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function Ye(t,e,n){hs.lastIndex=0;var r=hs.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function Xe(t,e,n){hs.lastIndex=0;var r=hs.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Ke(t,e,n){hs.lastIndex=0;var r=hs.exec(e.slice(n,n+2));return r?(t.y=Ge(+r[0]),n+r[0].length):-1}function Ze(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function Ge(t){return t+(t>68?1900:2e3)}function Qe(t,e,n){hs.lastIndex=0;var r=hs.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function tn(t,e,n){hs.lastIndex=0;var r=hs.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function en(t,e,n){hs.lastIndex=0;var r=hs.exec(e.slice(n,n+3));return r?(t.j=+r[0],n+r[0].length):-1}function nn(t,e,n){hs.lastIndex=0;var r=hs.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function rn(t,e,n){hs.lastIndex=0;var r=hs.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function on(t,e,n){hs.lastIndex=0;var r=hs.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function an(t,e,n){hs.lastIndex=0;var r=hs.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function un(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",r=gu(e)/60|0,i=gu(e)%60;return n+Ue(r,"0",2)+Ue(i,"0",2)}function sn(t,e,n){ds.lastIndex=0;var r=ds.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function ln(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,r=t[n];!r[1](e);)r=t[++n];return r[0](e)}}function cn(){}function fn(t,e,n){var r=n.s=t+e,i=r-t,o=r-i;n.t=t-o+(e-i)}function pn(t,e){t&&ys.hasOwnProperty(t.type)&&ys[t.type](t,e)}function hn(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function dn(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)hn(t[n],e,1);e.polygonEnd()}function gn(){function t(t,e){t*=Lu,e=e*Lu/2+Ru/4;var n=t-r,a=n>=0?1:-1,u=a*n,s=Math.cos(e),l=Math.sin(e),c=o*l,f=i*s+c*Math.cos(u),p=c*a*Math.sin(u);xs.add(Math.atan2(p,f)),r=t,i=s,o=l}var e,n,r,i,o;ws.point=function(a,u){ws.point=t,r=(e=a)*Lu,i=Math.cos(u=(n=u)*Lu/2+Ru/4),o=Math.sin(u)},ws.lineEnd=function(){t(e,n)}}function mn(t){var e=t[0],n=t[1],r=Math.cos(n);return[r*Math.cos(e),r*Math.sin(e),Math.sin(n)]}function vn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function yn(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function bn(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function xn(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function wn(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Mn(t){return[Math.atan2(t[1],t[0]),ne(t[2])]}function kn(t,e){return gu(t[0]-e[0])<Du&&gu(t[1]-e[1])<Du}function En(t,e){t*=Lu;var n=Math.cos(e*=Lu);Sn(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function Sn(t,e,n){++Ms,Es+=(t-Es)/Ms,Ss+=(e-Ss)/Ms,_s+=(n-_s)/Ms}function _n(){function t(t,i){t*=Lu;var o=Math.cos(i*=Lu),a=o*Math.cos(t),u=o*Math.sin(t),s=Math.sin(i),l=Math.atan2(Math.sqrt((l=n*s-r*u)*l+(l=r*a-e*s)*l+(l=e*u-n*a)*l),e*a+n*u+r*s);ks+=l,Cs+=l*(e+(e=a)),Ns+=l*(n+(n=u)),As+=l*(r+(r=s)),Sn(e,n,r)}var e,n,r;Rs.point=function(i,o){i*=Lu;var a=Math.cos(o*=Lu);e=a*Math.cos(i),n=a*Math.sin(i),r=Math.sin(o),Rs.point=t,Sn(e,n,r)}}function Cn(){Rs.point=En}function Nn(){function t(t,e){t*=Lu;var n=Math.cos(e*=Lu),a=n*Math.cos(t),u=n*Math.sin(t),s=Math.sin(e),l=i*s-o*u,c=o*a-r*s,f=r*u-i*a,p=Math.sqrt(l*l+c*c+f*f),h=r*a+i*u+o*s,d=p&&-ee(h)/p,g=Math.atan2(p,h);Ts+=d*l,Ds+=d*c,Os+=d*f,ks+=g,Cs+=g*(r+(r=a)),Ns+=g*(i+(i=u)),As+=g*(o+(o=s)),Sn(r,i,o)}var e,n,r,i,o;Rs.point=function(a,u){e=a,n=u,Rs.point=t,a*=Lu;var s=Math.cos(u*=Lu);r=s*Math.cos(a),i=s*Math.sin(a),o=Math.sin(u),Sn(r,i,o)},Rs.lineEnd=function(){t(e,n),Rs.lineEnd=Cn,Rs.point=En}}function An(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return n=e.invert(n,r),n&&t.invert(n[0],n[1])}),n}function Tn(){return!0}function Dn(t,e,n,r,i){var o=[],a=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],r=t[e];if(kn(n,r)){i.lineStart();for(var u=0;e>u;++u)i.point((n=t[u])[0],n[1]);return void i.lineEnd()}var s=new Rn(n,t,null,!0),l=new Rn(n,null,s,!1);s.o=l,o.push(s),a.push(l),s=new Rn(r,t,null,!1),l=new Rn(r,null,s,!0),s.o=l,o.push(s),a.push(l)}}),a.sort(e),On(o),On(a),o.length){for(var u=0,s=n,l=a.length;l>u;++u)a[u].e=s=!s;for(var c,f,p=o[0];;){for(var h=p,d=!0;h.v;)if((h=h.n)===p)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(var u=0,l=c.length;l>u;++u)i.point((f=c[u])[0],f[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d){c=h.p.z;for(var u=c.length-1;u>=0;--u)i.point((f=c[u])[0],f[1])}else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,c=h.z,d=!d}while(!h.v);i.lineEnd()}}}function On(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Rn(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Bn(t,e,n,r){return function(i,o){function a(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function u(t,e){var n=i(t,e);m.point(n[0],n[1])}function s(){y.point=u,m.lineStart()}function l(){y.point=a,m.lineEnd()}function c(t,e){g.push([t,e]);var n=i(t,e);x.point(n[0],n[1])}function f(){x.lineStart(),g=[]}function p(){c(g[0][0],g[0][1]),x.lineEnd();var t,e=x.clean(),n=b.buffer(),r=n.length;if(g.pop(),d.push(g),g=null,r)if(1&e){t=n[0];var i,r=t.length-1,a=-1;if(r>0){for(w||(o.polygonStart(),w=!0),o.lineStart();++a<r;)o.point((i=t[a])[0],i[1]);o.lineEnd()}}else r>1&&2&e&&n.push(n.pop().concat(n.shift())),h.push(n.filter(Pn))}var h,d,g,m=e(o),v=i.invert(r[0],r[1]),y={point:a,lineStart:s,lineEnd:l,polygonStart:function(){y.point=c,y.lineStart=f,y.lineEnd=p,h=[],d=[]},polygonEnd:function(){y.point=a,y.lineStart=s,y.lineEnd=l,h=ru.merge(h);var t=Fn(v,d);h.length?(w||(o.polygonStart(),w=!0),Dn(h,Ln,t,n,o)):t&&(w||(o.polygonStart(),w=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),w&&(o.polygonEnd(),w=!1),h=d=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}},b=jn(),x=e(b),w=!1;return y}}function Pn(t){return t.length>1}function jn(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:M,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function Ln(t,e){return((t=t.x)[0]<0?t[1]-ju-Du:ju-t[1])-((e=e.x)[0]<0?e[1]-ju-Du:ju-e[1])}function In(t){var e,n=0/0,r=0/0,i=0/0;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var u=o>0?Ru:-Ru,s=gu(o-n);gu(s-Ru)<Du?(t.point(n,r=(r+a)/2>0?ju:-ju),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),t.point(o,r),e=0):i!==u&&s>=Ru&&(gu(n-i)<Du&&(n-=i*Du),gu(o-u)<Du&&(o-=u*Du),r=qn(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),e=0),t.point(n=o,r=a),i=u},lineEnd:function(){t.lineEnd(),n=r=0/0},clean:function(){return 2-e}}}function qn(t,e,n,r){var i,o,a=Math.sin(t-n);return gu(a)>Du?Math.atan((Math.sin(e)*(o=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(e))*Math.sin(t))/(i*o*a)):(e+r)/2}function zn(t,e,n,r){var i;if(null==t)i=n*ju,r.point(-Ru,i),r.point(0,i),r.point(Ru,i),r.point(Ru,0),r.point(Ru,-i),r.point(0,-i),r.point(-Ru,-i),r.point(-Ru,0),r.point(-Ru,i);else if(gu(t[0]-e[0])>Du){var o=t[0]<e[0]?Ru:-Ru;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}function Fn(t,e){var n=t[0],r=t[1],i=[Math.sin(n),-Math.cos(n),0],o=0,a=0;xs.reset();for(var u=0,s=e.length;s>u;++u){var l=e[u],c=l.length;if(c)for(var f=l[0],p=f[0],h=f[1]/2+Ru/4,d=Math.sin(h),g=Math.cos(h),m=1;;){m===c&&(m=0),t=l[m];var v=t[0],y=t[1]/2+Ru/4,b=Math.sin(y),x=Math.cos(y),w=v-p,M=w>=0?1:-1,k=M*w,E=k>Ru,S=d*b;if(xs.add(Math.atan2(S*M*Math.sin(k),g*x+S*Math.cos(k))),o+=E?w+M*Bu:w,E^p>=n^v>=n){var _=yn(mn(f),mn(t));wn(_);var C=yn(i,_);wn(C);var N=(E^w>=0?-1:1)*ne(C[2]);(r>N||r===N&&(_[0]||_[1]))&&(a+=E^w>=0?1:-1)}if(!m++)break;p=v,d=b,g=x,f=t}}return(-Du>o||Du>o&&0>xs)^1&a}function Hn(t){function e(t,e){return Math.cos(t)*Math.cos(e)>o}function n(t){var n,o,s,l,c;return{lineStart:function(){l=s=!1,c=1},point:function(f,p){var h,d=[f,p],g=e(f,p),m=a?g?0:i(f,p):g?i(f+(0>f?Ru:-Ru),p):0;if(!n&&(l=s=g)&&t.lineStart(),g!==s&&(h=r(n,d),(kn(n,h)||kn(d,h))&&(d[0]+=Du,d[1]+=Du,g=e(d[0],d[1]))),g!==s)c=0,g?(t.lineStart(),h=r(d,n),t.point(h[0],h[1])):(h=r(n,d),t.point(h[0],h[1]),t.lineEnd()),n=h;else if(u&&n&&a^g){var v;m&o||!(v=r(d,n,!0))||(c=0,a?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!g||n&&kn(n,d)||t.point(d[0],d[1]),n=d,s=g,o=m},lineEnd:function(){s&&t.lineEnd(),n=null},clean:function(){return c|(l&&s)<<1}}}function r(t,e,n){var r=mn(t),i=mn(e),a=[1,0,0],u=yn(r,i),s=vn(u,u),l=u[0],c=s-l*l;if(!c)return!n&&t;var f=o*s/c,p=-o*l/c,h=yn(a,u),d=xn(a,f),g=xn(u,p);bn(d,g);var m=h,v=vn(d,m),y=vn(m,m),b=v*v-y*(vn(d,d)-1);if(!(0>b)){var x=Math.sqrt(b),w=xn(m,(-v-x)/y);if(bn(w,d),w=Mn(w),!n)return w;var M,k=t[0],E=e[0],S=t[1],_=e[1];k>E&&(M=k,k=E,E=M);var C=E-k,N=gu(C-Ru)<Du,A=N||Du>C;if(!N&&S>_&&(M=S,S=_,_=M),A?N?S+_>0^w[1]<(gu(w[0]-k)<Du?S:_):S<=w[1]&&w[1]<=_:C>Ru^(k<=w[0]&&w[0]<=E)){var T=xn(m,(-v+x)/y);return bn(T,d),[w,Mn(T)]}}}function i(e,n){var r=a?t:Ru-t,i=0;return-r>e?i|=1:e>r&&(i|=2),-r>n?i|=4:n>r&&(i|=8),i}var o=Math.cos(t),a=o>0,u=gu(o)>Du,s=gr(t,6*Lu);return Bn(e,n,s,a?[0,-t]:[-Ru,t-Ru])}function Un(t,e,n,r){return function(i){var o,a=i.a,u=i.b,s=a.x,l=a.y,c=u.x,f=u.y,p=0,h=1,d=c-s,g=f-l;if(o=t-s,d||!(o>0)){if(o/=d,0>d){if(p>o)return;h>o&&(h=o)}else if(d>0){if(o>h)return;o>p&&(p=o)}if(o=n-s,d||!(0>o)){if(o/=d,0>d){if(o>h)return;o>p&&(p=o)}else if(d>0){if(p>o)return;h>o&&(h=o)}if(o=e-l,g||!(o>0)){if(o/=g,0>g){if(p>o)return;h>o&&(h=o)}else if(g>0){if(o>h)return;o>p&&(p=o)}if(o=r-l,g||!(0>o)){if(o/=g,0>g){if(o>h)return;o>p&&(p=o)}else if(g>0){if(p>o)return;h>o&&(h=o)}return p>0&&(i.a={x:s+p*d,y:l+p*g}),1>h&&(i.b={x:s+h*d,y:l+h*g}),i}}}}}}function Vn(t,e,n,r){function i(r,i){return gu(r[0]-t)<Du?i>0?0:3:gu(r[0]-n)<Du?i>0?2:1:gu(r[1]-e)<Du?i>0?1:0:i>0?3:2}function o(t,e){return a(t.x,e.x)}function a(t,e){var n=i(t,1),r=i(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(u){function s(t){for(var e=0,n=m.length,r=t[1],i=0;n>i;++i)for(var o,a=1,u=m[i],s=u.length,l=u[0];s>a;++a)o=u[a],l[1]<=r?o[1]>r&&te(l,o,t)>0&&++e:o[1]<=r&&te(l,o,t)<0&&--e,l=o;return 0!==e}function l(o,u,s,l){var c=0,f=0;if(null==o||(c=i(o,s))!==(f=i(u,s))||a(o,u)<0^s>0){do l.point(0===c||3===c?t:n,c>1?r:e);while((c=(c+s+4)%4)!==f)}else l.point(u[0],u[1])}function c(i,o){return i>=t&&n>=i&&o>=e&&r>=o}function f(t,e){c(t,e)&&u.point(t,e)}function p(){A.point=d,m&&m.push(v=[]),E=!0,k=!1,w=M=0/0}function h(){g&&(d(y,b),x&&k&&C.rejoin(),g.push(C.buffer())),A.point=f,k&&u.lineEnd()}function d(t,e){t=Math.max(-Ps,Math.min(Ps,t)),e=Math.max(-Ps,Math.min(Ps,e));var n=c(t,e);if(m&&v.push([t,e]),E)y=t,b=e,x=n,E=!1,n&&(u.lineStart(),u.point(t,e));else if(n&&k)u.point(t,e);else{var r={a:{x:w,y:M},b:{x:t,y:e}};N(r)?(k||(u.lineStart(),u.point(r.a.x,r.a.y)),u.point(r.b.x,r.b.y),n||u.lineEnd(),S=!1):n&&(u.lineStart(),u.point(t,e),S=!1)}w=t,M=e,k=n}var g,m,v,y,b,x,w,M,k,E,S,_=u,C=jn(),N=Un(t,e,n,r),A={point:f,lineStart:p,lineEnd:h,polygonStart:function(){u=C,g=[],m=[],S=!0},polygonEnd:function(){u=_,g=ru.merge(g);var e=s([t,r]),n=S&&e,i=g.length;(n||i)&&(u.polygonStart(),n&&(u.lineStart(),l(null,null,1,u),u.lineEnd()),i&&Dn(g,o,e,l,u),u.polygonEnd()),g=m=v=null}};return A}}function $n(t){var e=0,n=Ru/3,r=ur(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Ru/180,n=t[1]*Ru/180):[e/Ru*180,n/Ru*180]},i}function Wn(t,e){function n(t,e){var n=Math.sqrt(o-2*i*Math.sin(e))/i;return[n*Math.sin(t*=i),a-n*Math.cos(t)]}var r=Math.sin(t),i=(r+Math.sin(e))/2,o=1+r*(2*i-r),a=Math.sqrt(o)/i;return n.invert=function(t,e){var n=a-e;return[Math.atan2(t,n)/i,ne((o-(t*t+n*n)*i*i)/(2*i))]},n}function Jn(){function t(t,e){Ls+=i*t-r*e,r=t,i=e}var e,n,r,i;Hs.point=function(o,a){Hs.point=t,e=r=o,n=i=a},Hs.lineEnd=function(){t(e,n)}}function Yn(t,e){Is>t&&(Is=t),t>zs&&(zs=t),qs>e&&(qs=e),e>Fs&&(Fs=e)}function Xn(){function t(t,e){a.push("M",t,",",e,o)}function e(t,e){a.push("M",t,",",e),u.point=n}function n(t,e){a.push("L",t,",",e)}function r(){u.point=t}function i(){a.push("Z")}var o=Kn(4.5),a=[],u={point:t,lineStart:function(){u.point=e},lineEnd:r,polygonStart:function(){u.lineEnd=i},polygonEnd:function(){u.lineEnd=r,u.point=t},pointRadius:function(t){return o=Kn(t),u},result:function(){if(a.length){var t=a.join("");return a=[],t}}};return u}function Kn(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"
}function Zn(t,e){Es+=t,Ss+=e,++_s}function Gn(){function t(t,r){var i=t-e,o=r-n,a=Math.sqrt(i*i+o*o);Cs+=a*(e+t)/2,Ns+=a*(n+r)/2,As+=a,Zn(e=t,n=r)}var e,n;Vs.point=function(r,i){Vs.point=t,Zn(e=r,n=i)}}function Qn(){Vs.point=Zn}function tr(){function t(t,e){var n=t-r,o=e-i,a=Math.sqrt(n*n+o*o);Cs+=a*(r+t)/2,Ns+=a*(i+e)/2,As+=a,a=i*t-r*e,Ts+=a*(r+t),Ds+=a*(i+e),Os+=3*a,Zn(r=t,i=e)}var e,n,r,i;Vs.point=function(o,a){Vs.point=t,Zn(e=r=o,n=i=a)},Vs.lineEnd=function(){t(e,n)}}function er(t){function e(e,n){t.moveTo(e+a,n),t.arc(e,n,a,0,Bu)}function n(e,n){t.moveTo(e,n),u.point=r}function r(e,n){t.lineTo(e,n)}function i(){u.point=e}function o(){t.closePath()}var a=4.5,u={point:e,lineStart:function(){u.point=n},lineEnd:i,polygonStart:function(){u.lineEnd=o},polygonEnd:function(){u.lineEnd=i,u.point=e},pointRadius:function(t){return a=t,u},result:M};return u}function nr(t){function e(t){return(u?r:n)(t)}function n(e){return or(e,function(n,r){n=t(n,r),e.point(n[0],n[1])})}function r(e){function n(n,r){n=t(n,r),e.point(n[0],n[1])}function r(){b=0/0,E.point=o,e.lineStart()}function o(n,r){var o=mn([n,r]),a=t(n,r);i(b,x,y,w,M,k,b=a[0],x=a[1],y=n,w=o[0],M=o[1],k=o[2],u,e),e.point(b,x)}function a(){E.point=n,e.lineEnd()}function s(){r(),E.point=l,E.lineEnd=c}function l(t,e){o(f=t,p=e),h=b,d=x,g=w,m=M,v=k,E.point=o}function c(){i(b,x,y,w,M,k,h,d,f,g,m,v,u,e),E.lineEnd=a,a()}var f,p,h,d,g,m,v,y,b,x,w,M,k,E={point:n,lineStart:r,lineEnd:a,polygonStart:function(){e.polygonStart(),E.lineStart=s},polygonEnd:function(){e.polygonEnd(),E.lineStart=r}};return E}function i(e,n,r,u,s,l,c,f,p,h,d,g,m,v){var y=c-e,b=f-n,x=y*y+b*b;if(x>4*o&&m--){var w=u+h,M=s+d,k=l+g,E=Math.sqrt(w*w+M*M+k*k),S=Math.asin(k/=E),_=gu(gu(k)-1)<Du||gu(r-p)<Du?(r+p)/2:Math.atan2(M,w),C=t(_,S),N=C[0],A=C[1],T=N-e,D=A-n,O=b*T-y*D;(O*O/x>o||gu((y*T+b*D)/x-.5)>.3||a>u*h+s*d+l*g)&&(i(e,n,r,u,s,l,N,A,_,w/=E,M/=E,k,m,v),v.point(N,A),i(N,A,_,w,M,k,c,f,p,h,d,g,m,v))}}var o=.5,a=Math.cos(30*Lu),u=16;return e.precision=function(t){return arguments.length?(u=(o=t*t)>0&&16,e):Math.sqrt(o)},e}function rr(t){var e=nr(function(e,n){return t([e*Iu,n*Iu])});return function(t){return sr(e(t))}}function ir(t){this.stream=t}function or(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function ar(t){return ur(function(){return t})()}function ur(t){function e(t){return t=u(t[0]*Lu,t[1]*Lu),[t[0]*p+s,l-t[1]*p]}function n(t){return t=u.invert((t[0]-s)/p,(l-t[1])/p),t&&[t[0]*Iu,t[1]*Iu]}function r(){u=An(a=fr(v,y,x),o);var t=o(g,m);return s=h-t[0]*p,l=d+t[1]*p,i()}function i(){return c&&(c.valid=!1,c=null),e}var o,a,u,s,l,c,f=nr(function(t,e){return t=o(t,e),[t[0]*p+s,l-t[1]*p]}),p=150,h=480,d=250,g=0,m=0,v=0,y=0,x=0,w=Bs,M=b,k=null,E=null;return e.stream=function(t){return c&&(c.valid=!1),c=sr(w(a,f(M(t)))),c.valid=!0,c},e.clipAngle=function(t){return arguments.length?(w=null==t?(k=t,Bs):Hn((k=+t)*Lu),i()):k},e.clipExtent=function(t){return arguments.length?(E=t,M=t?Vn(t[0][0],t[0][1],t[1][0],t[1][1]):b,i()):E},e.scale=function(t){return arguments.length?(p=+t,r()):p},e.translate=function(t){return arguments.length?(h=+t[0],d=+t[1],r()):[h,d]},e.center=function(t){return arguments.length?(g=t[0]%360*Lu,m=t[1]%360*Lu,r()):[g*Iu,m*Iu]},e.rotate=function(t){return arguments.length?(v=t[0]%360*Lu,y=t[1]%360*Lu,x=t.length>2?t[2]%360*Lu:0,r()):[v*Iu,y*Iu,x*Iu]},ru.rebind(e,f,"precision"),function(){return o=t.apply(this,arguments),e.invert=o.invert&&n,r()}}function sr(t){return or(t,function(e,n){t.point(e*Lu,n*Lu)})}function lr(t,e){return[t,e]}function cr(t,e){return[t>Ru?t-Bu:-Ru>t?t+Bu:t,e]}function fr(t,e,n){return t?e||n?An(hr(t),dr(e,n)):hr(t):e||n?dr(e,n):cr}function pr(t){return function(e,n){return e+=t,[e>Ru?e-Bu:-Ru>e?e+Bu:e,n]}}function hr(t){var e=pr(t);return e.invert=pr(-t),e}function dr(t,e){function n(t,e){var n=Math.cos(e),u=Math.cos(t)*n,s=Math.sin(t)*n,l=Math.sin(e),c=l*r+u*i;return[Math.atan2(s*o-c*a,u*r-l*i),ne(c*o+s*a)]}var r=Math.cos(t),i=Math.sin(t),o=Math.cos(e),a=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),u=Math.cos(t)*n,s=Math.sin(t)*n,l=Math.sin(e),c=l*o-s*a;return[Math.atan2(s*o+l*a,u*r+c*i),ne(c*r-u*i)]},n}function gr(t,e){var n=Math.cos(t),r=Math.sin(t);return function(i,o,a,u){var s=a*e;null!=i?(i=mr(n,i),o=mr(n,o),(a>0?o>i:i>o)&&(i+=a*Bu)):(i=t+a*Bu,o=t-.5*s);for(var l,c=i;a>0?c>o:o>c;c-=s)u.point((l=Mn([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],l[1])}}function mr(t,e){var n=mn(e);n[0]-=t,wn(n);var r=ee(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Du)%(2*Math.PI)}function vr(t,e,n){var r=ru.range(t,e-Du,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function yr(t,e,n){var r=ru.range(t,e-Du,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function br(t){return t.source}function xr(t){return t.target}function wr(t,e,n,r){var i=Math.cos(e),o=Math.sin(e),a=Math.cos(r),u=Math.sin(r),s=i*Math.cos(t),l=i*Math.sin(t),c=a*Math.cos(n),f=a*Math.sin(n),p=2*Math.asin(Math.sqrt(ae(r-e)+i*a*ae(n-t))),h=1/Math.sin(p),d=p?function(t){var e=Math.sin(t*=p)*h,n=Math.sin(p-t)*h,r=n*s+e*c,i=n*l+e*f,a=n*o+e*u;return[Math.atan2(i,r)*Iu,Math.atan2(a,Math.sqrt(r*r+i*i))*Iu]}:function(){return[t*Iu,e*Iu]};return d.distance=p,d}function Mr(){function t(t,i){var o=Math.sin(i*=Lu),a=Math.cos(i),u=gu((t*=Lu)-e),s=Math.cos(u);$s+=Math.atan2(Math.sqrt((u=a*Math.sin(u))*u+(u=r*o-n*a*s)*u),n*o+r*a*s),e=t,n=o,r=a}var e,n,r;Ws.point=function(i,o){e=i*Lu,n=Math.sin(o*=Lu),r=Math.cos(o),Ws.point=t},Ws.lineEnd=function(){Ws.point=Ws.lineEnd=M}}function kr(t,e){function n(e,n){var r=Math.cos(e),i=Math.cos(n),o=t(r*i);return[o*i*Math.sin(e),o*Math.sin(n)]}return n.invert=function(t,n){var r=Math.sqrt(t*t+n*n),i=e(r),o=Math.sin(i),a=Math.cos(i);return[Math.atan2(t*o,r*a),Math.asin(r&&n*o/r)]},n}function Er(t,e){function n(t,e){a>0?-ju+Du>e&&(e=-ju+Du):e>ju-Du&&(e=ju-Du);var n=a/Math.pow(i(e),o);return[n*Math.sin(o*t),a-n*Math.cos(o*t)]}var r=Math.cos(t),i=function(t){return Math.tan(Ru/4+t/2)},o=t===e?Math.sin(t):Math.log(r/Math.cos(e))/Math.log(i(e)/i(t)),a=r*Math.pow(i(t),o)/o;return o?(n.invert=function(t,e){var n=a-e,r=Q(o)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/o,2*Math.atan(Math.pow(a/r,1/o))-ju]},n):_r}function Sr(t,e){function n(t,e){var n=o-e;return[n*Math.sin(i*t),o-n*Math.cos(i*t)]}var r=Math.cos(t),i=t===e?Math.sin(t):(r-Math.cos(e))/(e-t),o=r/i+t;return gu(i)<Du?lr:(n.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/i,o-Q(i)*Math.sqrt(t*t+n*n)]},n)}function _r(t,e){return[t,Math.log(Math.tan(Ru/4+e/2))]}function Cr(t){var e,n=ar(t),r=n.scale,i=n.translate,o=n.clipExtent;return n.scale=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var a=o.apply(n,arguments);if(a===n){if(e=null==t){var u=Ru*r(),s=i();o([[s[0]-u,s[1]-u],[s[0]+u,s[1]+u]])}}else e&&(a=null);return a},n.clipExtent(null)}function Nr(t,e){return[Math.log(Math.tan(Ru/4+e/2)),-t]}function Ar(t){return t[0]}function Tr(t){return t[1]}function Dr(t){for(var e=t.length,n=[0,1],r=2,i=2;e>i;i++){for(;r>1&&te(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function Or(t,e){return t[0]-e[0]||t[1]-e[1]}function Rr(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function Br(t,e,n,r){var i=t[0],o=n[0],a=e[0]-i,u=r[0]-o,s=t[1],l=n[1],c=e[1]-s,f=r[1]-l,p=(u*(s-l)-f*(i-o))/(f*a-u*c);return[i+p*a,s+p*c]}function Pr(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}function jr(){ri(this),this.edge=this.site=this.circle=null}function Lr(t){var e=il.pop()||new jr;return e.site=t,e}function Ir(t){Yr(t),el.remove(t),il.push(t),ri(t)}function qr(t){var e=t.circle,n=e.x,r=e.cy,i={x:n,y:r},o=t.P,a=t.N,u=[t];Ir(t);for(var s=o;s.circle&&gu(n-s.circle.x)<Du&&gu(r-s.circle.cy)<Du;)o=s.P,u.unshift(s),Ir(s),s=o;u.unshift(s),Yr(s);for(var l=a;l.circle&&gu(n-l.circle.x)<Du&&gu(r-l.circle.cy)<Du;)a=l.N,u.push(l),Ir(l),l=a;u.push(l),Yr(l);var c,f=u.length;for(c=1;f>c;++c)l=u[c],s=u[c-1],ti(l.edge,s.site,l.site,i);s=u[0],l=u[f-1],l.edge=Gr(s.site,l.site,null,i),Jr(s),Jr(l)}function zr(t){for(var e,n,r,i,o=t.x,a=t.y,u=el._;u;)if(r=Fr(u,a)-o,r>Du)u=u.L;else{if(i=o-Hr(u,a),!(i>Du)){r>-Du?(e=u.P,n=u):i>-Du?(e=u,n=u.N):e=n=u;break}if(!u.R){e=u;break}u=u.R}var s=Lr(t);if(el.insert(e,s),e||n){if(e===n)return Yr(e),n=Lr(e.site),el.insert(s,n),s.edge=n.edge=Gr(e.site,s.site),Jr(e),void Jr(n);if(!n)return void(s.edge=Gr(e.site,s.site));Yr(e),Yr(n);var l=e.site,c=l.x,f=l.y,p=t.x-c,h=t.y-f,d=n.site,g=d.x-c,m=d.y-f,v=2*(p*m-h*g),y=p*p+h*h,b=g*g+m*m,x={x:(m*y-h*b)/v+c,y:(p*b-g*y)/v+f};ti(n.edge,l,d,x),s.edge=Gr(l,t,null,x),n.edge=Gr(t,d,null,x),Jr(e),Jr(n)}}function Fr(t,e){var n=t.site,r=n.x,i=n.y,o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;n=a.site;var u=n.x,s=n.y,l=s-e;if(!l)return u;var c=u-r,f=1/o-1/l,p=c/l;return f?(-p+Math.sqrt(p*p-2*f*(c*c/(-2*l)-s+l/2+i-o/2)))/f+r:(r+u)/2}function Hr(t,e){var n=t.N;if(n)return Fr(n,e);var r=t.site;return r.y===e?r.x:1/0}function Ur(t){this.site=t,this.edges=[]}function Vr(t){for(var e,n,r,i,o,a,u,s,l,c,f=t[0][0],p=t[1][0],h=t[0][1],d=t[1][1],g=tl,m=g.length;m--;)if(o=g[m],o&&o.prepare())for(u=o.edges,s=u.length,a=0;s>a;)c=u[a].end(),r=c.x,i=c.y,l=u[++a%s].start(),e=l.x,n=l.y,(gu(r-e)>Du||gu(i-n)>Du)&&(u.splice(a,0,new ei(Qr(o.site,c,gu(r-f)<Du&&d-i>Du?{x:f,y:gu(e-f)<Du?n:d}:gu(i-d)<Du&&p-r>Du?{x:gu(n-d)<Du?e:p,y:d}:gu(r-p)<Du&&i-h>Du?{x:p,y:gu(e-p)<Du?n:h}:gu(i-h)<Du&&r-f>Du?{x:gu(n-h)<Du?e:f,y:h}:null),o.site,null)),++s)}function $r(t,e){return e.angle-t.angle}function Wr(){ri(this),this.x=this.y=this.arc=this.site=this.cy=null}function Jr(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i.x,u=i.y,s=r.x-a,l=r.y-u,c=o.x-a,f=o.y-u,p=2*(s*f-l*c);if(!(p>=-Ou)){var h=s*s+l*l,d=c*c+f*f,g=(f*h-l*d)/p,m=(s*d-c*h)/p,f=m+u,v=ol.pop()||new Wr;v.arc=t,v.site=i,v.x=g+a,v.y=f+Math.sqrt(g*g+m*m),v.cy=f,t.circle=v;for(var y=null,b=rl._;b;)if(v.y<b.y||v.y===b.y&&v.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}rl.insert(y,v),y||(nl=v)}}}}function Yr(t){var e=t.circle;e&&(e.P||(nl=e.N),rl.remove(e),ol.push(e),ri(e),t.circle=null)}function Xr(t){for(var e,n=Qs,r=Un(t[0][0],t[0][1],t[1][0],t[1][1]),i=n.length;i--;)e=n[i],(!Kr(e,t)||!r(e)||gu(e.a.x-e.b.x)<Du&&gu(e.a.y-e.b.y)<Du)&&(e.a=e.b=null,n.splice(i,1))}function Kr(t,e){var n=t.b;if(n)return!0;var r,i,o=t.a,a=e[0][0],u=e[1][0],s=e[0][1],l=e[1][1],c=t.l,f=t.r,p=c.x,h=c.y,d=f.x,g=f.y,m=(p+d)/2,v=(h+g)/2;if(g===h){if(a>m||m>=u)return;if(p>d){if(o){if(o.y>=l)return}else o={x:m,y:s};n={x:m,y:l}}else{if(o){if(o.y<s)return}else o={x:m,y:l};n={x:m,y:s}}}else if(r=(p-d)/(g-h),i=v-r*m,-1>r||r>1)if(p>d){if(o){if(o.y>=l)return}else o={x:(s-i)/r,y:s};n={x:(l-i)/r,y:l}}else{if(o){if(o.y<s)return}else o={x:(l-i)/r,y:l};n={x:(s-i)/r,y:s}}else if(g>h){if(o){if(o.x>=u)return}else o={x:a,y:r*a+i};n={x:u,y:r*u+i}}else{if(o){if(o.x<a)return}else o={x:u,y:r*u+i};n={x:a,y:r*a+i}}return t.a=o,t.b=n,!0}function Zr(t,e){this.l=t,this.r=e,this.a=this.b=null}function Gr(t,e,n,r){var i=new Zr(t,e);return Qs.push(i),n&&ti(i,t,e,n),r&&ti(i,e,t,r),tl[t.i].edges.push(new ei(i,t,e)),tl[e.i].edges.push(new ei(i,e,t)),i}function Qr(t,e,n){var r=new Zr(t,null);return r.a=e,r.b=n,Qs.push(r),r}function ti(t,e,n,r){t.a||t.b?t.l===n?t.b=r:t.a=r:(t.a=r,t.l=e,t.r=n)}function ei(t,e,n){var r=t.a,i=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function ni(){this._=null}function ri(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function ii(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function oi(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function ai(t){for(;t.L;)t=t.L;return t}function ui(t,e){var n,r,i,o=t.sort(si).pop();for(Qs=[],tl=new Array(t.length),el=new ni,rl=new ni;;)if(i=nl,o&&(!i||o.y<i.y||o.y===i.y&&o.x<i.x))(o.x!==n||o.y!==r)&&(tl[o.i]=new Ur(o),zr(o),n=o.x,r=o.y),o=t.pop();else{if(!i)break;qr(i.arc)}e&&(Xr(e),Vr(e));var a={cells:tl,edges:Qs};return el=rl=Qs=tl=null,a}function si(t,e){return e.y-t.y||e.x-t.x}function li(t,e,n){return(t.x-n.x)*(e.y-t.y)-(t.x-e.x)*(n.y-t.y)}function ci(t){return t.x}function fi(t){return t.y}function pi(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function hi(t,e,n,r,i,o){if(!t(e,n,r,i,o)){var a=.5*(n+i),u=.5*(r+o),s=e.nodes;s[0]&&hi(t,s[0],n,r,a,u),s[1]&&hi(t,s[1],a,r,i,u),s[2]&&hi(t,s[2],n,u,a,o),s[3]&&hi(t,s[3],a,u,i,o)}}function di(t,e,n,r,i,o,a){var u,s=1/0;return function l(t,c,f,p,h){if(!(c>o||f>a||r>p||i>h)){if(d=t.point){var d,g=e-t.x,m=n-t.y,v=g*g+m*m;if(s>v){var y=Math.sqrt(s=v);r=e-y,i=n-y,o=e+y,a=n+y,u=d}}for(var b=t.nodes,x=.5*(c+p),w=.5*(f+h),M=e>=x,k=n>=w,E=k<<1|M,S=E+4;S>E;++E)if(t=b[3&E])switch(3&E){case 0:l(t,c,f,x,w);break;case 1:l(t,x,f,p,w);break;case 2:l(t,c,w,x,h);break;case 3:l(t,x,w,p,h)}}}(t,r,i,o,a),u}function gi(t,e){t=ru.rgb(t),e=ru.rgb(e);var n=t.r,r=t.g,i=t.b,o=e.r-n,a=e.g-r,u=e.b-i;return function(t){return"#"+we(Math.round(n+o*t))+we(Math.round(r+a*t))+we(Math.round(i+u*t))}}function mi(t,e){var n,r={},i={};for(n in t)n in e?r[n]=bi(t[n],e[n]):i[n]=t[n];for(n in e)n in t||(i[n]=e[n]);return function(t){for(n in r)i[n]=r[n](t);return i}}function vi(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function yi(t,e){var n,r,i,o=ul.lastIndex=sl.lastIndex=0,a=-1,u=[],s=[];for(t+="",e+="";(n=ul.exec(t))&&(r=sl.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(n=n[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,s.push({i:a,x:vi(n,r)})),o=sl.lastIndex;return o<e.length&&(i=e.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?s[0]?(e=s[0].x,function(t){return e(t)+""}):function(){return e}:(e=s.length,function(t){for(var n,r=0;e>r;++r)u[(n=s[r]).i]=n.x(t);return u.join("")})}function bi(t,e){for(var n,r=ru.interpolators.length;--r>=0&&!(n=ru.interpolators[r](t,e)););return n}function xi(t,e){var n,r=[],i=[],o=t.length,a=e.length,u=Math.min(t.length,e.length);for(n=0;u>n;++n)r.push(bi(t[n],e[n]));for(;o>n;++n)i[n]=t[n];for(;a>n;++n)i[n]=e[n];return function(t){for(n=0;u>n;++n)i[n]=r[n](t);return i}}function wi(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}function Mi(t){return function(e){return 1-t(1-e)}}function ki(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function Ei(t){return t*t}function Si(t){return t*t*t}function _i(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(.5>t?n:3*(t-e)+n-.75)}function Ci(t){return function(e){return Math.pow(e,t)}}function Ni(t){return 1-Math.cos(t*ju)}function Ai(t){return Math.pow(2,10*(t-1))}function Ti(t){return 1-Math.sqrt(1-t*t)}function Di(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/Bu*Math.asin(1/t):(t=1,n=e/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-n)*Bu/e)}}function Oi(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function Ri(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Bi(t,e){t=ru.hcl(t),e=ru.hcl(e);var n=t.h,r=t.c,i=t.l,o=e.h-n,a=e.c-r,u=e.l-i;return isNaN(a)&&(a=0,r=isNaN(r)?e.c:r),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:-180>o&&(o+=360),function(t){return fe(n+o*t,r+a*t,i+u*t)+""}}function Pi(t,e){t=ru.hsl(t),e=ru.hsl(e);var n=t.h,r=t.s,i=t.l,o=e.h-n,a=e.s-r,u=e.l-i;return isNaN(a)&&(a=0,r=isNaN(r)?e.s:r),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:-180>o&&(o+=360),function(t){return le(n+o*t,r+a*t,i+u*t)+""}}function ji(t,e){t=ru.lab(t),e=ru.lab(e);var n=t.l,r=t.a,i=t.b,o=e.l-n,a=e.a-r,u=e.b-i;return function(t){return he(n+o*t,r+a*t,i+u*t)+""}}function Li(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function Ii(t){var e=[t.a,t.b],n=[t.c,t.d],r=zi(e),i=qi(e,n),o=zi(Fi(n,e,-i))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*Iu,this.translate=[t.e,t.f],this.scale=[r,o],this.skew=o?Math.atan2(i,o)*Iu:0}function qi(t,e){return t[0]*e[0]+t[1]*e[1]}function zi(t){var e=Math.sqrt(qi(t,t));return e&&(t[0]/=e,t[1]/=e),e}function Fi(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}function Hi(t,e){var n,r=[],i=[],o=ru.transform(t),a=ru.transform(e),u=o.translate,s=a.translate,l=o.rotate,c=a.rotate,f=o.skew,p=a.skew,h=o.scale,d=a.scale;return u[0]!=s[0]||u[1]!=s[1]?(r.push("translate(",null,",",null,")"),i.push({i:1,x:vi(u[0],s[0])},{i:3,x:vi(u[1],s[1])})):r.push(s[0]||s[1]?"translate("+s+")":""),l!=c?(l-c>180?c+=360:c-l>180&&(l+=360),i.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:vi(l,c)})):c&&r.push(r.pop()+"rotate("+c+")"),f!=p?i.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:vi(f,p)}):p&&r.push(r.pop()+"skewX("+p+")"),h[0]!=d[0]||h[1]!=d[1]?(n=r.push(r.pop()+"scale(",null,",",null,")"),i.push({i:n-4,x:vi(h[0],d[0])},{i:n-2,x:vi(h[1],d[1])})):(1!=d[0]||1!=d[1])&&r.push(r.pop()+"scale("+d+")"),n=i.length,function(t){for(var e,o=-1;++o<n;)r[(e=i[o]).i]=e.x(t);return r.join("")}}function Ui(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function Vi(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function $i(t){for(var e=t.source,n=t.target,r=Ji(e,n),i=[e];e!==r;)e=e.parent,i.push(e);for(var o=i.length;n!==r;)i.splice(o,0,n),n=n.parent;return i}function Wi(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function Ji(t,e){if(t===e)return t;for(var n=Wi(t),r=Wi(e),i=n.pop(),o=r.pop(),a=null;i===o;)a=i,i=n.pop(),o=r.pop();return a}function Yi(t){t.fixed|=2}function Xi(t){t.fixed&=-7}function Ki(t){t.fixed|=4,t.px=t.x,t.py=t.y}function Zi(t){t.fixed&=-5}function Gi(t,e,n){var r=0,i=0;if(t.charge=0,!t.leaf)for(var o,a=t.nodes,u=a.length,s=-1;++s<u;)o=a[s],null!=o&&(Gi(o,e,n),t.charge+=o.charge,r+=o.charge*o.cx,i+=o.charge*o.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var l=e*n[t.point.index];t.charge+=t.pointCharge=l,r+=l*t.point.x,i+=l*t.point.y}t.cx=r/t.charge,t.cy=i/t.charge}function Qi(t,e){return ru.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=oo,t}function to(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(i=t.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function eo(t,e){for(var n=[t],r=[];null!=(t=n.pop());)if(r.push(t),(o=t.children)&&(i=o.length))for(var i,o,a=-1;++a<i;)n.push(o[a]);for(;null!=(t=r.pop());)e(t)}function no(t){return t.children}function ro(t){return t.value}function io(t,e){return e.value-t.value}function oo(t){return ru.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function ao(t){return t.x}function uo(t){return t.y}function so(t,e,n){t.y0=e,t.y=n}function lo(t){return ru.range(t.length)}function co(t){for(var e=-1,n=t[0].length,r=[];++e<n;)r[e]=0;return r}function fo(t){for(var e,n=1,r=0,i=t[0][1],o=t.length;o>n;++n)(e=t[n][1])>i&&(r=n,i=e);return r}function po(t){return t.reduce(ho,0)}function ho(t,e){return t+e[1]}function go(t,e){return mo(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function mo(t,e){for(var n=-1,r=+t[0],i=(t[1]-r)/e,o=[];++n<=e;)o[n]=i*n+r;return o}function vo(t){return[ru.min(t),ru.max(t)]}function yo(t,e){return t.value-e.value}function bo(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function xo(t,e){t._pack_next=e,e._pack_prev=t}function wo(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return.999*i*i>n*n+r*r}function Mo(t){function e(t){c=Math.min(t.x-t.r,c),f=Math.max(t.x+t.r,f),p=Math.min(t.y-t.r,p),h=Math.max(t.y+t.r,h)}if((n=t.children)&&(l=n.length)){var n,r,i,o,a,u,s,l,c=1/0,f=-1/0,p=1/0,h=-1/0;if(n.forEach(ko),r=n[0],r.x=-r.r,r.y=0,e(r),l>1&&(i=n[1],i.x=i.r,i.y=0,e(i),l>2))for(o=n[2],_o(r,i,o),e(o),bo(r,o),r._pack_prev=o,bo(o,i),i=r._pack_next,a=3;l>a;a++){_o(r,i,o=n[a]);var d=0,g=1,m=1;for(u=i._pack_next;u!==i;u=u._pack_next,g++)if(wo(u,o)){d=1;break}if(1==d)for(s=r._pack_prev;s!==u._pack_prev&&!wo(s,o);s=s._pack_prev,m++);d?(m>g||g==m&&i.r<r.r?xo(r,i=u):xo(r=s,i),a--):(bo(r,o),i=o,e(o))}var v=(c+f)/2,y=(p+h)/2,b=0;for(a=0;l>a;a++)o=n[a],o.x-=v,o.y-=y,b=Math.max(b,o.r+Math.sqrt(o.x*o.x+o.y*o.y));t.r=b,n.forEach(Eo)}}function ko(t){t._pack_next=t._pack_prev=t}function Eo(t){delete t._pack_next,delete t._pack_prev}function So(t,e,n,r){var i=t.children;if(t.x=e+=r*t.x,t.y=n+=r*t.y,t.r*=r,i)for(var o=-1,a=i.length;++o<a;)So(i[o],e,n,r)}function _o(t,e,n){var r=t.r+n.r,i=e.x-t.x,o=e.y-t.y;if(r&&(i||o)){var a=e.r+n.r,u=i*i+o*o;a*=a,r*=r;var s=.5+(r-a)/(2*u),l=Math.sqrt(Math.max(0,2*a*(r+u)-(r-=u)*r-a*a))/(2*u);n.x=t.x+s*i+l*o,n.y=t.y+s*o-l*i}else n.x=t.x+r,n.y=t.y}function Co(t,e){return t.parent==e.parent?1:2}function No(t){var e=t.children;return e.length?e[0]:t.t}function Ao(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function To(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function Do(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)e=i[o],e.z+=n,e.m+=n,n+=e.s+(r+=e.c)}function Oo(t,e,n){return t.a.parent===e.parent?t.a:n}function Ro(t){return 1+ru.max(t,function(t){return t.y})}function Bo(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function Po(t){var e=t.children;return e&&e.length?Po(e[0]):t}function jo(t){var e,n=t.children;return n&&(e=n.length)?jo(n[e-1]):t}function Lo(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Io(t,e){var n=t.x+e[3],r=t.y+e[0],i=t.dx-e[1]-e[3],o=t.dy-e[0]-e[2];return 0>i&&(n+=i/2,i=0),0>o&&(r+=o/2,o=0),{x:n,y:r,dx:i,dy:o}}function qo(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function zo(t){return t.rangeExtent?t.rangeExtent():qo(t.range())}function Fo(t,e,n,r){var i=n(t[0],t[1]),o=r(e[0],e[1]);return function(t){return o(i(t))}}function Ho(t,e){var n,r=0,i=t.length-1,o=t[r],a=t[i];return o>a&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t}function Uo(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:bl}function Vo(t,e,n,r){var i=[],o=[],a=0,u=Math.min(t.length,e.length)-1;for(t[u]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<=u;)i.push(n(t[a-1],t[a])),o.push(r(e[a-1],e[a]));return function(e){var n=ru.bisect(t,e,1,u)-1;return o[n](i[n](e))}}function $o(t,e,n,r){function i(){var i=Math.min(t.length,e.length)>2?Vo:Fo,s=r?Vi:Ui;return a=i(t,e,s,n),u=i(e,t,s,bi),o}function o(t){return a(t)}var a,u;return o.invert=function(t){return u(t)},o.domain=function(e){return arguments.length?(t=e.map(Number),i()):t},o.range=function(t){return arguments.length?(e=t,i()):e},o.rangeRound=function(t){return o.range(t).interpolate(Li)},o.clamp=function(t){return arguments.length?(r=t,i()):r},o.interpolate=function(t){return arguments.length?(n=t,i()):n},o.ticks=function(e){return Xo(t,e)},o.tickFormat=function(e,n){return Ko(t,e,n)},o.nice=function(e){return Jo(t,e),i()},o.copy=function(){return $o(t,e,n,r)},i()}function Wo(t,e){return ru.rebind(t,e,"range","rangeRound","interpolate","clamp")}function Jo(t,e){return Ho(t,Uo(Yo(t,e)[2]))}function Yo(t,e){null==e&&(e=10);var n=qo(t),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),o=e/r*i;return.15>=o?i*=10:.35>=o?i*=5:.75>=o&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function Xo(t,e){return ru.range.apply(ru,Yo(t,e))}function Ko(t,e,n){var r=Yo(t,e);if(n){var i=us.exec(n);if(i.shift(),"s"===i[8]){var o=ru.formatPrefix(Math.max(gu(r[0]),gu(r[1])));return i[7]||(i[7]="."+Zo(o.scale(r[2]))),i[8]="f",n=ru.format(i.join("")),function(t){return n(o.scale(t))+o.symbol}}i[7]||(i[7]="."+Go(i[8],r)),n=i.join("")}else n=",."+Zo(r[2])+"f";return ru.format(n)}function Zo(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function Go(t,e){var n=Zo(e[2]);return t in xl?Math.abs(n-Zo(Math.max(gu(e[0]),gu(e[1]))))+ +("e"!==t):n-2*("%"===t)}function Qo(t,e,n,r){function i(t){return(n?Math.log(0>t?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function o(t){return n?Math.pow(e,t):-Math.pow(e,-t)}function a(e){return t(i(e))}return a.invert=function(e){return o(t.invert(e))},a.domain=function(e){return arguments.length?(n=e[0]>=0,t.domain((r=e.map(Number)).map(i)),a):r},a.base=function(n){return arguments.length?(e=+n,t.domain(r.map(i)),a):e},a.nice=function(){var e=Ho(r.map(i),n?Math:Ml);return t.domain(e),r=e.map(o),a},a.ticks=function(){var t=qo(r),a=[],u=t[0],s=t[1],l=Math.floor(i(u)),c=Math.ceil(i(s)),f=e%1?2:e;if(isFinite(c-l)){if(n){for(;c>l;l++)for(var p=1;f>p;p++)a.push(o(l)*p);a.push(o(l))}else for(a.push(o(l));l++<c;)for(var p=f-1;p>0;p--)a.push(o(l)*p);for(l=0;a[l]<u;l++);for(c=a.length;a[c-1]>s;c--);a=a.slice(l,c)}return a},a.tickFormat=function(t,e){if(!arguments.length)return wl;arguments.length<2?e=wl:"function"!=typeof e&&(e=ru.format(e));var r,u=Math.max(.1,t/a.ticks().length),s=n?(r=1e-12,Math.ceil):(r=-1e-12,Math.floor);return function(t){return t/o(s(i(t)+r))<=u?e(t):""}},a.copy=function(){return Qo(t.copy(),e,n,r)},Wo(a,t)}function ta(t,e,n){function r(e){return t(i(e))}var i=ea(e),o=ea(1/e);return r.invert=function(e){return o(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain((n=e.map(Number)).map(i)),r):n},r.ticks=function(t){return Xo(n,t)},r.tickFormat=function(t,e){return Ko(n,t,e)},r.nice=function(t){return r.domain(Jo(n,t))},r.exponent=function(a){return arguments.length?(i=ea(e=a),o=ea(1/e),t.domain(n.map(i)),r):e},r.copy=function(){return ta(t.copy(),e,n)},Wo(r,t)}function ea(t){return function(e){return 0>e?-Math.pow(-e,t):Math.pow(e,t)}}function na(t,e){function n(n){return o[((i.get(n)||("range"===e.t?i.set(n,t.push(n)):0/0))-1)%o.length]}function r(e,n){return ru.range(t.length).map(function(t){return e+n*t})}var i,o,a;return n.domain=function(r){if(!arguments.length)return t;t=[],i=new c;for(var o,a=-1,u=r.length;++a<u;)i.has(o=r[a])||i.set(o,t.push(o));return n[e.t].apply(n,e.a)},n.range=function(t){return arguments.length?(o=t,a=0,e={t:"range",a:arguments},n):o},n.rangePoints=function(i,u){arguments.length<2&&(u=0);var s=i[0],l=i[1],c=t.length<2?(s=(s+l)/2,0):(l-s)/(t.length-1+u);return o=r(s+c*u/2,c),a=0,e={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(i,u){arguments.length<2&&(u=0);var s=i[0],l=i[1],c=t.length<2?(s=l=Math.round((s+l)/2),0):(l-s)/(t.length-1+u)|0;return o=r(s+Math.round(c*u/2+(l-s-(t.length-1+u)*c)/2),c),a=0,e={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(i,u,s){arguments.length<2&&(u=0),arguments.length<3&&(s=u);var l=i[1]<i[0],c=i[l-0],f=i[1-l],p=(f-c)/(t.length-u+2*s);return o=r(c+p*s,p),l&&o.reverse(),a=p*(1-u),e={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(i,u,s){arguments.length<2&&(u=0),arguments.length<3&&(s=u);var l=i[1]<i[0],c=i[l-0],f=i[1-l],p=Math.floor((f-c)/(t.length-u+2*s));return o=r(c+Math.round((f-c-(t.length-u)*p)/2),p),l&&o.reverse(),a=Math.round(p*(1-u)),e={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return a},n.rangeExtent=function(){return qo(e.a[0])},n.copy=function(){return na(t,e)},n.domain(t)}function ra(t,e){function n(){var n=0,r=e.length;for(u=[];++n<r;)u[n-1]=ru.quantile(t,n/r);return a}function a(t){return isNaN(t=+t)?void 0:e[ru.bisect(u,t)]}var u;return a.domain=function(e){return arguments.length?(t=e.map(i).filter(o).sort(r),n()):t},a.range=function(t){return arguments.length?(e=t,n()):e},a.quantiles=function(){return u},a.invertExtent=function(n){return n=e.indexOf(n),0>n?[0/0,0/0]:[n>0?u[n-1]:t[0],n<u.length?u[n]:t[t.length-1]]},a.copy=function(){return ra(t,e)},n()}function ia(t,e,n){function r(e){return n[Math.max(0,Math.min(a,Math.floor(o*(e-t))))]}function i(){return o=n.length/(e-t),a=n.length-1,r}var o,a;return r.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],i()):[t,e]},r.range=function(t){return arguments.length?(n=t,i()):n},r.invertExtent=function(e){return e=n.indexOf(e),e=0>e?0/0:e/o+t,[e,e+1/o]},r.copy=function(){return ia(t,e,n)},i()}function oa(t,e){function n(n){return n>=n?e[ru.bisect(t,n)]:void 0}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.invertExtent=function(n){return n=e.indexOf(n),[t[n-1],t[n]]},n.copy=function(){return oa(t,e)},n}function aa(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return Xo(t,e)},e.tickFormat=function(e,n){return Ko(t,e,n)},e.copy=function(){return aa(t)},e}function ua(){return 0}function sa(t){return t.innerRadius}function la(t){return t.outerRadius}function ca(t){return t.startAngle}function fa(t){return t.endAngle}function pa(t){return t&&t.padAngle}function ha(t,e,n,r){return(t-n)*e-(e-r)*t>0?0:1}function da(t,e,n,r,i){var o=t[0]-e[0],a=t[1]-e[1],u=(i?r:-r)/Math.sqrt(o*o+a*a),s=u*a,l=-u*o,c=t[0]+s,f=t[1]+l,p=e[0]+s,h=e[1]+l,d=(c+p)/2,g=(f+h)/2,m=p-c,v=h-f,y=m*m+v*v,b=n-r,x=c*h-p*f,w=(0>v?-1:1)*Math.sqrt(b*b*y-x*x),M=(x*v-m*w)/y,k=(-x*m-v*w)/y,E=(x*v+m*w)/y,S=(-x*m+v*w)/y,_=M-d,C=k-g,N=E-d,A=S-g;return _*_+C*C>N*N+A*A&&(M=E,k=S),[[M-s,k-l],[M*n/b,k*n/b]]}function ga(t){function e(e){function a(){l.push("M",o(t(c),u))}for(var s,l=[],c=[],f=-1,p=e.length,h=Ce(n),d=Ce(r);++f<p;)i.call(this,s=e[f],f)?c.push([+h.call(this,s,f),+d.call(this,s,f)]):c.length&&(a(),c=[]);return c.length&&a(),l.length?l.join(""):null}var n=Ar,r=Tr,i=Tn,o=ma,a=o.key,u=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e.defined=function(t){return arguments.length?(i=t,e):i},e.interpolate=function(t){return arguments.length?(a="function"==typeof t?o=t:(o=Nl.get(t)||ma).key,e):a},e.tension=function(t){return arguments.length?(u=t,e):u},e}function ma(t){return t.join("L")}function va(t){return ma(t)+"Z"}function ya(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r[0]+(r=t[e])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")}function ba(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("V",(r=t[e])[1],"H",r[0]);return i.join("")}function xa(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r=t[e])[0],"V",r[1]);return i.join("")}function wa(t,e){return t.length<4?ma(t):t[1]+Ea(t.slice(1,-1),Sa(t,e))}function Ma(t,e){return t.length<3?ma(t):t[0]+Ea((t.push(t[0]),t),Sa([t[t.length-2]].concat(t,[t[1]]),e))}function ka(t,e){return t.length<3?ma(t):t[0]+Ea(t,Sa(t,e))}function Ea(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return ma(t);var n=t.length!=e.length,r="",i=t[0],o=t[1],a=e[0],u=a,s=1;if(n&&(r+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],i=t[1],s=2),e.length>1){u=e[1],o=t[s],s++,r+="C"+(i[0]+a[0])+","+(i[1]+a[1])+","+(o[0]-u[0])+","+(o[1]-u[1])+","+o[0]+","+o[1];for(var l=2;l<e.length;l++,s++)o=t[s],u=e[l],r+="S"+(o[0]-u[0])+","+(o[1]-u[1])+","+o[0]+","+o[1]}if(n){var c=t[s];r+="Q"+(o[0]+2*u[0]/3)+","+(o[1]+2*u[1]/3)+","+c[0]+","+c[1]}return r}function Sa(t,e){for(var n,r=[],i=(1-e)/2,o=t[0],a=t[1],u=1,s=t.length;++u<s;)n=o,o=a,a=t[u],r.push([i*(a[0]-n[0]),i*(a[1]-n[1])]);return r}function _a(t){if(t.length<3)return ma(t);var e=1,n=t.length,r=t[0],i=r[0],o=r[1],a=[i,i,i,(r=t[1])[0]],u=[o,o,o,r[1]],s=[i,",",o,"L",Ta(Dl,a),",",Ta(Dl,u)];for(t.push(t[n-1]);++e<=n;)r=t[e],a.shift(),a.push(r[0]),u.shift(),u.push(r[1]),Da(s,a,u);return t.pop(),s.push("L",r),s.join("")}function Ca(t){if(t.length<4)return ma(t);for(var e,n=[],r=-1,i=t.length,o=[0],a=[0];++r<3;)e=t[r],o.push(e[0]),a.push(e[1]);for(n.push(Ta(Dl,o)+","+Ta(Dl,a)),--r;++r<i;)e=t[r],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),Da(n,o,a);return n.join("")}function Na(t){for(var e,n,r=-1,i=t.length,o=i+4,a=[],u=[];++r<4;)n=t[r%i],a.push(n[0]),u.push(n[1]);for(e=[Ta(Dl,a),",",Ta(Dl,u)],--r;++r<o;)n=t[r%i],a.shift(),a.push(n[0]),u.shift(),u.push(n[1]),Da(e,a,u);return e.join("")}function Aa(t,e){var n=t.length-1;if(n)for(var r,i,o=t[0][0],a=t[0][1],u=t[n][0]-o,s=t[n][1]-a,l=-1;++l<=n;)r=t[l],i=l/n,r[0]=e*r[0]+(1-e)*(o+i*u),r[1]=e*r[1]+(1-e)*(a+i*s);
return _a(t)}function Ta(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Da(t,e,n){t.push("C",Ta(Al,e),",",Ta(Al,n),",",Ta(Tl,e),",",Ta(Tl,n),",",Ta(Dl,e),",",Ta(Dl,n))}function Oa(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Ra(t){for(var e=0,n=t.length-1,r=[],i=t[0],o=t[1],a=r[0]=Oa(i,o);++e<n;)r[e]=(a+(a=Oa(i=o,o=t[e+1])))/2;return r[e]=a,r}function Ba(t){for(var e,n,r,i,o=[],a=Ra(t),u=-1,s=t.length-1;++u<s;)e=Oa(t[u],t[u+1]),gu(e)<Du?a[u]=a[u+1]=0:(n=a[u]/e,r=a[u+1]/e,i=n*n+r*r,i>9&&(i=3*e/Math.sqrt(i),a[u]=i*n,a[u+1]=i*r));for(u=-1;++u<=s;)i=(t[Math.min(s,u+1)][0]-t[Math.max(0,u-1)][0])/(6*(1+a[u]*a[u])),o.push([i||0,a[u]*i||0]);return o}function Pa(t){return t.length<3?ma(t):t[0]+Ea(t,Ba(t))}function ja(t){for(var e,n,r,i=-1,o=t.length;++i<o;)e=t[i],n=e[0],r=e[1]-ju,e[0]=n*Math.cos(r),e[1]=n*Math.sin(r);return t}function La(t){function e(e){function s(){g.push("M",u(t(v),f),c,l(t(m.reverse()),f),"Z")}for(var p,h,d,g=[],m=[],v=[],y=-1,b=e.length,x=Ce(n),w=Ce(i),M=n===r?function(){return h}:Ce(r),k=i===o?function(){return d}:Ce(o);++y<b;)a.call(this,p=e[y],y)?(m.push([h=+x.call(this,p,y),d=+w.call(this,p,y)]),v.push([+M.call(this,p,y),+k.call(this,p,y)])):m.length&&(s(),m=[],v=[]);return m.length&&s(),g.length?g.join(""):null}var n=Ar,r=Ar,i=0,o=Tr,a=Tn,u=ma,s=u.key,l=u,c="L",f=.7;return e.x=function(t){return arguments.length?(n=r=t,e):r},e.x0=function(t){return arguments.length?(n=t,e):n},e.x1=function(t){return arguments.length?(r=t,e):r},e.y=function(t){return arguments.length?(i=o=t,e):o},e.y0=function(t){return arguments.length?(i=t,e):i},e.y1=function(t){return arguments.length?(o=t,e):o},e.defined=function(t){return arguments.length?(a=t,e):a},e.interpolate=function(t){return arguments.length?(s="function"==typeof t?u=t:(u=Nl.get(t)||ma).key,l=u.reverse||u,c=u.closed?"M":"L",e):s},e.tension=function(t){return arguments.length?(f=t,e):f},e}function Ia(t){return t.radius}function qa(t){return[t.x,t.y]}function za(t){return function(){var e=t.apply(this,arguments),n=e[0],r=e[1]-ju;return[n*Math.cos(r),n*Math.sin(r)]}}function Fa(){return 64}function Ha(){return"circle"}function Ua(t){var e=Math.sqrt(t/Ru);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function Va(t){return function(){var e,n;(e=this[t])&&(n=e[e.active])&&(--e.count?delete e[e.active]:delete this[t],e.active+=.5,n.event&&n.event.interrupt.call(this,this.__data__,n.index))}}function $a(t,e,n){return xu(t,Il),t.namespace=e,t.id=n,t}function Wa(t,e,n,r){var i=t.id,o=t.namespace;return V(t,"function"==typeof n?function(t,a,u){t[o][i].tween.set(e,r(n.call(t,t.__data__,a,u)))}:(n=r(n),function(t){t[o][i].tween.set(e,n)}))}function Ja(t){return null==t&&(t=""),function(){this.textContent=t}}function Ya(t){return null==t?"__transition__":"__transition_"+t+"__"}function Xa(t,e,n,r,i){var o=t[n]||(t[n]={active:0,count:0}),a=o[r];if(!a){var u=i.time;a=o[r]={tween:new c,time:u,delay:i.delay,duration:i.duration,ease:i.ease,index:e},i=null,++o.count,ru.timer(function(i){function s(n){if(o.active>r)return c();var i=o[o.active];i&&(--o.count,delete o[o.active],i.event&&i.event.interrupt.call(t,t.__data__,i.index)),o.active=r,a.event&&a.event.start.call(t,t.__data__,e),a.tween.forEach(function(n,r){(r=r.call(t,t.__data__,e))&&g.push(r)}),p=a.ease,f=a.duration,ru.timer(function(){return d.c=l(n||1)?Tn:l,1},0,u)}function l(n){if(o.active!==r)return 1;for(var i=n/f,u=p(i),s=g.length;s>0;)g[--s].call(t,u);return i>=1?(a.event&&a.event.end.call(t,t.__data__,e),c()):void 0}function c(){return--o.count?delete o[r]:delete t[n],1}var f,p,h=a.delay,d=is,g=[];return d.t=h+u,i>=h?s(i-h):void(d.c=s)},0,u)}}function Ka(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate("+(isFinite(r)?r:n(t))+",0)"})}function Za(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate(0,"+(isFinite(r)?r:n(t))+")"})}function Ga(t){return t.toISOString()}function Qa(t,e,n){function r(e){return t(e)}function i(t,n){var r=t[1]-t[0],i=r/n,o=ru.bisect(Jl,i);return o==Jl.length?[e.year,Yo(t.map(function(t){return t/31536e6}),n)[2]]:o?e[i/Jl[o-1]<Jl[o]/i?o-1:o]:[Kl,Yo(t,n)[2]]}return r.invert=function(e){return tu(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain(e),r):t.domain().map(tu)},r.nice=function(t,e){function n(n){return!isNaN(n)&&!t.range(n,tu(+n+1),e).length}var o=r.domain(),a=qo(o),u=null==t?i(a,10):"number"==typeof t&&i(a,t);return u&&(t=u[0],e=u[1]),r.domain(Ho(o,e>1?{floor:function(e){for(;n(e=t.floor(e));)e=tu(e-1);return e},ceil:function(e){for(;n(e=t.ceil(e));)e=tu(+e+1);return e}}:t))},r.ticks=function(t,e){var n=qo(r.domain()),o=null==t?i(n,10):"number"==typeof t?i(n,t):!t.range&&[{range:t},e];return o&&(t=o[0],e=o[1]),t.range(n[0],tu(+n[1]+1),1>e?1:e)},r.tickFormat=function(){return n},r.copy=function(){return Qa(t.copy(),e,n)},Wo(r,t)}function tu(t){return new Date(t)}function eu(t){return JSON.parse(t.responseText)}function nu(t){var e=au.createRange();return e.selectNode(au.body),e.createContextualFragment(t.responseText)}var ru={version:"3.5.5"},iu=[].slice,ou=function(t){return iu.call(t)},au=this.document;if(au)try{ou(au.documentElement.childNodes)[0].nodeType}catch(uu){ou=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),au)try{au.createElement("DIV").style.setProperty("opacity",0,"")}catch(su){var lu=this.Element.prototype,cu=lu.setAttribute,fu=lu.setAttributeNS,pu=this.CSSStyleDeclaration.prototype,hu=pu.setProperty;lu.setAttribute=function(t,e){cu.call(this,t,e+"")},lu.setAttributeNS=function(t,e,n){fu.call(this,t,e,n+"")},pu.setProperty=function(t,e,n){hu.call(this,t,e+"",n)}}ru.ascending=r,ru.descending=function(t,e){return t>e?-1:e>t?1:e>=t?0:0/0},ru.min=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&n>r&&(n=r)}else{for(;++i<o;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e.call(t,t[i],i))&&n>r&&(n=r)}return n},ru.max=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&r>n&&(n=r)}else{for(;++i<o;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e.call(t,t[i],i))&&r>n&&(n=r)}return n},ru.extent=function(t,e){var n,r,i,o=-1,a=t.length;if(1===arguments.length){for(;++o<a;)if(null!=(r=t[o])&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=t[o])&&(n>r&&(n=r),r>i&&(i=r))}else{for(;++o<a;)if(null!=(r=e.call(t,t[o],o))&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=e.call(t,t[o],o))&&(n>r&&(n=r),r>i&&(i=r))}return[n,i]},ru.sum=function(t,e){var n,r=0,i=t.length,a=-1;if(1===arguments.length)for(;++a<i;)o(n=+t[a])&&(r+=n);else for(;++a<i;)o(n=+e.call(t,t[a],a))&&(r+=n);return r},ru.mean=function(t,e){var n,r=0,a=t.length,u=-1,s=a;if(1===arguments.length)for(;++u<a;)o(n=i(t[u]))?r+=n:--s;else for(;++u<a;)o(n=i(e.call(t,t[u],u)))?r+=n:--s;return s?r/s:void 0},ru.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=+t[r-1],o=n-r;return o?i+o*(t[r]-i):i},ru.median=function(t,e){var n,a=[],u=t.length,s=-1;if(1===arguments.length)for(;++s<u;)o(n=i(t[s]))&&a.push(n);else for(;++s<u;)o(n=i(e.call(t,t[s],s)))&&a.push(n);return a.length?ru.quantile(a.sort(r),.5):void 0},ru.variance=function(t,e){var n,r,a=t.length,u=0,s=0,l=-1,c=0;if(1===arguments.length)for(;++l<a;)o(n=i(t[l]))&&(r=n-u,u+=r/++c,s+=r*(n-u));else for(;++l<a;)o(n=i(e.call(t,t[l],l)))&&(r=n-u,u+=r/++c,s+=r*(n-u));return c>1?s/(c-1):void 0},ru.deviation=function(){var t=ru.variance.apply(this,arguments);return t?Math.sqrt(t):t};var du=a(r);ru.bisectLeft=du.left,ru.bisect=ru.bisectRight=du.right,ru.bisector=function(t){return a(1===t.length?function(e,n){return r(t(e),n)}:t)},ru.shuffle=function(t,e,n){(o=arguments.length)<3&&(n=t.length,2>o&&(e=0));for(var r,i,o=n-e;o;)i=Math.random()*o--|0,r=t[o+e],t[o+e]=t[i+e],t[i+e]=r;return t},ru.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},ru.pairs=function(t){for(var e,n=0,r=t.length-1,i=t[0],o=new Array(0>r?0:r);r>n;)o[n]=[e=i,i=t[++n]];return o},ru.zip=function(){if(!(r=arguments.length))return[];for(var t=-1,e=ru.min(arguments,u),n=new Array(e);++t<e;)for(var r,i=-1,o=n[t]=new Array(r);++i<r;)o[i]=arguments[i][t];return n},ru.transpose=function(t){return ru.zip.apply(ru,t)},ru.keys=function(t){var e=[];for(var n in t)e.push(n);return e},ru.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},ru.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},ru.merge=function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(r=t[i],e=r.length;--e>=0;)n[--a]=r[e];return n};var gu=Math.abs;ru.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n===1/0)throw new Error("infinite range");var r,i=[],o=s(gu(n)),a=-1;if(t*=o,e*=o,n*=o,0>n)for(;(r=t+n*++a)>e;)i.push(r/o);else for(;(r=t+n*++a)<e;)i.push(r/o);return i},ru.map=function(t,e){var n=new c;if(t instanceof c)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(1===arguments.length)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e.call(t,r=t[i],i),r)}else for(var a in t)n.set(a,t[a]);return n};var mu="__proto__",vu="\x00";l(c,{has:h,get:function(t){return this._[f(t)]},set:function(t,e){return this._[f(t)]=e},remove:d,keys:g,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:p(e),value:this._[e]});return t},size:m,empty:v,forEach:function(t){for(var e in this._)t.call(this,p(e),this._[e])}}),ru.nest=function(){function t(e,a,u){if(u>=o.length)return r?r.call(i,a):n?a.sort(n):a;for(var s,l,f,p,h=-1,d=a.length,g=o[u++],m=new c;++h<d;)(p=m.get(s=g(l=a[h])))?p.push(l):m.set(s,[l]);return e?(l=e(),f=function(n,r){l.set(n,t(e,r,u))}):(l={},f=function(n,r){l[n]=t(e,r,u)}),m.forEach(f),l}function e(t,n){if(n>=o.length)return t;var r=[],i=a[n++];return t.forEach(function(t,i){r.push({key:t,values:e(i,n)})}),i?r.sort(function(t,e){return i(t.key,e.key)}):r}var n,r,i={},o=[],a=[];return i.map=function(e,n){return t(n,e,0)},i.entries=function(n){return e(t(ru.map,n,0),0)},i.key=function(t){return o.push(t),i},i.sortKeys=function(t){return a[o.length-1]=t,i},i.sortValues=function(t){return n=t,i},i.rollup=function(t){return r=t,i},i},ru.set=function(t){var e=new y;if(t)for(var n=0,r=t.length;r>n;++n)e.add(t[n]);return e},l(y,{has:h,add:function(t){return this._[f(t+="")]=!0,t},remove:d,values:g,size:m,empty:v,forEach:function(t){for(var e in this._)t.call(this,p(e))}}),ru.behavior={},ru.rebind=function(t,e){for(var n,r=1,i=arguments.length;++r<i;)t[n=arguments[r]]=x(t,e,e[n]);return t};var yu=["webkit","ms","moz","Moz","o","O"];ru.dispatch=function(){for(var t=new k,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=E(t);return t},k.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},ru.event=null,ru.requote=function(t){return t.replace(bu,"\\$&")};var bu=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,xu={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]},wu=function(t,e){return e.querySelector(t)},Mu=function(t,e){return e.querySelectorAll(t)},ku=function(t,e){var n=t.matches||t[w(t,"matchesSelector")];return(ku=function(t,e){return n.call(t,e)})(t,e)};"function"==typeof Sizzle&&(wu=function(t,e){return Sizzle(t,e)[0]||null},Mu=Sizzle,ku=Sizzle.matchesSelector),ru.selection=function(){return ru.select(au.documentElement)};var Eu=ru.selection.prototype=[];Eu.select=function(t){var e,n,r,i,o=[];t=A(t);for(var a=-1,u=this.length;++a<u;){o.push(e=[]),e.parentNode=(r=this[a]).parentNode;for(var s=-1,l=r.length;++s<l;)(i=r[s])?(e.push(n=t.call(i,i.__data__,s,a)),n&&"__data__"in i&&(n.__data__=i.__data__)):e.push(null)}return N(o)},Eu.selectAll=function(t){var e,n,r=[];t=T(t);for(var i=-1,o=this.length;++i<o;)for(var a=this[i],u=-1,s=a.length;++u<s;)(n=a[u])&&(r.push(e=ou(t.call(n,n.__data__,u,i))),e.parentNode=n);return N(r)};var Su={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};ru.ns={prefix:Su,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&(n=t.slice(0,e),t=t.slice(e+1)),Su.hasOwnProperty(n)?{space:Su[n],local:t}:t}},Eu.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return t=ru.ns.qualify(t),t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(D(e,t[e]));return this}return this.each(D(t,e))},Eu.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),r=(t=B(t)).length,i=-1;if(e=n.classList){for(;++i<r;)if(!e.contains(t[i]))return!1}else for(e=n.getAttribute("class");++i<r;)if(!R(t[i]).test(e))return!1;return!0}for(e in t)this.each(P(e,t[e]));return this}return this.each(P(t,e))},Eu.style=function(t,e,r){var i=arguments.length;if(3>i){if("string"!=typeof t){2>i&&(e="");for(r in t)this.each(L(r,t[r],e));return this}if(2>i){var o=this.node();return n(o).getComputedStyle(o,null).getPropertyValue(t)}r=""}return this.each(L(t,e,r))},Eu.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(I(e,t[e]));return this}return this.each(I(t,e))},Eu.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Eu.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Eu.append=function(t){return t=q(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},Eu.insert=function(t,e){return t=q(t),e=A(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},Eu.remove=function(){return this.each(z)},Eu.data=function(t,e){function n(t,n){var r,i,o,a=t.length,f=n.length,p=Math.min(a,f),h=new Array(f),d=new Array(f),g=new Array(a);if(e){var m,v=new c,y=new Array(a);for(r=-1;++r<a;)v.has(m=e.call(i=t[r],i.__data__,r))?g[r]=i:v.set(m,i),y[r]=m;for(r=-1;++r<f;)(i=v.get(m=e.call(n,o=n[r],r)))?i!==!0&&(h[r]=i,i.__data__=o):d[r]=F(o),v.set(m,!0);for(r=-1;++r<a;)v.get(y[r])!==!0&&(g[r]=t[r])}else{for(r=-1;++r<p;)i=t[r],o=n[r],i?(i.__data__=o,h[r]=i):d[r]=F(o);for(;f>r;++r)d[r]=F(n[r]);for(;a>r;++r)g[r]=t[r]}d.update=h,d.parentNode=h.parentNode=g.parentNode=t.parentNode,u.push(d),s.push(h),l.push(g)}var r,i,o=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(r=this[0]).length);++o<a;)(i=r[o])&&(t[o]=i.__data__);return t}var u=$([]),s=N([]),l=N([]);if("function"==typeof t)for(;++o<a;)n(r=this[o],t.call(r,r.parentNode.__data__,o));else for(;++o<a;)n(r=this[o],t);return s.enter=function(){return u},s.exit=function(){return l},s},Eu.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},Eu.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=H(t));for(var o=0,a=this.length;a>o;o++){i.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var u=0,s=n.length;s>u;u++)(r=n[u])&&t.call(r,r.__data__,u,o)&&e.push(r)}return N(i)},Eu.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,r=this[t],i=r.length-1,o=r[i];--i>=0;)(n=r[i])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},Eu.sort=function(t){t=U.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},Eu.each=function(t){return V(this,function(e,n,r){t.call(e,e.__data__,n,r)})},Eu.call=function(t){var e=ou(arguments);return t.apply(e[0]=this,e),this},Eu.empty=function(){return!this.node()},Eu.node=function(){for(var t=0,e=this.length;e>t;t++)for(var n=this[t],r=0,i=n.length;i>r;r++){var o=n[r];if(o)return o}return null},Eu.size=function(){var t=0;return V(this,function(){++t}),t};var _u=[];ru.selection.enter=$,ru.selection.enter.prototype=_u,_u.append=Eu.append,_u.empty=Eu.empty,_u.node=Eu.node,_u.call=Eu.call,_u.size=Eu.size,_u.select=function(t){for(var e,n,r,i,o,a=[],u=-1,s=this.length;++u<s;){r=(i=this[u]).update,a.push(e=[]),e.parentNode=i.parentNode;for(var l=-1,c=i.length;++l<c;)(o=i[l])?(e.push(r[l]=n=t.call(i.parentNode,o.__data__,l,u)),n.__data__=o.__data__):e.push(null)}return N(a)},_u.insert=function(t,e){return arguments.length<2&&(e=W(this)),Eu.insert.call(this,t,e)},ru.select=function(e){var n;return"string"==typeof e?(n=[wu(e,au)],n.parentNode=au.documentElement):(n=[e],n.parentNode=t(e)),N([n])},ru.selectAll=function(t){var e;return"string"==typeof t?(e=ou(Mu(t,au)),e.parentNode=au.documentElement):(e=t,e.parentNode=null),N([e])},Eu.on=function(t,e,n){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(e=!1);for(n in t)this.each(J(n,t[n],e));return this}if(2>r)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(J(t,e,n))};var Cu=ru.map({mouseenter:"mouseover",mouseleave:"mouseout"});au&&Cu.forEach(function(t){"on"+t in au&&Cu.remove(t)});var Nu,Au=0;ru.mouse=function(t){return Z(t,_())};var Tu=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;ru.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=_().changedTouches),e)for(var r,i=0,o=e.length;o>i;++i)if((r=e[i]).identifier===n)return Z(t,r)},ru.behavior.drag=function(){function t(){this.on("mousedown.drag",o).on("touchstart.drag",a)}function e(t,e,n,o,a){return function(){function u(){var t,n,r=e(p,g);r&&(t=r[0]-b[0],n=r[1]-b[1],d|=t|n,b=r,h({type:"drag",x:r[0]+l[0],y:r[1]+l[1],dx:t,dy:n}))}function s(){e(p,g)&&(v.on(o+m,null).on(a+m,null),y(d&&ru.event.target===f),h({type:"dragend"}))}var l,c=this,f=ru.event.target,p=c.parentNode,h=r.of(c,arguments),d=0,g=t(),m=".drag"+(null==g?"":"-"+g),v=ru.select(n(f)).on(o+m,u).on(a+m,s),y=K(f),b=e(p,g);i?(l=i.apply(c,arguments),l=[l.x-b[0],l.y-b[1]]):l=[0,0],h({type:"dragstart"})}}var r=C(t,"drag","dragstart","dragend"),i=null,o=e(M,ru.mouse,n,"mousemove","mouseup"),a=e(G,ru.touch,b,"touchmove","touchend");return t.origin=function(e){return arguments.length?(i=e,t):i},ru.rebind(t,r,"on")},ru.touches=function(t,e){return arguments.length<2&&(e=_().touches),e?ou(e).map(function(e){var n=Z(t,e);return n.identifier=e.identifier,n}):[]};var Du=1e-6,Ou=Du*Du,Ru=Math.PI,Bu=2*Ru,Pu=Bu-Du,ju=Ru/2,Lu=Ru/180,Iu=180/Ru,qu=Math.SQRT2,zu=2,Fu=4;ru.interpolateZoom=function(t,e){function n(t){var e=t*y;if(v){var n=ie(g),a=o/(zu*p)*(n*oe(qu*e+g)-re(g));return[r+a*l,i+a*c,o*n/ie(qu*e+g)]}return[r+t*l,i+t*c,o*Math.exp(qu*e)]}var r=t[0],i=t[1],o=t[2],a=e[0],u=e[1],s=e[2],l=a-r,c=u-i,f=l*l+c*c,p=Math.sqrt(f),h=(s*s-o*o+Fu*f)/(2*o*zu*p),d=(s*s-o*o-Fu*f)/(2*s*zu*p),g=Math.log(Math.sqrt(h*h+1)-h),m=Math.log(Math.sqrt(d*d+1)-d),v=m-g,y=(v||Math.log(s/o))/qu;return n.duration=1e3*y,n},ru.behavior.zoom=function(){function t(t){t.on(D,f).on(Uu+".zoom",h).on("dblclick.zoom",d).on(B,p)}function e(t){return[(t[0]-E.x)/E.k,(t[1]-E.y)/E.k]}function r(t){return[t[0]*E.k+E.x,t[1]*E.k+E.y]}function i(t){E.k=Math.max(N[0],Math.min(N[1],t))}function o(t,e){e=r(e),E.x+=t[0]-e[0],E.y+=t[1]-e[1]}function a(e,n,r,a){e.__chart__={x:E.x,y:E.y,k:E.k},i(Math.pow(2,a)),o(m=n,r),e=ru.select(e),A>0&&(e=e.transition().duration(A)),e.call(t.event)}function u(){w&&w.domain(x.range().map(function(t){return(t-E.x)/E.k}).map(x.invert)),k&&k.domain(M.range().map(function(t){return(t-E.y)/E.k}).map(M.invert))}function s(t){T++||t({type:"zoomstart"})}function l(t){u(),t({type:"zoom",scale:E.k,translate:[E.x,E.y]})}function c(t){--T||t({type:"zoomend"}),m=null}function f(){function t(){f=1,o(ru.mouse(i),h),l(u)}function r(){p.on(O,null).on(R,null),d(f&&ru.event.target===a),c(u)}var i=this,a=ru.event.target,u=P.of(i,arguments),f=0,p=ru.select(n(i)).on(O,t).on(R,r),h=e(ru.mouse(i)),d=K(i);Ll.call(i),s(u)}function p(){function t(){var t=ru.touches(d);return h=E.k,t.forEach(function(t){t.identifier in m&&(m[t.identifier]=e(t))}),t}function n(){var e=ru.event.target;ru.select(e).on(x,r).on(w,u),M.push(e);for(var n=ru.event.changedTouches,i=0,o=n.length;o>i;++i)m[n[i].identifier]=null;var s=t(),l=Date.now();if(1===s.length){if(500>l-b){var c=s[0];a(d,c,m[c.identifier],Math.floor(Math.log(E.k)/Math.LN2)+1),S()}b=l}else if(s.length>1){var c=s[0],f=s[1],p=c[0]-f[0],h=c[1]-f[1];v=p*p+h*h}}function r(){var t,e,n,r,a=ru.touches(d);Ll.call(d);for(var u=0,s=a.length;s>u;++u,r=null)if(n=a[u],r=m[n.identifier]){if(e)break;t=n,e=r}if(r){var c=(c=n[0]-t[0])*c+(c=n[1]-t[1])*c,f=v&&Math.sqrt(c/v);t=[(t[0]+n[0])/2,(t[1]+n[1])/2],e=[(e[0]+r[0])/2,(e[1]+r[1])/2],i(f*h)}b=null,o(t,e),l(g)}function u(){if(ru.event.touches.length){for(var e=ru.event.changedTouches,n=0,r=e.length;r>n;++n)delete m[e[n].identifier];for(var i in m)return void t()}ru.selectAll(M).on(y,null),k.on(D,f).on(B,p),_(),c(g)}var h,d=this,g=P.of(d,arguments),m={},v=0,y=".zoom-"+ru.event.changedTouches[0].identifier,x="touchmove"+y,w="touchend"+y,M=[],k=ru.select(d),_=K(d);n(),s(g),k.on(D,null).on(B,n)}function h(){var t=P.of(this,arguments);y?clearTimeout(y):(g=e(m=v||ru.mouse(this)),Ll.call(this),s(t)),y=setTimeout(function(){y=null,c(t)},50),S(),i(Math.pow(2,.002*Hu())*E.k),o(m,g),l(t)}function d(){var t=ru.mouse(this),n=Math.log(E.k)/Math.LN2;a(this,t,e(t),ru.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}var g,m,v,y,b,x,w,M,k,E={x:0,y:0,k:1},_=[960,500],N=Vu,A=250,T=0,D="mousedown.zoom",O="mousemove.zoom",R="mouseup.zoom",B="touchstart.zoom",P=C(t,"zoomstart","zoom","zoomend");return Uu||(Uu="onwheel"in au?(Hu=function(){return-ru.event.deltaY*(ru.event.deltaMode?120:1)},"wheel"):"onmousewheel"in au?(Hu=function(){return ru.event.wheelDelta},"mousewheel"):(Hu=function(){return-ru.event.detail},"MozMousePixelScroll")),t.event=function(t){t.each(function(){var t=P.of(this,arguments),e=E;Pl?ru.select(this).transition().each("start.zoom",function(){E=this.__chart__||{x:0,y:0,k:1},s(t)}).tween("zoom:zoom",function(){var n=_[0],r=_[1],i=m?m[0]:n/2,o=m?m[1]:r/2,a=ru.interpolateZoom([(i-E.x)/E.k,(o-E.y)/E.k,n/E.k],[(i-e.x)/e.k,(o-e.y)/e.k,n/e.k]);return function(e){var r=a(e),u=n/r[2];this.__chart__=E={x:i-r[0]*u,y:o-r[1]*u,k:u},l(t)}}).each("interrupt.zoom",function(){c(t)}).each("end.zoom",function(){c(t)}):(this.__chart__=E,s(t),l(t),c(t))})},t.translate=function(e){return arguments.length?(E={x:+e[0],y:+e[1],k:E.k},u(),t):[E.x,E.y]},t.scale=function(e){return arguments.length?(E={x:E.x,y:E.y,k:+e},u(),t):E.k},t.scaleExtent=function(e){return arguments.length?(N=null==e?Vu:[+e[0],+e[1]],t):N},t.center=function(e){return arguments.length?(v=e&&[+e[0],+e[1]],t):v},t.size=function(e){return arguments.length?(_=e&&[+e[0],+e[1]],t):_},t.duration=function(e){return arguments.length?(A=+e,t):A},t.x=function(e){return arguments.length?(w=e,x=e.copy(),E={x:0,y:0,k:1},t):w},t.y=function(e){return arguments.length?(k=e,M=e.copy(),E={x:0,y:0,k:1},t):k},ru.rebind(t,P,"on")};var Hu,Uu,Vu=[0,1/0];ru.color=ue,ue.prototype.toString=function(){return this.rgb()+""},ru.hsl=se;var $u=se.prototype=new ue;$u.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new se(this.h,this.s,this.l/t)},$u.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new se(this.h,this.s,t*this.l)},$u.rgb=function(){return le(this.h,this.s,this.l)},ru.hcl=ce;var Wu=ce.prototype=new ue;Wu.brighter=function(t){return new ce(this.h,this.c,Math.min(100,this.l+Ju*(arguments.length?t:1)))},Wu.darker=function(t){return new ce(this.h,this.c,Math.max(0,this.l-Ju*(arguments.length?t:1)))},Wu.rgb=function(){return fe(this.h,this.c,this.l).rgb()},ru.lab=pe;var Ju=18,Yu=.95047,Xu=1,Ku=1.08883,Zu=pe.prototype=new ue;Zu.brighter=function(t){return new pe(Math.min(100,this.l+Ju*(arguments.length?t:1)),this.a,this.b)},Zu.darker=function(t){return new pe(Math.max(0,this.l-Ju*(arguments.length?t:1)),this.a,this.b)},Zu.rgb=function(){return he(this.l,this.a,this.b)},ru.rgb=ye;var Gu=ye.prototype=new ue;Gu.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b,i=30;return e||n||r?(e&&i>e&&(e=i),n&&i>n&&(n=i),r&&i>r&&(r=i),new ye(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,r/t))):new ye(i,i,i)},Gu.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new ye(t*this.r,t*this.g,t*this.b)},Gu.hsl=function(){return ke(this.r,this.g,this.b)},Gu.toString=function(){return"#"+we(this.r)+we(this.g)+we(this.b)};var Qu=ru.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Qu.forEach(function(t,e){Qu.set(t,be(e))}),ru.functor=Ce,ru.xhr=Ne(b),ru.dsv=function(t,e){function n(t,n,o){arguments.length<3&&(o=n,n=null);var a=Ae(t,e,null==n?r:i(n),o);return a.row=function(t){return arguments.length?a.response(null==(n=t)?r:i(t)):n},a}function r(t){return n.parse(t.responseText)}function i(t){return function(e){return n.parse(e.responseText,t)}}function o(e){return e.map(a).join(t)}function a(t){return u.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var u=new RegExp('["'+t+"\n]"),s=t.charCodeAt(0);return n.parse=function(t,e){var r;return n.parseRows(t,function(t,n){if(r)return r(t,n-1);var i=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");r=e?function(t,n){return e(i(t),n)}:i})},n.parseRows=function(t,e){function n(){if(c>=l)return a;if(i)return i=!1,o;var e=c;if(34===t.charCodeAt(e)){for(var n=e;n++<l;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}c=n+2;var r=t.charCodeAt(n+1);return 13===r?(i=!0,10===t.charCodeAt(n+2)&&++c):10===r&&(i=!0),t.slice(e+1,n).replace(/""/g,'"')}for(;l>c;){var r=t.charCodeAt(c++),u=1;if(10===r)i=!0;else if(13===r)i=!0,10===t.charCodeAt(c)&&(++c,++u);else if(r!==s)continue;return t.slice(e,c-u)}return t.slice(e)}for(var r,i,o={},a={},u=[],l=t.length,c=0,f=0;(r=n())!==a;){for(var p=[];r!==o&&r!==a;)p.push(r),r=n();e&&null==(p=e(p,f++))||u.push(p)}return u},n.format=function(e){if(Array.isArray(e[0]))return n.formatRows(e);var r=new y,i=[];return e.forEach(function(t){for(var e in t)r.has(e)||i.push(r.add(e))}),[i.map(a).join(t)].concat(e.map(function(e){return i.map(function(t){return a(e[t])}).join(t)})).join("\n")},n.formatRows=function(t){return t.map(o).join("\n")},n},ru.csv=ru.dsv(",","text/csv"),ru.tsv=ru.dsv("	","text/tab-separated-values");var ts,es,ns,rs,is,os=this[w(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};ru.timer=function(t,e,n){var r=arguments.length;2>r&&(e=0),3>r&&(n=Date.now());var i=n+e,o={c:t,t:i,f:!1,n:null};es?es.n=o:ts=o,es=o,ns||(rs=clearTimeout(rs),ns=1,os(Oe))},ru.timer.flush=function(){Re(),Be()},ru.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var as=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(je);ru.formatPrefix=function(t,e){var n=0;return t&&(0>t&&(t*=-1),e&&(t=ru.round(t,Pe(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),as[8+n/3]};var us=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ss=ru.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=ru.round(t,Pe(t,e))).toFixed(Math.max(0,Math.min(20,Pe(t*(1+1e-15),e))))}}),ls=ru.time={},cs=Date;qe.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){fs.setUTCDate.apply(this._,arguments)},setDay:function(){fs.setUTCDay.apply(this._,arguments)},setFullYear:function(){fs.setUTCFullYear.apply(this._,arguments)},setHours:function(){fs.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){fs.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){fs.setUTCMinutes.apply(this._,arguments)},setMonth:function(){fs.setUTCMonth.apply(this._,arguments)},setSeconds:function(){fs.setUTCSeconds.apply(this._,arguments)},setTime:function(){fs.setTime.apply(this._,arguments)}};var fs=Date.prototype;ls.year=ze(function(t){return t=ls.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),ls.years=ls.year.range,ls.years.utc=ls.year.utc.range,ls.day=ze(function(t){var e=new cs(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),ls.days=ls.day.range,ls.days.utc=ls.day.utc.range,ls.dayOfYear=function(t){var e=ls.year(t);
return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=ls[t]=ze(function(t){return(t=ls.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=ls.year(t).getDay();return Math.floor((ls.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});ls[t+"s"]=n.range,ls[t+"s"].utc=n.utc.range,ls[t+"OfYear"]=function(t){var n=ls.year(t).getDay();return Math.floor((ls.dayOfYear(t)+(n+e)%7)/7)}}),ls.week=ls.sunday,ls.weeks=ls.sunday.range,ls.weeks.utc=ls.sunday.utc.range,ls.weekOfYear=ls.sundayOfYear;var ps={"-":"",_:" ",0:"0"},hs=/^\s*\d+/,ds=/^%/;ru.locale=function(t){return{numberFormat:Le(t),timeFormat:He(t)}};var gs=ru.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});ru.format=gs.numberFormat,ru.geo={},cn.prototype={s:0,t:0,add:function(t){fn(t,this.t,ms),fn(ms.s,this.s,this),this.s?this.t+=ms.t:this.s=ms.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ms=new cn;ru.geo.stream=function(t,e){t&&vs.hasOwnProperty(t.type)?vs[t.type](t,e):pn(t,e)};var vs={Feature:function(t,e){pn(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)pn(n[r].geometry,e)}},ys={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){hn(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)hn(n[r],e,0)},Polygon:function(t,e){dn(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)dn(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)pn(n[r],e)}};ru.geo.area=function(t){return bs=0,ru.geo.stream(t,ws),bs};var bs,xs=new cn,ws={sphere:function(){bs+=4*Ru},point:M,lineStart:M,lineEnd:M,polygonStart:function(){xs.reset(),ws.lineStart=gn},polygonEnd:function(){var t=2*xs;bs+=0>t?4*Ru+t:t,ws.lineStart=ws.lineEnd=ws.point=M}};ru.geo.bounds=function(){function t(t,e){b.push(x=[c=t,p=t]),f>e&&(f=e),e>h&&(h=e)}function e(e,n){var r=mn([e*Lu,n*Lu]);if(v){var i=yn(v,r),o=[i[1],-i[0],0],a=yn(o,i);wn(a),a=Mn(a);var s=e-d,l=s>0?1:-1,g=a[0]*Iu*l,m=gu(s)>180;if(m^(g>l*d&&l*e>g)){var y=a[1]*Iu;y>h&&(h=y)}else if(g=(g+360)%360-180,m^(g>l*d&&l*e>g)){var y=-a[1]*Iu;f>y&&(f=y)}else f>n&&(f=n),n>h&&(h=n);m?d>e?u(c,e)>u(c,p)&&(p=e):u(e,p)>u(c,p)&&(c=e):p>=c?(c>e&&(c=e),e>p&&(p=e)):e>d?u(c,e)>u(c,p)&&(p=e):u(e,p)>u(c,p)&&(c=e)}else t(e,n);v=r,d=e}function n(){w.point=e}function r(){x[0]=c,x[1]=p,w.point=t,v=null}function i(t,n){if(v){var r=t-d;y+=gu(r)>180?r+(r>0?360:-360):r}else g=t,m=n;ws.point(t,n),e(t,n)}function o(){ws.lineStart()}function a(){i(g,m),ws.lineEnd(),gu(y)>Du&&(c=-(p=180)),x[0]=c,x[1]=p,v=null}function u(t,e){return(e-=t)<0?e+360:e}function s(t,e){return t[0]-e[0]}function l(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var c,f,p,h,d,g,m,v,y,b,x,w={point:t,lineStart:n,lineEnd:r,polygonStart:function(){w.point=i,w.lineStart=o,w.lineEnd=a,y=0,ws.polygonStart()},polygonEnd:function(){ws.polygonEnd(),w.point=t,w.lineStart=n,w.lineEnd=r,0>xs?(c=-(p=180),f=-(h=90)):y>Du?h=90:-Du>y&&(f=-90),x[0]=c,x[1]=p}};return function(t){h=p=-(c=f=1/0),b=[],ru.geo.stream(t,w);var e=b.length;if(e){b.sort(s);for(var n,r=1,i=b[0],o=[i];e>r;++r)n=b[r],l(n[0],i)||l(n[1],i)?(u(i[0],n[1])>u(i[0],i[1])&&(i[1]=n[1]),u(n[0],i[1])>u(i[0],i[1])&&(i[0]=n[0])):o.push(i=n);for(var a,n,d=-1/0,e=o.length-1,r=0,i=o[e];e>=r;i=n,++r)n=o[r],(a=u(i[1],n[0]))>d&&(d=a,c=n[0],p=i[1])}return b=x=null,1/0===c||1/0===f?[[0/0,0/0],[0/0,0/0]]:[[c,f],[p,h]]}}(),ru.geo.centroid=function(t){Ms=ks=Es=Ss=_s=Cs=Ns=As=Ts=Ds=Os=0,ru.geo.stream(t,Rs);var e=Ts,n=Ds,r=Os,i=e*e+n*n+r*r;return Ou>i&&(e=Cs,n=Ns,r=As,Du>ks&&(e=Es,n=Ss,r=_s),i=e*e+n*n+r*r,Ou>i)?[0/0,0/0]:[Math.atan2(n,e)*Iu,ne(r/Math.sqrt(i))*Iu]};var Ms,ks,Es,Ss,_s,Cs,Ns,As,Ts,Ds,Os,Rs={sphere:M,point:En,lineStart:_n,lineEnd:Cn,polygonStart:function(){Rs.lineStart=Nn},polygonEnd:function(){Rs.lineStart=_n}},Bs=Bn(Tn,In,zn,[-Ru,-Ru/2]),Ps=1e9;ru.geo.clipExtent=function(){var t,e,n,r,i,o,a={stream:function(t){return i&&(i.valid=!1),i=o(t),i.valid=!0,i},extent:function(u){return arguments.length?(o=Vn(t=+u[0][0],e=+u[0][1],n=+u[1][0],r=+u[1][1]),i&&(i.valid=!1,i=null),a):[[t,e],[n,r]]}};return a.extent([[0,0],[960,500]])},(ru.geo.conicEqualArea=function(){return $n(Wn)}).raw=Wn,ru.geo.albers=function(){return ru.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},ru.geo.albersUsa=function(){function t(t){var o=t[0],a=t[1];return e=null,n(o,a),e||(r(o,a),e)||i(o,a),e}var e,n,r,i,o=ru.geo.albers(),a=ru.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=ru.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s={point:function(t,n){e=[t,n]}};return t.invert=function(t){var e=o.scale(),n=o.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&.234>i&&r>=-.425&&-.214>r?a:i>=.166&&.234>i&&r>=-.214&&-.115>r?u:o).invert(t)},t.stream=function(t){var e=o.stream(t),n=a.stream(t),r=u.stream(t);return{point:function(t,i){e.point(t,i),n.point(t,i),r.point(t,i)},sphere:function(){e.sphere(),n.sphere(),r.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},t.precision=function(e){return arguments.length?(o.precision(e),a.precision(e),u.precision(e),t):o.precision()},t.scale=function(e){return arguments.length?(o.scale(e),a.scale(.35*e),u.scale(e),t.translate(o.translate())):o.scale()},t.translate=function(e){if(!arguments.length)return o.translate();var l=o.scale(),c=+e[0],f=+e[1];return n=o.translate(e).clipExtent([[c-.455*l,f-.238*l],[c+.455*l,f+.238*l]]).stream(s).point,r=a.translate([c-.307*l,f+.201*l]).clipExtent([[c-.425*l+Du,f+.12*l+Du],[c-.214*l-Du,f+.234*l-Du]]).stream(s).point,i=u.translate([c-.205*l,f+.212*l]).clipExtent([[c-.214*l+Du,f+.166*l+Du],[c-.115*l-Du,f+.234*l-Du]]).stream(s).point,t},t.scale(1070)};var js,Ls,Is,qs,zs,Fs,Hs={point:M,lineStart:M,lineEnd:M,polygonStart:function(){Ls=0,Hs.lineStart=Jn},polygonEnd:function(){Hs.lineStart=Hs.lineEnd=Hs.point=M,js+=gu(Ls/2)}},Us={point:Yn,lineStart:M,lineEnd:M,polygonStart:M,polygonEnd:M},Vs={point:Zn,lineStart:Gn,lineEnd:Qn,polygonStart:function(){Vs.lineStart=tr},polygonEnd:function(){Vs.point=Zn,Vs.lineStart=Gn,Vs.lineEnd=Qn}};ru.geo.path=function(){function t(t){return t&&("function"==typeof u&&o.pointRadius(+u.apply(this,arguments)),a&&a.valid||(a=i(o)),ru.geo.stream(t,a)),o.result()}function e(){return a=null,t}var n,r,i,o,a,u=4.5;return t.area=function(t){return js=0,ru.geo.stream(t,i(Hs)),js},t.centroid=function(t){return Es=Ss=_s=Cs=Ns=As=Ts=Ds=Os=0,ru.geo.stream(t,i(Vs)),Os?[Ts/Os,Ds/Os]:As?[Cs/As,Ns/As]:_s?[Es/_s,Ss/_s]:[0/0,0/0]},t.bounds=function(t){return zs=Fs=-(Is=qs=1/0),ru.geo.stream(t,i(Us)),[[Is,qs],[zs,Fs]]},t.projection=function(t){return arguments.length?(i=(n=t)?t.stream||rr(t):b,e()):n},t.context=function(t){return arguments.length?(o=null==(r=t)?new Xn:new er(t),"function"!=typeof u&&o.pointRadius(u),e()):r},t.pointRadius=function(e){return arguments.length?(u="function"==typeof e?e:(o.pointRadius(+e),+e),t):u},t.projection(ru.geo.albersUsa()).context(null)},ru.geo.transform=function(t){return{stream:function(e){var n=new ir(e);for(var r in t)n[r]=t[r];return n}}},ir.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},ru.geo.projection=ar,ru.geo.projectionMutator=ur,(ru.geo.equirectangular=function(){return ar(lr)}).raw=lr.invert=lr,ru.geo.rotation=function(t){function e(e){return e=t(e[0]*Lu,e[1]*Lu),e[0]*=Iu,e[1]*=Iu,e}return t=fr(t[0]%360*Lu,t[1]*Lu,t.length>2?t[2]*Lu:0),e.invert=function(e){return e=t.invert(e[0]*Lu,e[1]*Lu),e[0]*=Iu,e[1]*=Iu,e},e},cr.invert=lr,ru.geo.circle=function(){function t(){var t="function"==typeof r?r.apply(this,arguments):r,e=fr(-t[0]*Lu,-t[1]*Lu,0).invert,i=[];return n(null,null,1,{point:function(t,n){i.push(t=e(t,n)),t[0]*=Iu,t[1]*=Iu}}),{type:"Polygon",coordinates:[i]}}var e,n,r=[0,0],i=6;return t.origin=function(e){return arguments.length?(r=e,t):r},t.angle=function(r){return arguments.length?(n=gr((e=+r)*Lu,i*Lu),t):e},t.precision=function(r){return arguments.length?(n=gr(e*Lu,(i=+r)*Lu),t):i},t.angle(90)},ru.geo.distance=function(t,e){var n,r=(e[0]-t[0])*Lu,i=t[1]*Lu,o=e[1]*Lu,a=Math.sin(r),u=Math.cos(r),s=Math.sin(i),l=Math.cos(i),c=Math.sin(o),f=Math.cos(o);return Math.atan2(Math.sqrt((n=f*a)*n+(n=l*c-s*f*u)*n),s*c+l*f*u)},ru.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return ru.range(Math.ceil(o/m)*m,i,m).map(p).concat(ru.range(Math.ceil(l/v)*v,s,v).map(h)).concat(ru.range(Math.ceil(r/d)*d,n,d).filter(function(t){return gu(t%m)>Du}).map(c)).concat(ru.range(Math.ceil(u/g)*g,a,g).filter(function(t){return gu(t%v)>Du}).map(f))}var n,r,i,o,a,u,s,l,c,f,p,h,d=10,g=d,m=90,v=360,y=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[p(o).concat(h(s).slice(1),p(i).reverse().slice(1),h(l).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(o=+e[0][0],i=+e[1][0],l=+e[0][1],s=+e[1][1],o>i&&(e=o,o=i,i=e),l>s&&(e=l,l=s,s=e),t.precision(y)):[[o,l],[i,s]]},t.minorExtent=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],u=+e[0][1],a=+e[1][1],r>n&&(e=r,r=n,n=e),u>a&&(e=u,u=a,a=e),t.precision(y)):[[r,u],[n,a]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(m=+e[0],v=+e[1],t):[m,v]},t.minorStep=function(e){return arguments.length?(d=+e[0],g=+e[1],t):[d,g]},t.precision=function(e){return arguments.length?(y=+e,c=vr(u,a,90),f=yr(r,n,y),p=vr(l,s,90),h=yr(o,i,y),t):y},t.majorExtent([[-180,-90+Du],[180,90-Du]]).minorExtent([[-180,-80-Du],[180,80+Du]])},ru.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[e||r.apply(this,arguments),n||i.apply(this,arguments)]}}var e,n,r=br,i=xr;return t.distance=function(){return ru.geo.distance(e||r.apply(this,arguments),n||i.apply(this,arguments))},t.source=function(n){return arguments.length?(r=n,e="function"==typeof n?null:n,t):r},t.target=function(e){return arguments.length?(i=e,n="function"==typeof e?null:e,t):i},t.precision=function(){return arguments.length?t:0},t},ru.geo.interpolate=function(t,e){return wr(t[0]*Lu,t[1]*Lu,e[0]*Lu,e[1]*Lu)},ru.geo.length=function(t){return $s=0,ru.geo.stream(t,Ws),$s};var $s,Ws={sphere:M,point:M,lineStart:Mr,lineEnd:M,polygonStart:M,polygonEnd:M},Js=kr(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(ru.geo.azimuthalEqualArea=function(){return ar(Js)}).raw=Js;var Ys=kr(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},b);(ru.geo.azimuthalEquidistant=function(){return ar(Ys)}).raw=Ys,(ru.geo.conicConformal=function(){return $n(Er)}).raw=Er,(ru.geo.conicEquidistant=function(){return $n(Sr)}).raw=Sr;var Xs=kr(function(t){return 1/t},Math.atan);(ru.geo.gnomonic=function(){return ar(Xs)}).raw=Xs,_r.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-ju]},(ru.geo.mercator=function(){return Cr(_r)}).raw=_r;var Ks=kr(function(){return 1},Math.asin);(ru.geo.orthographic=function(){return ar(Ks)}).raw=Ks;var Zs=kr(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(ru.geo.stereographic=function(){return ar(Zs)}).raw=Zs,Nr.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-ju]},(ru.geo.transverseMercator=function(){var t=Cr(Nr),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90])}).raw=Nr,ru.geom={},ru.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,i=Ce(n),o=Ce(r),a=t.length,u=[],s=[];for(e=0;a>e;e++)u.push([+i.call(this,t[e],e),+o.call(this,t[e],e),e]);for(u.sort(Or),e=0;a>e;e++)s.push([u[e][0],-u[e][1]]);var l=Dr(u),c=Dr(s),f=c[0]===l[0],p=c[c.length-1]===l[l.length-1],h=[];for(e=l.length-1;e>=0;--e)h.push(t[u[l[e]][2]]);for(e=+f;e<c.length-p;++e)h.push(t[u[c[e]][2]]);return h}var n=Ar,r=Tr;return arguments.length?e(t):(e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e)},ru.geom.polygon=function(t){return xu(t,Gs),t};var Gs=ru.geom.polygon.prototype=[];Gs.area=function(){for(var t,e=-1,n=this.length,r=this[n-1],i=0;++e<n;)t=r,r=this[e],i+=t[1]*r[0]-t[0]*r[1];return.5*i},Gs.centroid=function(t){var e,n,r=-1,i=this.length,o=0,a=0,u=this[i-1];for(arguments.length||(t=-1/(6*this.area()));++r<i;)e=u,u=this[r],n=e[0]*u[1]-u[0]*e[1],o+=(e[0]+u[0])*n,a+=(e[1]+u[1])*n;return[o*t,a*t]},Gs.clip=function(t){for(var e,n,r,i,o,a,u=Pr(t),s=-1,l=this.length-Pr(this),c=this[l-1];++s<l;){for(e=t.slice(),t.length=0,i=this[s],o=e[(r=e.length-u)-1],n=-1;++n<r;)a=e[n],Rr(a,c,i)?(Rr(o,c,i)||t.push(Br(o,a,c,i)),t.push(a)):Rr(o,c,i)&&t.push(Br(o,a,c,i)),o=a;u&&t.push(t[0]),c=i}return t};var Qs,tl,el,nl,rl,il=[],ol=[];Ur.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)t=e[n].edge,t.b&&t.a||e.splice(n,1);return e.sort($r),e.length},ei.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},ni.prototype={insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=ai(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(ii(this,n),t=n,n=t.U),n.C=!1,r.C=!0,oi(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(oi(this,n),t=n,n=t.U),n.C=!1,r.C=!0,ii(this,r))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?ai(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=a,a.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===i.L){if(e=i.R,e.C&&(e.C=!1,i.C=!0,ii(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,oi(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,ii(this,i),t=this._;break}}else if(e=i.L,e.C&&(e.C=!1,i.C=!0,oi(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,ii(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,oi(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}},ru.geom.voronoi=function(t){function e(t){var e=new Array(t.length),r=u[0][0],i=u[0][1],o=u[1][0],a=u[1][1];return ui(n(t),u).cells.forEach(function(n,u){var s=n.edges,l=n.site,c=e[u]=s.length?s.map(function(t){var e=t.start();return[e.x,e.y]}):l.x>=r&&l.x<=o&&l.y>=i&&l.y<=a?[[r,a],[o,a],[o,i],[r,i]]:[];c.point=t[u]}),e}function n(t){return t.map(function(t,e){return{x:Math.round(o(t,e)/Du)*Du,y:Math.round(a(t,e)/Du)*Du,i:e}})}var r=Ar,i=Tr,o=r,a=i,u=al;return t?e(t):(e.links=function(t){return ui(n(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},e.triangles=function(t){var e=[];return ui(n(t)).cells.forEach(function(n,r){for(var i,o,a=n.site,u=n.edges.sort($r),s=-1,l=u.length,c=u[l-1].edge,f=c.l===a?c.r:c.l;++s<l;)i=c,o=f,c=u[s].edge,f=c.l===a?c.r:c.l,r<o.i&&r<f.i&&li(a,o,f)<0&&e.push([t[r],t[o.i],t[f.i]])}),e},e.x=function(t){return arguments.length?(o=Ce(r=t),e):r},e.y=function(t){return arguments.length?(a=Ce(i=t),e):i},e.clipExtent=function(t){return arguments.length?(u=null==t?al:t,e):u===al?null:u},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):u===al?null:u&&u[1]},e)};var al=[[-1e6,-1e6],[1e6,1e6]];ru.geom.delaunay=function(t){return ru.geom.voronoi().triangles(t)},ru.geom.quadtree=function(t,e,n,r,i){function o(t){function o(t,e,n,r,i,o,a,u){if(!isNaN(n)&&!isNaN(r))if(t.leaf){var s=t.x,c=t.y;if(null!=s)if(gu(s-n)+gu(c-r)<.01)l(t,e,n,r,i,o,a,u);else{var f=t.point;t.x=t.y=t.point=null,l(t,f,s,c,i,o,a,u),l(t,e,n,r,i,o,a,u)}else t.x=n,t.y=r,t.point=e}else l(t,e,n,r,i,o,a,u)}function l(t,e,n,r,i,a,u,s){var l=.5*(i+u),c=.5*(a+s),f=n>=l,p=r>=c,h=p<<1|f;t.leaf=!1,t=t.nodes[h]||(t.nodes[h]=pi()),f?i=l:u=l,p?a=c:s=c,o(t,e,n,r,i,a,u,s)}var c,f,p,h,d,g,m,v,y,b=Ce(u),x=Ce(s);if(null!=e)g=e,m=n,v=r,y=i;else if(v=y=-(g=m=1/0),f=[],p=[],d=t.length,a)for(h=0;d>h;++h)c=t[h],c.x<g&&(g=c.x),c.y<m&&(m=c.y),c.x>v&&(v=c.x),c.y>y&&(y=c.y),f.push(c.x),p.push(c.y);else for(h=0;d>h;++h){var w=+b(c=t[h],h),M=+x(c,h);g>w&&(g=w),m>M&&(m=M),w>v&&(v=w),M>y&&(y=M),f.push(w),p.push(M)}var k=v-g,E=y-m;k>E?y=m+k:v=g+E;var S=pi();if(S.add=function(t){o(S,t,+b(t,++h),+x(t,h),g,m,v,y)},S.visit=function(t){hi(t,S,g,m,v,y)},S.find=function(t){return di(S,t[0],t[1],g,m,v,y)},h=-1,null==e){for(;++h<d;)o(S,t[h],f[h],p[h],g,m,v,y);--h}else t.forEach(S.add);return f=p=t=c=null,S}var a,u=Ar,s=Tr;return(a=arguments.length)?(u=ci,s=fi,3===a&&(i=n,r=e,n=e=0),o(t)):(o.x=function(t){return arguments.length?(u=t,o):u},o.y=function(t){return arguments.length?(s=t,o):s},o.extent=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),o):null==e?null:[[e,n],[r,i]]},o.size=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=n=0,r=+t[0],i=+t[1]),o):null==e?null:[r-e,i-n]},o)},ru.interpolateRgb=gi,ru.interpolateObject=mi,ru.interpolateNumber=vi,ru.interpolateString=yi;var ul=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sl=new RegExp(ul.source,"g");ru.interpolate=bi,ru.interpolators=[function(t,e){var n=typeof e;return("string"===n?Qu.has(e)||/^(#|rgb\(|hsl\()/.test(e)?gi:yi:e instanceof ue?gi:Array.isArray(e)?xi:"object"===n&&isNaN(e)?mi:vi)(t,e)}],ru.interpolateArray=xi;var ll=function(){return b},cl=ru.map({linear:ll,poly:Ci,quad:function(){return Ei},cubic:function(){return Si},sin:function(){return Ni},exp:function(){return Ai},circle:function(){return Ti},elastic:Di,back:Oi,bounce:function(){return Ri}}),fl=ru.map({"in":b,out:Mi,"in-out":ki,"out-in":function(t){return ki(Mi(t))}});ru.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.slice(0,e):t,r=e>=0?t.slice(e+1):"in";return n=cl.get(n)||ll,r=fl.get(r)||b,wi(r(n.apply(null,iu.call(arguments,1))))},ru.interpolateHcl=Bi,ru.interpolateHsl=Pi,ru.interpolateLab=ji,ru.interpolateRound=Li,ru.transform=function(t){var e=au.createElementNS(ru.ns.prefix.svg,"g");return(ru.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new Ii(n?n.matrix:pl)})(t)},Ii.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var pl={a:1,b:0,c:0,d:1,e:0,f:0};ru.interpolateTransform=Hi,ru.layout={},ru.layout.bundle=function(){return function(t){for(var e=[],n=-1,r=t.length;++n<r;)e.push($i(t[n]));return e}},ru.layout.chord=function(){function t(){var t,l,f,p,h,d={},g=[],m=ru.range(o),v=[];for(n=[],r=[],t=0,p=-1;++p<o;){for(l=0,h=-1;++h<o;)l+=i[p][h];g.push(l),v.push(ru.range(o)),t+=l}for(a&&m.sort(function(t,e){return a(g[t],g[e])}),u&&v.forEach(function(t,e){t.sort(function(t,n){return u(i[e][t],i[e][n])})}),t=(Bu-c*o)/t,l=0,p=-1;++p<o;){for(f=l,h=-1;++h<o;){var y=m[p],b=v[y][h],x=i[y][b],w=l,M=l+=x*t;d[y+"-"+b]={index:y,subindex:b,startAngle:w,endAngle:M,value:x}}r[y]={index:y,startAngle:f,endAngle:l,value:(l-f)/t},l+=c}for(p=-1;++p<o;)for(h=p-1;++h<o;){var k=d[p+"-"+h],E=d[h+"-"+p];(k.value||E.value)&&n.push(k.value<E.value?{source:E,target:k}:{source:k,target:E})}s&&e()}function e(){n.sort(function(t,e){return s((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n,r,i,o,a,u,s,l={},c=0;return l.matrix=function(t){return arguments.length?(o=(i=t)&&i.length,n=r=null,l):i},l.padding=function(t){return arguments.length?(c=t,n=r=null,l):c},l.sortGroups=function(t){return arguments.length?(a=t,n=r=null,l):a},l.sortSubgroups=function(t){return arguments.length?(u=t,n=null,l):u},l.sortChords=function(t){return arguments.length?(s=t,n&&e(),l):s},l.chords=function(){return n||t(),n},l.groups=function(){return r||t(),r},l},ru.layout.force=function(){function t(t){return function(e,n,r,i){if(e.point!==t){var o=e.cx-t.x,a=e.cy-t.y,u=i-n,s=o*o+a*a;if(s>u*u/m){if(d>s){var l=e.charge/s;t.px-=o*l,t.py-=a*l}return!0}if(e.point&&s&&d>s){var l=e.pointCharge/s;t.px-=o*l,t.py-=a*l}}return!e.charge}}function e(t){t.px=ru.event.x,t.py=ru.event.y,u.resume()}var n,r,i,o,a,u={},s=ru.dispatch("start","tick","end"),l=[1,1],c=.9,f=hl,p=dl,h=-30,d=gl,g=.1,m=.64,v=[],y=[];return u.tick=function(){if((r*=.99)<.005)return s.end({type:"end",alpha:r=0}),!0;var e,n,u,f,p,d,m,b,x,w=v.length,M=y.length;for(n=0;M>n;++n)u=y[n],f=u.source,p=u.target,b=p.x-f.x,x=p.y-f.y,(d=b*b+x*x)&&(d=r*o[n]*((d=Math.sqrt(d))-i[n])/d,b*=d,x*=d,p.x-=b*(m=f.weight/(p.weight+f.weight)),p.y-=x*m,f.x+=b*(m=1-m),f.y+=x*m);if((m=r*g)&&(b=l[0]/2,x=l[1]/2,n=-1,m))for(;++n<w;)u=v[n],u.x+=(b-u.x)*m,u.y+=(x-u.y)*m;if(h)for(Gi(e=ru.geom.quadtree(v),r,a),n=-1;++n<w;)(u=v[n]).fixed||e.visit(t(u));for(n=-1;++n<w;)u=v[n],u.fixed?(u.x=u.px,u.y=u.py):(u.x-=(u.px-(u.px=u.x))*c,u.y-=(u.py-(u.py=u.y))*c);s.tick({type:"tick",alpha:r})},u.nodes=function(t){return arguments.length?(v=t,u):v},u.links=function(t){return arguments.length?(y=t,u):y},u.size=function(t){return arguments.length?(l=t,u):l},u.linkDistance=function(t){return arguments.length?(f="function"==typeof t?t:+t,u):f},u.distance=u.linkDistance,u.linkStrength=function(t){return arguments.length?(p="function"==typeof t?t:+t,u):p},u.friction=function(t){return arguments.length?(c=+t,u):c},u.charge=function(t){return arguments.length?(h="function"==typeof t?t:+t,u):h},u.chargeDistance=function(t){return arguments.length?(d=t*t,u):Math.sqrt(d)},u.gravity=function(t){return arguments.length?(g=+t,u):g},u.theta=function(t){return arguments.length?(m=t*t,u):Math.sqrt(m)},u.alpha=function(t){return arguments.length?(t=+t,r?r=t>0?t:0:t>0&&(s.start({type:"start",alpha:r=t}),ru.timer(u.tick)),u):r},u.start=function(){function t(t,r){if(!n){for(n=new Array(s),u=0;s>u;++u)n[u]=[];for(u=0;c>u;++u){var i=y[u];n[i.source.index].push(i.target),n[i.target.index].push(i.source)}}for(var o,a=n[e],u=-1,l=a.length;++u<l;)if(!isNaN(o=a[u][t]))return o;return Math.random()*r}var e,n,r,s=v.length,c=y.length,d=l[0],g=l[1];for(e=0;s>e;++e)(r=v[e]).index=e,r.weight=0;for(e=0;c>e;++e)r=y[e],"number"==typeof r.source&&(r.source=v[r.source]),"number"==typeof r.target&&(r.target=v[r.target]),++r.source.weight,++r.target.weight;for(e=0;s>e;++e)r=v[e],isNaN(r.x)&&(r.x=t("x",d)),isNaN(r.y)&&(r.y=t("y",g)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(i=[],"function"==typeof f)for(e=0;c>e;++e)i[e]=+f.call(this,y[e],e);else for(e=0;c>e;++e)i[e]=f;if(o=[],"function"==typeof p)for(e=0;c>e;++e)o[e]=+p.call(this,y[e],e);else for(e=0;c>e;++e)o[e]=p;if(a=[],"function"==typeof h)for(e=0;s>e;++e)a[e]=+h.call(this,v[e],e);else for(e=0;s>e;++e)a[e]=h;return u.resume()},u.resume=function(){return u.alpha(.1)},u.stop=function(){return u.alpha(0)},u.drag=function(){return n||(n=ru.behavior.drag().origin(b).on("dragstart.force",Yi).on("drag.force",e).on("dragend.force",Xi)),arguments.length?void this.on("mouseover.force",Ki).on("mouseout.force",Zi).call(n):n},ru.rebind(u,s,"on")};var hl=20,dl=1,gl=1/0;ru.layout.hierarchy=function(){function t(i){var o,a=[i],u=[];for(i.depth=0;null!=(o=a.pop());)if(u.push(o),(l=n.call(t,o,o.depth))&&(s=l.length)){for(var s,l,c;--s>=0;)a.push(c=l[s]),c.parent=o,c.depth=o.depth+1;r&&(o.value=0),o.children=l}else r&&(o.value=+r.call(t,o,o.depth)||0),delete o.children;return eo(i,function(t){var n,i;e&&(n=t.children)&&n.sort(e),r&&(i=t.parent)&&(i.value+=t.value)}),u}var e=io,n=no,r=ro;return t.sort=function(n){return arguments.length?(e=n,t):e},t.children=function(e){return arguments.length?(n=e,t):n},t.value=function(e){return arguments.length?(r=e,t):r},t.revalue=function(e){return r&&(to(e,function(t){t.children&&(t.value=0)}),eo(e,function(e){var n;e.children||(e.value=+r.call(t,e,e.depth)||0),(n=e.parent)&&(n.value+=e.value)})),e},t},ru.layout.partition=function(){function t(e,n,r,i){var o=e.children;if(e.x=n,e.y=e.depth*i,e.dx=r,e.dy=i,o&&(a=o.length)){var a,u,s,l=-1;for(r=e.value?r/e.value:0;++l<a;)t(u=o[l],n,s=u.value*r,i),n+=s}}function e(t){var n=t.children,r=0;if(n&&(i=n.length))for(var i,o=-1;++o<i;)r=Math.max(r,e(n[o]));return 1+r}function n(n,o){var a=r.call(this,n,o);return t(a[0],0,i[0],i[1]/e(a[0])),a}var r=ru.layout.hierarchy(),i=[1,1];return n.size=function(t){return arguments.length?(i=t,n):i},Qi(n,r)},ru.layout.pie=function(){function t(a){var u,s=a.length,l=a.map(function(n,r){return+e.call(t,n,r)}),c=+("function"==typeof r?r.apply(this,arguments):r),f=("function"==typeof i?i.apply(this,arguments):i)-c,p=Math.min(Math.abs(f)/s,+("function"==typeof o?o.apply(this,arguments):o)),h=p*(0>f?-1:1),d=(f-s*h)/ru.sum(l),g=ru.range(s),m=[];return null!=n&&g.sort(n===ml?function(t,e){return l[e]-l[t]}:function(t,e){return n(a[t],a[e])}),g.forEach(function(t){m[t]={data:a[t],value:u=l[t],startAngle:c,endAngle:c+=u*d+h,padAngle:p}}),m}var e=Number,n=ml,r=0,i=Bu,o=0;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(r=e,t):r},t.endAngle=function(e){return arguments.length?(i=e,t):i},t.padAngle=function(e){return arguments.length?(o=e,t):o},t};var ml={};ru.layout.stack=function(){function t(u,s){if(!(p=u.length))return u;var l=u.map(function(n,r){return e.call(t,n,r)}),c=l.map(function(e){return e.map(function(e,n){return[o.call(t,e,n),a.call(t,e,n)]})}),f=n.call(t,c,s);l=ru.permute(l,f),c=ru.permute(c,f);var p,h,d,g,m=r.call(t,c,s),v=l[0].length;for(d=0;v>d;++d)for(i.call(t,l[0][d],g=m[d],c[0][d][1]),h=1;p>h;++h)i.call(t,l[h][d],g+=c[h-1][d][1],c[h][d][1]);return u}var e=b,n=lo,r=co,i=so,o=ao,a=uo;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n="function"==typeof e?e:vl.get(e)||lo,t):n},t.offset=function(e){return arguments.length?(r="function"==typeof e?e:yl.get(e)||co,t):r},t.x=function(e){return arguments.length?(o=e,t):o},t.y=function(e){return arguments.length?(a=e,t):a},t.out=function(e){return arguments.length?(i=e,t):i},t};var vl=ru.map({"inside-out":function(t){var e,n,r=t.length,i=t.map(fo),o=t.map(po),a=ru.range(r).sort(function(t,e){return i[t]-i[e]}),u=0,s=0,l=[],c=[];for(e=0;r>e;++e)n=a[e],s>u?(u+=o[n],l.push(n)):(s+=o[n],c.push(n));return c.reverse().concat(l)},reverse:function(t){return ru.range(t.length).reverse()},"default":lo}),yl=ru.map({silhouette:function(t){var e,n,r,i=t.length,o=t[0].length,a=[],u=0,s=[];for(n=0;o>n;++n){for(e=0,r=0;i>e;e++)r+=t[e][n][1];r>u&&(u=r),a.push(r)}for(n=0;o>n;++n)s[n]=(u-a[n])/2;return s},wiggle:function(t){var e,n,r,i,o,a,u,s,l,c=t.length,f=t[0],p=f.length,h=[];for(h[0]=s=l=0,n=1;p>n;++n){for(e=0,i=0;c>e;++e)i+=t[e][n][1];for(e=0,o=0,u=f[n][0]-f[n-1][0];c>e;++e){for(r=0,a=(t[e][n][1]-t[e][n-1][1])/(2*u);e>r;++r)a+=(t[r][n][1]-t[r][n-1][1])/u;o+=a*t[e][n][1]}h[n]=s-=i?o/i*u:0,l>s&&(l=s)}for(n=0;p>n;++n)h[n]-=l;return h},expand:function(t){var e,n,r,i=t.length,o=t[0].length,a=1/i,u=[];for(n=0;o>n;++n){for(e=0,r=0;i>e;e++)r+=t[e][n][1];if(r)for(e=0;i>e;e++)t[e][n][1]/=r;else for(e=0;i>e;e++)t[e][n][1]=a}for(n=0;o>n;++n)u[n]=0;return u},zero:co});ru.layout.histogram=function(){function t(t,o){for(var a,u,s=[],l=t.map(n,this),c=r.call(this,l,o),f=i.call(this,c,l,o),o=-1,p=l.length,h=f.length-1,d=e?1:1/p;++o<h;)a=s[o]=[],a.dx=f[o+1]-(a.x=f[o]),a.y=0;if(h>0)for(o=-1;++o<p;)u=l[o],u>=c[0]&&u<=c[1]&&(a=s[ru.bisect(f,u,1,h)-1],a.y+=d,a.push(t[o]));return s}var e=!0,n=Number,r=vo,i=go;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(r=Ce(e),t):r},t.bins=function(e){return arguments.length?(i="number"==typeof e?function(t){return mo(t,e)}:Ce(e),t):i},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},ru.layout.pack=function(){function t(t,o){var a=n.call(this,t,o),u=a[0],s=i[0],l=i[1],c=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(u.x=u.y=0,eo(u,function(t){t.r=+c(t.value)}),eo(u,Mo),r){var f=r*(e?1:Math.max(2*u.r/s,2*u.r/l))/2;eo(u,function(t){t.r+=f}),eo(u,Mo),eo(u,function(t){t.r-=f})}return So(u,s/2,l/2,e?1:1/Math.max(2*u.r/s,2*u.r/l)),a}var e,n=ru.layout.hierarchy().sort(yo),r=0,i=[1,1];return t.size=function(e){return arguments.length?(i=e,t):i},t.radius=function(n){return arguments.length?(e=null==n||"function"==typeof n?n:+n,t):e},t.padding=function(e){return arguments.length?(r=+e,t):r},Qi(t,n)},ru.layout.tree=function(){function t(t,i){var c=a.call(this,t,i),f=c[0],p=e(f);if(eo(p,n),p.parent.m=-p.z,to(p,r),l)to(f,o);else{var h=f,d=f,g=f;to(f,function(t){t.x<h.x&&(h=t),t.x>d.x&&(d=t),t.depth>g.depth&&(g=t)});var m=u(h,d)/2-h.x,v=s[0]/(d.x+u(d,h)/2+m),y=s[1]/(g.depth||1);to(f,function(t){t.x=(t.x+m)*v,t.y=t.depth*y})}return c}function e(t){for(var e,n={A:null,children:[t]},r=[n];null!=(e=r.pop());)for(var i,o=e.children,a=0,u=o.length;u>a;++a)r.push((o[a]=i={_:o[a],parent:e,children:(i=o[a].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=i);return n.children[0]}function n(t){var e=t.children,n=t.parent.children,r=t.i?n[t.i-1]:null;if(e.length){Do(t);var o=(e[0].z+e[e.length-1].z)/2;r?(t.z=r.z+u(t._,r._),t.m=t.z-o):t.z=o}else r&&(t.z=r.z+u(t._,r._));t.parent.A=i(t,r,t.parent.A||n[0])}function r(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function i(t,e,n){if(e){for(var r,i=t,o=t,a=e,s=i.parent.children[0],l=i.m,c=o.m,f=a.m,p=s.m;a=Ao(a),i=No(i),a&&i;)s=No(s),o=Ao(o),o.a=t,r=a.z+f-i.z-l+u(a._,i._),r>0&&(To(Oo(a,t,n),t,r),l+=r,c+=r),f+=a.m,l+=i.m,p+=s.m,c+=o.m;a&&!Ao(o)&&(o.t=a,o.m+=f-c),i&&!No(s)&&(s.t=i,s.m+=l-p,n=t)}return n}function o(t){t.x*=s[0],t.y=t.depth*s[1]}var a=ru.layout.hierarchy().sort(null).value(null),u=Co,s=[1,1],l=null;return t.separation=function(e){return arguments.length?(u=e,t):u},t.size=function(e){return arguments.length?(l=null==(s=e)?o:null,t):l?null:s},t.nodeSize=function(e){return arguments.length?(l=null==(s=e)?null:o,t):l?s:null},Qi(t,a)},ru.layout.cluster=function(){function t(t,o){var a,u=e.call(this,t,o),s=u[0],l=0;eo(s,function(t){var e=t.children;e&&e.length?(t.x=Bo(e),t.y=Ro(e)):(t.x=a?l+=n(t,a):0,t.y=0,a=t)});var c=Po(s),f=jo(s),p=c.x-n(c,f)/2,h=f.x+n(f,c)/2;return eo(s,i?function(t){t.x=(t.x-s.x)*r[0],t.y=(s.y-t.y)*r[1]}:function(t){t.x=(t.x-p)/(h-p)*r[0],t.y=(1-(s.y?t.y/s.y:1))*r[1]}),u}var e=ru.layout.hierarchy().sort(null).value(null),n=Co,r=[1,1],i=!1;return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(i=null==(r=e),t):i?null:r},t.nodeSize=function(e){return arguments.length?(i=null!=(r=e),t):i?r:null},Qi(t,e)},ru.layout.treemap=function(){function t(t,e){for(var n,r,i=-1,o=t.length;++i<o;)r=(n=t[i]).value*(0>e?0:e),n.area=isNaN(r)||0>=r?0:r
}function e(n){var o=n.children;if(o&&o.length){var a,u,s,l=f(n),c=[],p=o.slice(),d=1/0,g="slice"===h?l.dx:"dice"===h?l.dy:"slice-dice"===h?1&n.depth?l.dy:l.dx:Math.min(l.dx,l.dy);for(t(p,l.dx*l.dy/n.value),c.area=0;(s=p.length)>0;)c.push(a=p[s-1]),c.area+=a.area,"squarify"!==h||(u=r(c,g))<=d?(p.pop(),d=u):(c.area-=c.pop().area,i(c,g,l,!1),g=Math.min(l.dx,l.dy),c.length=c.area=0,d=1/0);c.length&&(i(c,g,l,!0),c.length=c.area=0),o.forEach(e)}}function n(e){var r=e.children;if(r&&r.length){var o,a=f(e),u=r.slice(),s=[];for(t(u,a.dx*a.dy/e.value),s.area=0;o=u.pop();)s.push(o),s.area+=o.area,null!=o.z&&(i(s,o.z?a.dx:a.dy,a,!u.length),s.length=s.area=0);r.forEach(n)}}function r(t,e){for(var n,r=t.area,i=0,o=1/0,a=-1,u=t.length;++a<u;)(n=t[a].area)&&(o>n&&(o=n),n>i&&(i=n));return r*=r,e*=e,r?Math.max(e*i*d/r,r/(e*o*d)):1/0}function i(t,e,n,r){var i,o=-1,a=t.length,u=n.x,l=n.y,c=e?s(t.area/e):0;if(e==n.dx){for((r||c>n.dy)&&(c=n.dy);++o<a;)i=t[o],i.x=u,i.y=l,i.dy=c,u+=i.dx=Math.min(n.x+n.dx-u,c?s(i.area/c):0);i.z=!0,i.dx+=n.x+n.dx-u,n.y+=c,n.dy-=c}else{for((r||c>n.dx)&&(c=n.dx);++o<a;)i=t[o],i.x=u,i.y=l,i.dx=c,l+=i.dy=Math.min(n.y+n.dy-l,c?s(i.area/c):0);i.z=!1,i.dy+=n.y+n.dy-l,n.x+=c,n.dx-=c}}function o(r){var i=a||u(r),o=i[0];return o.x=0,o.y=0,o.dx=l[0],o.dy=l[1],a&&u.revalue(o),t([o],o.dx*o.dy/o.value),(a?n:e)(o),p&&(a=i),i}var a,u=ru.layout.hierarchy(),s=Math.round,l=[1,1],c=null,f=Lo,p=!1,h="squarify",d=.5*(1+Math.sqrt(5));return o.size=function(t){return arguments.length?(l=t,o):l},o.padding=function(t){function e(e){var n=t.call(o,e,e.depth);return null==n?Lo(e):Io(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return Io(e,t)}if(!arguments.length)return c;var r;return f=null==(c=t)?Lo:"function"==(r=typeof t)?e:"number"===r?(t=[t,t,t,t],n):n,o},o.round=function(t){return arguments.length?(s=t?Math.round:Number,o):s!=Number},o.sticky=function(t){return arguments.length?(p=t,a=null,o):p},o.ratio=function(t){return arguments.length?(d=t,o):d},o.mode=function(t){return arguments.length?(h=t+"",o):h},Qi(o,u)},ru.random={normal:function(t,e){var n=arguments.length;return 2>n&&(e=1),1>n&&(t=0),function(){var n,r,i;do n=2*Math.random()-1,r=2*Math.random()-1,i=n*n+r*r;while(!i||i>1);return t+e*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=ru.random.normal.apply(ru,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=ru.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;t>n;n++)e+=Math.random();return e}}},ru.scale={};var bl={floor:b,ceil:b};ru.scale.linear=function(){return $o([0,1],[0,1],bi,!1)};var xl={s:1,g:1,p:1,r:1,e:1};ru.scale.log=function(){return Qo(ru.scale.linear().domain([0,1]),10,!0,[1,10])};var wl=ru.format(".0e"),Ml={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};ru.scale.pow=function(){return ta(ru.scale.linear(),1,[0,1])},ru.scale.sqrt=function(){return ru.scale.pow().exponent(.5)},ru.scale.ordinal=function(){return na([],{t:"range",a:[[]]})},ru.scale.category10=function(){return ru.scale.ordinal().range(kl)},ru.scale.category20=function(){return ru.scale.ordinal().range(El)},ru.scale.category20b=function(){return ru.scale.ordinal().range(Sl)},ru.scale.category20c=function(){return ru.scale.ordinal().range(_l)};var kl=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(xe),El=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(xe),Sl=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(xe),_l=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(xe);ru.scale.quantile=function(){return ra([],[])},ru.scale.quantize=function(){return ia(0,1,[0,1])},ru.scale.threshold=function(){return oa([.5],[0,1])},ru.scale.identity=function(){return aa([0,1])},ru.svg={},ru.svg.arc=function(){function t(){var t=Math.max(0,+n.apply(this,arguments)),l=Math.max(0,+r.apply(this,arguments)),c=a.apply(this,arguments)-ju,f=u.apply(this,arguments)-ju,p=Math.abs(f-c),h=c>f?0:1;if(t>l&&(d=l,l=t,t=d),p>=Pu)return e(l,h)+(t?e(t,1-h):"")+"Z";var d,g,m,v,y,b,x,w,M,k,E,S,_=0,C=0,N=[];if((v=(+s.apply(this,arguments)||0)/2)&&(m=o===Cl?Math.sqrt(t*t+l*l):+o.apply(this,arguments),h||(C*=-1),l&&(C=ne(m/l*Math.sin(v))),t&&(_=ne(m/t*Math.sin(v)))),l){y=l*Math.cos(c+C),b=l*Math.sin(c+C),x=l*Math.cos(f-C),w=l*Math.sin(f-C);var A=Math.abs(f-c-2*C)<=Ru?0:1;if(C&&ha(y,b,x,w)===h^A){var T=(c+f)/2;y=l*Math.cos(T),b=l*Math.sin(T),x=w=null}}else y=b=0;if(t){M=t*Math.cos(f-_),k=t*Math.sin(f-_),E=t*Math.cos(c+_),S=t*Math.sin(c+_);var D=Math.abs(c-f+2*_)<=Ru?0:1;if(_&&ha(M,k,E,S)===1-h^D){var O=(c+f)/2;M=t*Math.cos(O),k=t*Math.sin(O),E=S=null}}else M=k=0;if((d=Math.min(Math.abs(l-t)/2,+i.apply(this,arguments)))>.001){g=l>t^h?0:1;var R=null==E?[M,k]:null==x?[y,b]:Br([y,b],[E,S],[x,w],[M,k]),B=y-R[0],P=b-R[1],j=x-R[0],L=w-R[1],I=1/Math.sin(Math.acos((B*j+P*L)/(Math.sqrt(B*B+P*P)*Math.sqrt(j*j+L*L)))/2),q=Math.sqrt(R[0]*R[0]+R[1]*R[1]);if(null!=x){var z=Math.min(d,(l-q)/(I+1)),F=da(null==E?[M,k]:[E,S],[y,b],l,z,h),H=da([x,w],[M,k],l,z,h);d===z?N.push("M",F[0],"A",z,",",z," 0 0,",g," ",F[1],"A",l,",",l," 0 ",1-h^ha(F[1][0],F[1][1],H[1][0],H[1][1]),",",h," ",H[1],"A",z,",",z," 0 0,",g," ",H[0]):N.push("M",F[0],"A",z,",",z," 0 1,",g," ",H[0])}else N.push("M",y,",",b);if(null!=E){var U=Math.min(d,(t-q)/(I-1)),V=da([y,b],[E,S],t,-U,h),$=da([M,k],null==x?[y,b]:[x,w],t,-U,h);d===U?N.push("L",$[0],"A",U,",",U," 0 0,",g," ",$[1],"A",t,",",t," 0 ",h^ha($[1][0],$[1][1],V[1][0],V[1][1]),",",1-h," ",V[1],"A",U,",",U," 0 0,",g," ",V[0]):N.push("L",$[0],"A",U,",",U," 0 0,",g," ",V[0])}else N.push("L",M,",",k)}else N.push("M",y,",",b),null!=x&&N.push("A",l,",",l," 0 ",A,",",h," ",x,",",w),N.push("L",M,",",k),null!=E&&N.push("A",t,",",t," 0 ",D,",",1-h," ",E,",",S);return N.push("Z"),N.join("")}function e(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}var n=sa,r=la,i=ua,o=Cl,a=ca,u=fa,s=pa;return t.innerRadius=function(e){return arguments.length?(n=Ce(e),t):n},t.outerRadius=function(e){return arguments.length?(r=Ce(e),t):r},t.cornerRadius=function(e){return arguments.length?(i=Ce(e),t):i},t.padRadius=function(e){return arguments.length?(o=e==Cl?Cl:Ce(e),t):o},t.startAngle=function(e){return arguments.length?(a=Ce(e),t):a},t.endAngle=function(e){return arguments.length?(u=Ce(e),t):u},t.padAngle=function(e){return arguments.length?(s=Ce(e),t):s},t.centroid=function(){var t=(+n.apply(this,arguments)+ +r.apply(this,arguments))/2,e=(+a.apply(this,arguments)+ +u.apply(this,arguments))/2-ju;return[Math.cos(e)*t,Math.sin(e)*t]},t};var Cl="auto";ru.svg.line=function(){return ga(b)};var Nl=ru.map({linear:ma,"linear-closed":va,step:ya,"step-before":ba,"step-after":xa,basis:_a,"basis-open":Ca,"basis-closed":Na,bundle:Aa,cardinal:ka,"cardinal-open":wa,"cardinal-closed":Ma,monotone:Pa});Nl.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var Al=[0,2/3,1/3,0],Tl=[0,1/3,2/3,0],Dl=[0,1/6,2/3,1/6];ru.svg.line.radial=function(){var t=ga(ja);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},ba.reverse=xa,xa.reverse=ba,ru.svg.area=function(){return La(b)},ru.svg.area.radial=function(){var t=La(ja);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},ru.svg.chord=function(){function t(t,u){var s=e(this,o,t,u),l=e(this,a,t,u);return"M"+s.p0+r(s.r,s.p1,s.a1-s.a0)+(n(s,l)?i(s.r,s.p1,s.r,s.p0):i(s.r,s.p1,l.r,l.p0)+r(l.r,l.p1,l.a1-l.a0)+i(l.r,l.p1,s.r,s.p0))+"Z"}function e(t,e,n,r){var i=e.call(t,n,r),o=u.call(t,i,r),a=s.call(t,i,r)-ju,c=l.call(t,i,r)-ju;return{r:o,a0:a,a1:c,p0:[o*Math.cos(a),o*Math.sin(a)],p1:[o*Math.cos(c),o*Math.sin(c)]}}function n(t,e){return t.a0==e.a0&&t.a1==e.a1}function r(t,e,n){return"A"+t+","+t+" 0 "+ +(n>Ru)+",1 "+e}function i(t,e,n,r){return"Q 0,0 "+r}var o=br,a=xr,u=Ia,s=ca,l=fa;return t.radius=function(e){return arguments.length?(u=Ce(e),t):u},t.source=function(e){return arguments.length?(o=Ce(e),t):o},t.target=function(e){return arguments.length?(a=Ce(e),t):a},t.startAngle=function(e){return arguments.length?(s=Ce(e),t):s},t.endAngle=function(e){return arguments.length?(l=Ce(e),t):l},t},ru.svg.diagonal=function(){function t(t,i){var o=e.call(this,t,i),a=n.call(this,t,i),u=(o.y+a.y)/2,s=[o,{x:o.x,y:u},{x:a.x,y:u},a];return s=s.map(r),"M"+s[0]+"C"+s[1]+" "+s[2]+" "+s[3]}var e=br,n=xr,r=qa;return t.source=function(n){return arguments.length?(e=Ce(n),t):e},t.target=function(e){return arguments.length?(n=Ce(e),t):n},t.projection=function(e){return arguments.length?(r=e,t):r},t},ru.svg.diagonal.radial=function(){var t=ru.svg.diagonal(),e=qa,n=t.projection;return t.projection=function(t){return arguments.length?n(za(e=t)):e},t},ru.svg.symbol=function(){function t(t,r){return(Ol.get(e.call(this,t,r))||Ua)(n.call(this,t,r))}var e=Ha,n=Fa;return t.type=function(n){return arguments.length?(e=Ce(n),t):e},t.size=function(e){return arguments.length?(n=Ce(e),t):n},t};var Ol=ru.map({circle:Ua,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*Bl)),n=e*Bl;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/Rl),n=e*Rl/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Rl),n=e*Rl/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});ru.svg.symbolTypes=Ol.keys();var Rl=Math.sqrt(3),Bl=Math.tan(30*Lu);Eu.transition=function(t){for(var e,n,r=Pl||++ql,i=Ya(t),o=[],a=jl||{time:Date.now(),ease:_i,delay:0,duration:250},u=-1,s=this.length;++u<s;){o.push(e=[]);for(var l=this[u],c=-1,f=l.length;++c<f;)(n=l[c])&&Xa(n,c,i,r,a),e.push(n)}return $a(o,i,r)},Eu.interrupt=function(t){return this.each(null==t?Ll:Va(Ya(t)))};var Pl,jl,Ll=Va(Ya()),Il=[],ql=0;Il.call=Eu.call,Il.empty=Eu.empty,Il.node=Eu.node,Il.size=Eu.size,ru.transition=function(t,e){return t&&t.transition?Pl?t.transition(e):t:ru.selection().transition(t)},ru.transition.prototype=Il,Il.select=function(t){var e,n,r,i=this.id,o=this.namespace,a=[];t=A(t);for(var u=-1,s=this.length;++u<s;){a.push(e=[]);for(var l=this[u],c=-1,f=l.length;++c<f;)(r=l[c])&&(n=t.call(r,r.__data__,c,u))?("__data__"in r&&(n.__data__=r.__data__),Xa(n,c,o,i,r[o][i]),e.push(n)):e.push(null)}return $a(a,o,i)},Il.selectAll=function(t){var e,n,r,i,o,a=this.id,u=this.namespace,s=[];t=T(t);for(var l=-1,c=this.length;++l<c;)for(var f=this[l],p=-1,h=f.length;++p<h;)if(r=f[p]){o=r[u][a],n=t.call(r,r.__data__,p,l),s.push(e=[]);for(var d=-1,g=n.length;++d<g;)(i=n[d])&&Xa(i,d,u,a,o),e.push(i)}return $a(s,u,a)},Il.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=H(t));for(var o=0,a=this.length;a>o;o++){i.push(e=[]);for(var n=this[o],u=0,s=n.length;s>u;u++)(r=n[u])&&t.call(r,r.__data__,u,o)&&e.push(r)}return $a(i,this.namespace,this.id)},Il.tween=function(t,e){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(t):V(this,null==e?function(e){e[r][n].tween.remove(t)}:function(i){i[r][n].tween.set(t,e)})},Il.attr=function(t,e){function n(){this.removeAttribute(u)}function r(){this.removeAttributeNS(u.space,u.local)}function i(t){return null==t?n:(t+="",function(){var e,n=this.getAttribute(u);return n!==t&&(e=a(n,t),function(t){this.setAttribute(u,e(t))})})}function o(t){return null==t?r:(t+="",function(){var e,n=this.getAttributeNS(u.space,u.local);return n!==t&&(e=a(n,t),function(t){this.setAttributeNS(u.space,u.local,e(t))})})}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var a="transform"==t?Hi:bi,u=ru.ns.qualify(t);return Wa(this,"attr."+t,e,u.local?o:i)},Il.attrTween=function(t,e){function n(t,n){var r=e.call(this,t,n,this.getAttribute(i));return r&&function(t){this.setAttribute(i,r(t))}}function r(t,n){var r=e.call(this,t,n,this.getAttributeNS(i.space,i.local));return r&&function(t){this.setAttributeNS(i.space,i.local,r(t))}}var i=ru.ns.qualify(t);return this.tween("attr."+t,i.local?r:n)},Il.style=function(t,e,r){function i(){this.style.removeProperty(t)}function o(e){return null==e?i:(e+="",function(){var i,o=n(this).getComputedStyle(this,null).getPropertyValue(t);return o!==e&&(i=bi(o,e),function(e){this.style.setProperty(t,i(e),r)})})}var a=arguments.length;if(3>a){if("string"!=typeof t){2>a&&(e="");for(r in t)this.style(r,t[r],e);return this}r=""}return Wa(this,"style."+t,e,o)},Il.styleTween=function(t,e,r){function i(i,o){var a=e.call(this,i,o,n(this).getComputedStyle(this,null).getPropertyValue(t));return a&&function(e){this.style.setProperty(t,a(e),r)}}return arguments.length<3&&(r=""),this.tween("style."+t,i)},Il.text=function(t){return Wa(this,"text",t,Ja)},Il.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},Il.ease=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].ease:("function"!=typeof t&&(t=ru.ease.apply(ru,arguments)),V(this,function(r){r[n][e].ease=t}))},Il.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:V(this,"function"==typeof t?function(r,i,o){r[n][e].delay=+t.call(r,r.__data__,i,o)}:(t=+t,function(r){r[n][e].delay=t}))},Il.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:V(this,"function"==typeof t?function(r,i,o){r[n][e].duration=Math.max(1,t.call(r,r.__data__,i,o))}:(t=Math.max(1,t),function(r){r[n][e].duration=t}))},Il.each=function(t,e){var n=this.id,r=this.namespace;if(arguments.length<2){var i=jl,o=Pl;try{Pl=n,V(this,function(e,i,o){jl=e[r][n],t.call(e,e.__data__,i,o)})}finally{jl=i,Pl=o}}else V(this,function(i){var o=i[r][n];(o.event||(o.event=ru.dispatch("start","end","interrupt"))).on(t,e)});return this},Il.transition=function(){for(var t,e,n,r,i=this.id,o=++ql,a=this.namespace,u=[],s=0,l=this.length;l>s;s++){u.push(t=[]);for(var e=this[s],c=0,f=e.length;f>c;c++)(n=e[c])&&(r=n[a][i],Xa(n,c,a,o,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),t.push(n)}return $a(u,a,o)},ru.svg.axis=function(){function t(t){t.each(function(){var t,l=ru.select(this),c=this.__chart__||n,f=this.__chart__=n.copy(),p=null==s?f.ticks?f.ticks.apply(f,u):f.domain():s,h=null==e?f.tickFormat?f.tickFormat.apply(f,u):b:e,d=l.selectAll(".tick").data(p,f),g=d.enter().insert("g",".domain").attr("class","tick").style("opacity",Du),m=ru.transition(d.exit()).style("opacity",Du).remove(),v=ru.transition(d.order()).style("opacity",1),y=Math.max(i,0)+a,x=zo(f),w=l.selectAll(".domain").data([0]),M=(w.enter().append("path").attr("class","domain"),ru.transition(w));g.append("line"),g.append("text");var k,E,S,_,C=g.select("line"),N=v.select("line"),A=d.select("text").text(h),T=g.select("text"),D=v.select("text"),O="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(t=Ka,k="x",S="y",E="x2",_="y2",A.attr("dy",0>O?"0em":".71em").style("text-anchor","middle"),M.attr("d","M"+x[0]+","+O*o+"V0H"+x[1]+"V"+O*o)):(t=Za,k="y",S="x",E="y2",_="x2",A.attr("dy",".32em").style("text-anchor",0>O?"end":"start"),M.attr("d","M"+O*o+","+x[0]+"H0V"+x[1]+"H"+O*o)),C.attr(_,O*i),T.attr(S,O*y),N.attr(E,0).attr(_,O*i),D.attr(k,0).attr(S,O*y),f.rangeBand){var R=f,B=R.rangeBand()/2;c=f=function(t){return R(t)+B}}else c.rangeBand?c=f:m.call(t,f,c);g.call(t,c,f),v.call(t,f,f)})}var e,n=ru.scale.linear(),r=zl,i=6,o=6,a=3,u=[10],s=null;return t.scale=function(e){return arguments.length?(n=e,t):n},t.orient=function(e){return arguments.length?(r=e in Fl?e+"":zl,t):r},t.ticks=function(){return arguments.length?(u=arguments,t):u},t.tickValues=function(e){return arguments.length?(s=e,t):s},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(e){var n=arguments.length;return n?(i=+e,o=+arguments[n-1],t):i},t.innerTickSize=function(e){return arguments.length?(i=+e,t):i},t.outerTickSize=function(e){return arguments.length?(o=+e,t):o},t.tickPadding=function(e){return arguments.length?(a=+e,t):a},t.tickSubdivide=function(){return arguments.length&&t},t};var zl="bottom",Fl={top:1,right:1,bottom:1,left:1};ru.svg.brush=function(){function t(n){n.each(function(){var n=ru.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",o).on("touchstart.brush",o),a=n.selectAll(".background").data([0]);a.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),n.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var u=n.selectAll(".resize").data(g,b);u.exit().remove(),u.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Hl[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),u.style("display",t.empty()?"none":null);var s,f=ru.transition(n),p=ru.transition(a);l&&(s=zo(l),p.attr("x",s[0]).attr("width",s[1]-s[0]),r(f)),c&&(s=zo(c),p.attr("y",s[0]).attr("height",s[1]-s[0]),i(f)),e(f)})}function e(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+f[+/e$/.test(t)]+","+p[+/^s/.test(t)]+")"})}function r(t){t.select(".extent").attr("x",f[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",f[1]-f[0])}function i(t){t.select(".extent").attr("y",p[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",p[1]-p[0])}function o(){function o(){32==ru.event.keyCode&&(A||(b=null,D[0]-=f[1],D[1]-=p[1],A=2),S())}function g(){32==ru.event.keyCode&&2==A&&(D[0]+=f[1],D[1]+=p[1],A=0,S())}function m(){var t=ru.mouse(w),n=!1;x&&(t[0]+=x[0],t[1]+=x[1]),A||(ru.event.altKey?(b||(b=[(f[0]+f[1])/2,(p[0]+p[1])/2]),D[0]=f[+(t[0]<b[0])],D[1]=p[+(t[1]<b[1])]):b=null),C&&v(t,l,0)&&(r(E),n=!0),N&&v(t,c,1)&&(i(E),n=!0),n&&(e(E),k({type:"brush",mode:A?"move":"resize"}))}function v(t,e,n){var r,i,o=zo(e),s=o[0],l=o[1],c=D[n],g=n?p:f,m=g[1]-g[0];return A&&(s-=c,l-=m+c),r=(n?d:h)?Math.max(s,Math.min(l,t[n])):t[n],A?i=(r+=c)+m:(b&&(c=Math.max(s,Math.min(l,2*b[n]-r))),r>c?(i=r,r=c):i=c),g[0]!=r||g[1]!=i?(n?u=null:a=null,g[0]=r,g[1]=i,!0):void 0}function y(){m(),E.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),ru.select("body").style("cursor",null),O.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),T(),k({type:"brushend"})}var b,x,w=this,M=ru.select(ru.event.target),k=s.of(w,arguments),E=ru.select(w),_=M.datum(),C=!/^(n|s)$/.test(_)&&l,N=!/^(e|w)$/.test(_)&&c,A=M.classed("extent"),T=K(w),D=ru.mouse(w),O=ru.select(n(w)).on("keydown.brush",o).on("keyup.brush",g);if(ru.event.changedTouches?O.on("touchmove.brush",m).on("touchend.brush",y):O.on("mousemove.brush",m).on("mouseup.brush",y),E.interrupt().selectAll("*").interrupt(),A)D[0]=f[0]-D[0],D[1]=p[0]-D[1];else if(_){var R=+/w$/.test(_),B=+/^n/.test(_);x=[f[1-R]-D[0],p[1-B]-D[1]],D[0]=f[R],D[1]=p[B]}else ru.event.altKey&&(b=D.slice());E.style("pointer-events","none").selectAll(".resize").style("display",null),ru.select("body").style("cursor",M.style("cursor")),k({type:"brushstart"}),m()}var a,u,s=C(t,"brushstart","brush","brushend"),l=null,c=null,f=[0,0],p=[0,0],h=!0,d=!0,g=Ul[0];return t.event=function(t){t.each(function(){var t=s.of(this,arguments),e={x:f,y:p,i:a,j:u},n=this.__chart__||e;this.__chart__=e,Pl?ru.select(this).transition().each("start.brush",function(){a=n.i,u=n.j,f=n.x,p=n.y,t({type:"brushstart"})}).tween("brush:brush",function(){var n=xi(f,e.x),r=xi(p,e.y);return a=u=null,function(i){f=e.x=n(i),p=e.y=r(i),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){a=e.i,u=e.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(e){return arguments.length?(l=e,g=Ul[!l<<1|!c],t):l},t.y=function(e){return arguments.length?(c=e,g=Ul[!l<<1|!c],t):c},t.clamp=function(e){return arguments.length?(l&&c?(h=!!e[0],d=!!e[1]):l?h=!!e:c&&(d=!!e),t):l&&c?[h,d]:l?h:c?d:null},t.extent=function(e){var n,r,i,o,s;return arguments.length?(l&&(n=e[0],r=e[1],c&&(n=n[0],r=r[0]),a=[n,r],l.invert&&(n=l(n),r=l(r)),n>r&&(s=n,n=r,r=s),(n!=f[0]||r!=f[1])&&(f=[n,r])),c&&(i=e[0],o=e[1],l&&(i=i[1],o=o[1]),u=[i,o],c.invert&&(i=c(i),o=c(o)),i>o&&(s=i,i=o,o=s),(i!=p[0]||o!=p[1])&&(p=[i,o])),t):(l&&(a?(n=a[0],r=a[1]):(n=f[0],r=f[1],l.invert&&(n=l.invert(n),r=l.invert(r)),n>r&&(s=n,n=r,r=s))),c&&(u?(i=u[0],o=u[1]):(i=p[0],o=p[1],c.invert&&(i=c.invert(i),o=c.invert(o)),i>o&&(s=i,i=o,o=s))),l&&c?[[n,i],[r,o]]:l?[n,r]:c&&[i,o])},t.clear=function(){return t.empty()||(f=[0,0],p=[0,0],a=u=null),t},t.empty=function(){return!!l&&f[0]==f[1]||!!c&&p[0]==p[1]},ru.rebind(t,s,"on")};var Hl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ul=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Vl=ls.format=gs.timeFormat,$l=Vl.utc,Wl=$l("%Y-%m-%dT%H:%M:%S.%LZ");Vl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Ga:Wl,Ga.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},Ga.toString=Wl.toString,ls.second=ze(function(t){return new cs(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),ls.seconds=ls.second.range,ls.seconds.utc=ls.second.utc.range,ls.minute=ze(function(t){return new cs(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),ls.minutes=ls.minute.range,ls.minutes.utc=ls.minute.utc.range,ls.hour=ze(function(t){var e=t.getTimezoneOffset()/60;return new cs(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),ls.hours=ls.hour.range,ls.hours.utc=ls.hour.utc.range,ls.month=ze(function(t){return t=ls.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),ls.months=ls.month.range,ls.months.utc=ls.month.utc.range;var Jl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Yl=[[ls.second,1],[ls.second,5],[ls.second,15],[ls.second,30],[ls.minute,1],[ls.minute,5],[ls.minute,15],[ls.minute,30],[ls.hour,1],[ls.hour,3],[ls.hour,6],[ls.hour,12],[ls.day,1],[ls.day,2],[ls.week,1],[ls.month,1],[ls.month,3],[ls.year,1]],Xl=Vl.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Tn]]),Kl={range:function(t,e,n){return ru.range(Math.ceil(t/n)*n,+e,n).map(tu)},floor:b,ceil:b};Yl.year=ls.year,ls.scale=function(){return Qa(ru.scale.linear(),Yl,Xl)};var Zl=Yl.map(function(t){return[t[0].utc,t[1]]}),Gl=$l.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Tn]]);Zl.year=ls.year.utc,ls.scale.utc=function(){return Qa(ru.scale.linear(),Zl,Gl)},ru.text=Ne(function(t){return t.responseText}),ru.json=function(t,e){return Ae(t,"application/json",eu,e)},ru.html=function(t,e){return Ae(t,"text/html",nu,e)},ru.xml=Ne(function(t){return t.responseXML}),"function"==typeof define&&define.amd?define(ru):"object"==typeof e&&e.exports&&(e.exports=ru),this.d3=ru}()},{}],knockout:[function(t,e,n){!function(){var r=!0;!function(i){var o=this||(0,eval)("this"),a=o.document,u=o.navigator,s=o.jQuery,l=o.JSON;!function(r){"function"==typeof define&&define.amd?define(["exports","require"],r):r("function"==typeof t&&"object"==typeof n&&"object"==typeof e?e.exports||n:o.ko={})}(function(t,e){function n(t,e){var n=null===t||typeof t in m;return n?t===e:!1}function c(t,e){var n;return function(){n||(n=setTimeout(function(){n=i,t()},e))}}function f(t,e){var n;return function(){clearTimeout(n),n=setTimeout(t,e)}}function p(t){var e=this;return t&&g.utils.objectForEach(t,function(t,n){var r=g.extenders[t];"function"==typeof r&&(e=r(e,n)||e)}),e}function h(t){g.bindingHandlers[t]={init:function(e,n,r,i,o){var a=function(){var e={};return e[t]=n(),e};return g.bindingHandlers.event.init.call(this,e,a,r,i,o)}}}function d(t,e,n,r){g.bindingHandlers[t]={init:function(t,i,o,a,u){var s,l;return g.computed(function(){var o=g.utils.unwrapObservable(i()),a=!n!=!o,c=!l,f=c||e||a!==s;f&&(c&&g.computedContext.getDependenciesCount()&&(l=g.utils.cloneNodes(g.virtualElements.childNodes(t),!0)),a?(c||g.virtualElements.setDomNodeChildren(t,g.utils.cloneNodes(l)),g.applyBindingsToDescendants(r?r(u,o):u,t)):g.virtualElements.emptyNode(t),s=a)},null,{disposeWhenNodeIsRemoved:t}),{controlsDescendantBindings:!0}}},g.expressionRewriting.bindingRewriteValidators[t]=!1,g.virtualElements.allowedBindings[t]=!0}var g="undefined"!=typeof t?t:{};g.exportSymbol=function(t,e){for(var n=t.split("."),r=g,i=0;i<n.length-1;i++)r=r[n[i]];r[n[n.length-1]]=e},g.exportProperty=function(t,e,n){t[e]=n},g.version="3.3.0",g.exportSymbol("version",g.version),g.utils=function(){function t(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}function e(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function n(t,e){return t.__proto__=e,t}function r(t,e){if("input"!==g.utils.tagNameLower(t)||!t.type)return!1;if("click"!=e.toLowerCase())return!1;var n=t.type;return"checkbox"==n||"radio"==n}function c(t,e,n){var r;e&&("object"==typeof t.classList?(r=t.classList[n?"add":"remove"],g.utils.arrayForEach(e.match(w),function(e){r.call(t.classList,e)})):"string"==typeof t.className.baseVal?f(t.className,"baseVal",e,n):f(t,"className",e,n))}function f(t,e,n,r){var i=t[e].match(w)||[];g.utils.arrayForEach(n.match(w),function(t){g.utils.addOrRemoveItem(i,t,r)}),t[e]=i.join(" ")}var p={__proto__:[]}instanceof Array,h={},d={},m=u&&/Firefox\/2/i.test(u.userAgent)?"KeyboardEvent":"UIEvents";h[m]=["keyup","keydown","keypress"],h.MouseEvents=["click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave"],t(h,function(t,e){if(e.length)for(var n=0,r=e.length;r>n;n++)d[e[n]]=t});var v={propertychange:!0},y=a&&function(){for(var t=3,e=a.createElement("div"),n=e.getElementsByTagName("i");e.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->",n[0];);return t>4?t:i}(),b=6===y,x=7===y,w=/\S+/g;return{fieldsIncludedWithJsonPost:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],arrayForEach:function(t,e){for(var n=0,r=t.length;r>n;n++)e(t[n],n)},arrayIndexOf:function(t,e){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(t,e);for(var n=0,r=t.length;r>n;n++)if(t[n]===e)return n;return-1},arrayFirst:function(t,e,n){for(var r=0,i=t.length;i>r;r++)if(e.call(n,t[r],r))return t[r];return null},arrayRemoveItem:function(t,e){var n=g.utils.arrayIndexOf(t,e);n>0?t.splice(n,1):0===n&&t.shift()},arrayGetDistinctValues:function(t){t=t||[];for(var e=[],n=0,r=t.length;r>n;n++)g.utils.arrayIndexOf(e,t[n])<0&&e.push(t[n]);return e},arrayMap:function(t,e){t=t||[];for(var n=[],r=0,i=t.length;i>r;r++)n.push(e(t[r],r));return n},arrayFilter:function(t,e){t=t||[];for(var n=[],r=0,i=t.length;i>r;r++)e(t[r],r)&&n.push(t[r]);return n},arrayPushAll:function(t,e){if(e instanceof Array)t.push.apply(t,e);else for(var n=0,r=e.length;r>n;n++)t.push(e[n]);return t},addOrRemoveItem:function(t,e,n){var r=g.utils.arrayIndexOf(g.utils.peekObservable(t),e);0>r?n&&t.push(e):n||t.splice(r,1)},canSetPrototype:p,extend:e,setPrototypeOf:n,setPrototypeOfOrExtend:p?n:e,objectForEach:t,objectMap:function(t,e){if(!t)return t;var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r],r,t));return n},emptyDomNode:function(t){for(;t.firstChild;)g.removeNode(t.firstChild)},moveCleanedNodesToContainerElement:function(t){for(var e=g.utils.makeArray(t),n=e[0]&&e[0].ownerDocument||a,r=n.createElement("div"),i=0,o=e.length;o>i;i++)r.appendChild(g.cleanNode(e[i]));return r},cloneNodes:function(t,e){for(var n=0,r=t.length,i=[];r>n;n++){var o=t[n].cloneNode(!0);i.push(e?g.cleanNode(o):o)}return i},setDomNodeChildren:function(t,e){if(g.utils.emptyDomNode(t),e)for(var n=0,r=e.length;r>n;n++)t.appendChild(e[n])},replaceDomNodes:function(t,e){var n=t.nodeType?[t]:t;if(n.length>0){for(var r=n[0],i=r.parentNode,o=0,a=e.length;a>o;o++)i.insertBefore(e[o],r);for(var o=0,a=n.length;a>o;o++)g.removeNode(n[o])}},fixUpContinuousNodeArray:function(t,e){if(t.length){for(e=8===e.nodeType&&e.parentNode||e;t.length&&t[0].parentNode!==e;)t.splice(0,1);if(t.length>1){var n=t[0],r=t[t.length-1];for(t.length=0;n!==r;)if(t.push(n),n=n.nextSibling,!n)return;t.push(r)}}return t},setOptionNodeSelectionState:function(t,e){7>y?t.setAttribute("selected",e):t.selected=e},stringTrim:function(t){return null===t||t===i?"":t.trim?t.trim():t.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},stringStartsWith:function(t,e){return t=t||"",e.length>t.length?!1:t.substring(0,e.length)===e},domNodeIsContainedBy:function(t,e){if(t===e)return!0;if(11===t.nodeType)return!1;if(e.contains)return e.contains(3===t.nodeType?t.parentNode:t);if(e.compareDocumentPosition)return 16==(16&e.compareDocumentPosition(t));for(;t&&t!=e;)t=t.parentNode;return!!t},domNodeIsAttachedToDocument:function(t){return g.utils.domNodeIsContainedBy(t,t.ownerDocument.documentElement)},anyDomNodeIsAttachedToDocument:function(t){return!!g.utils.arrayFirst(t,g.utils.domNodeIsAttachedToDocument)},tagNameLower:function(t){return t&&t.tagName&&t.tagName.toLowerCase()},registerEventHandler:function(t,e,n){var r=y&&v[e];if(!r&&s)s(t).bind(e,n);else if(r||"function"!=typeof t.addEventListener){if("undefined"==typeof t.attachEvent)throw new Error("Browser doesn't support addEventListener or attachEvent");var i=function(e){n.call(t,e)},o="on"+e;t.attachEvent(o,i),g.utils.domNodeDisposal.addDisposeCallback(t,function(){t.detachEvent(o,i)})}else t.addEventListener(e,n,!1)},triggerEvent:function(t,e){if(!t||!t.nodeType)throw new Error("element must be a DOM node when calling triggerEvent");var n=r(t,e);if(s&&!n)s(t).trigger(e);else if("function"==typeof a.createEvent){if("function"!=typeof t.dispatchEvent)throw new Error("The supplied element doesn't support dispatchEvent");var i=d[e]||"HTMLEvents",u=a.createEvent(i);u.initEvent(e,!0,!0,o,0,0,0,0,0,!1,!1,!1,!1,0,t),t.dispatchEvent(u)}else if(n&&t.click)t.click();else{if("undefined"==typeof t.fireEvent)throw new Error("Browser doesn't support triggering events");t.fireEvent("on"+e)}},unwrapObservable:function(t){return g.isObservable(t)?t():t},peekObservable:function(t){return g.isObservable(t)?t.peek():t},toggleDomNodeCssClass:c,setTextContent:function(t,e){var n=g.utils.unwrapObservable(e);(null===n||n===i)&&(n="");var r=g.virtualElements.firstChild(t);!r||3!=r.nodeType||g.virtualElements.nextSibling(r)?g.virtualElements.setDomNodeChildren(t,[t.ownerDocument.createTextNode(n)]):r.data=n,g.utils.forceRefresh(t)},setElementName:function(t,e){if(t.name=e,7>=y)try{t.mergeAttributes(a.createElement("<input name='"+t.name+"'/>"),!1)
}catch(n){}},forceRefresh:function(t){if(y>=9){var e=1==t.nodeType?t:t.parentNode;e.style&&(e.style.zoom=e.style.zoom)}},ensureSelectElementIsRenderedCorrectly:function(t){if(y){var e=t.style.width;t.style.width=0,t.style.width=e}},range:function(t,e){t=g.utils.unwrapObservable(t),e=g.utils.unwrapObservable(e);for(var n=[],r=t;e>=r;r++)n.push(r);return n},makeArray:function(t){for(var e=[],n=0,r=t.length;r>n;n++)e.push(t[n]);return e},isIe6:b,isIe7:x,ieVersion:y,getFormFields:function(t,e){for(var n=g.utils.makeArray(t.getElementsByTagName("input")).concat(g.utils.makeArray(t.getElementsByTagName("textarea"))),r="string"==typeof e?function(t){return t.name===e}:function(t){return e.test(t.name)},i=[],o=n.length-1;o>=0;o--)r(n[o])&&i.push(n[o]);return i},parseJson:function(t){return"string"==typeof t&&(t=g.utils.stringTrim(t))?l&&l.parse?l.parse(t):new Function("return "+t)():null},stringifyJson:function(t,e,n){if(!l||!l.stringify)throw new Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return l.stringify(g.utils.unwrapObservable(t),e,n)},postJson:function(e,n,r){r=r||{};var i=r.params||{},o=r.includeFields||this.fieldsIncludedWithJsonPost,u=e;if("object"==typeof e&&"form"===g.utils.tagNameLower(e)){var s=e;u=s.action;for(var l=o.length-1;l>=0;l--)for(var c=g.utils.getFormFields(s,o[l]),f=c.length-1;f>=0;f--)i[c[f].name]=c[f].value}n=g.utils.unwrapObservable(n);var p=a.createElement("form");p.style.display="none",p.action=u,p.method="post";for(var h in n){var d=a.createElement("input");d.type="hidden",d.name=h,d.value=g.utils.stringifyJson(g.utils.unwrapObservable(n[h])),p.appendChild(d)}t(i,function(t,e){var n=a.createElement("input");n.type="hidden",n.name=t,n.value=e,p.appendChild(n)}),a.body.appendChild(p),r.submitter?r.submitter(p):p.submit(),setTimeout(function(){p.parentNode.removeChild(p)},0)}}}(),g.exportSymbol("utils",g.utils),g.exportSymbol("utils.arrayForEach",g.utils.arrayForEach),g.exportSymbol("utils.arrayFirst",g.utils.arrayFirst),g.exportSymbol("utils.arrayFilter",g.utils.arrayFilter),g.exportSymbol("utils.arrayGetDistinctValues",g.utils.arrayGetDistinctValues),g.exportSymbol("utils.arrayIndexOf",g.utils.arrayIndexOf),g.exportSymbol("utils.arrayMap",g.utils.arrayMap),g.exportSymbol("utils.arrayPushAll",g.utils.arrayPushAll),g.exportSymbol("utils.arrayRemoveItem",g.utils.arrayRemoveItem),g.exportSymbol("utils.extend",g.utils.extend),g.exportSymbol("utils.fieldsIncludedWithJsonPost",g.utils.fieldsIncludedWithJsonPost),g.exportSymbol("utils.getFormFields",g.utils.getFormFields),g.exportSymbol("utils.peekObservable",g.utils.peekObservable),g.exportSymbol("utils.postJson",g.utils.postJson),g.exportSymbol("utils.parseJson",g.utils.parseJson),g.exportSymbol("utils.registerEventHandler",g.utils.registerEventHandler),g.exportSymbol("utils.stringifyJson",g.utils.stringifyJson),g.exportSymbol("utils.range",g.utils.range),g.exportSymbol("utils.toggleDomNodeCssClass",g.utils.toggleDomNodeCssClass),g.exportSymbol("utils.triggerEvent",g.utils.triggerEvent),g.exportSymbol("utils.unwrapObservable",g.utils.unwrapObservable),g.exportSymbol("utils.objectForEach",g.utils.objectForEach),g.exportSymbol("utils.addOrRemoveItem",g.utils.addOrRemoveItem),g.exportSymbol("utils.setTextContent",g.utils.setTextContent),g.exportSymbol("unwrap",g.utils.unwrapObservable),Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if(1===arguments.length)return function(){return e.apply(t,arguments)};var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice(0);return r.push.apply(r,arguments),e.apply(t,r)}}),g.utils.domData=new function(){function t(t,o){var a=t[n],u=a&&"null"!==a&&r[a];if(!u){if(!o)return i;a=t[n]="ko"+e++,r[a]={}}return r[a]}var e=0,n="__ko__"+(new Date).getTime(),r={};return{get:function(e,n){var r=t(e,!1);return r===i?i:r[n]},set:function(e,n,r){if(r!==i||t(e,!1)!==i){var o=t(e,!0);o[n]=r}},clear:function(t){var e=t[n];return e?(delete r[e],t[n]=null,!0):!1},nextKey:function(){return e++ +n}}},g.exportSymbol("utils.domData",g.utils.domData),g.exportSymbol("utils.domData.clear",g.utils.domData.clear),g.utils.domNodeDisposal=new function(){function t(t,e){var n=g.utils.domData.get(t,o);return n===i&&e&&(n=[],g.utils.domData.set(t,o,n)),n}function e(t){g.utils.domData.set(t,o,i)}function n(e){var n=t(e,!1);if(n){n=n.slice(0);for(var i=0;i<n.length;i++)n[i](e)}g.utils.domData.clear(e),g.utils.domNodeDisposal.cleanExternalData(e),u[e.nodeType]&&r(e)}function r(t){for(var e,r=t.firstChild;e=r;)r=e.nextSibling,8===e.nodeType&&n(e)}var o=g.utils.domData.nextKey(),a={1:!0,8:!0,9:!0},u={1:!0,9:!0};return{addDisposeCallback:function(e,n){if("function"!=typeof n)throw new Error("Callback must be a function");t(e,!0).push(n)},removeDisposeCallback:function(n,r){var i=t(n,!1);i&&(g.utils.arrayRemoveItem(i,r),0==i.length&&e(n))},cleanNode:function(t){if(a[t.nodeType]&&(n(t),u[t.nodeType])){var e=[];g.utils.arrayPushAll(e,t.getElementsByTagName("*"));for(var r=0,i=e.length;i>r;r++)n(e[r])}return t},removeNode:function(t){g.cleanNode(t),t.parentNode&&t.parentNode.removeChild(t)},cleanExternalData:function(t){s&&"function"==typeof s.cleanData&&s.cleanData([t])}}},g.cleanNode=g.utils.domNodeDisposal.cleanNode,g.removeNode=g.utils.domNodeDisposal.removeNode,g.exportSymbol("cleanNode",g.cleanNode),g.exportSymbol("removeNode",g.removeNode),g.exportSymbol("utils.domNodeDisposal",g.utils.domNodeDisposal),g.exportSymbol("utils.domNodeDisposal.addDisposeCallback",g.utils.domNodeDisposal.addDisposeCallback),g.exportSymbol("utils.domNodeDisposal.removeDisposeCallback",g.utils.domNodeDisposal.removeDisposeCallback),function(){function t(t,e){e||(e=a);var n=e.parentWindow||e.defaultView||o,r=g.utils.stringTrim(t).toLowerCase(),i=e.createElement("div"),u=r.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!r.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!r.indexOf("<td")||!r.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""],s="ignored<div>"+u[1]+t+u[2]+"</div>";for("function"==typeof n.innerShiv?i.appendChild(n.innerShiv(s)):i.innerHTML=s;u[0]--;)i=i.lastChild;return g.utils.makeArray(i.lastChild.childNodes)}function e(t,e){if(s.parseHTML)return s.parseHTML(t,e)||[];var n=s.clean([t],e);if(n&&n[0]){for(var r=n[0];r.parentNode&&11!==r.parentNode.nodeType;)r=r.parentNode;r.parentNode&&r.parentNode.removeChild(r)}return n}g.utils.parseHtmlFragment=function(n,r){return s?e(n,r):t(n,r)},g.utils.setHtml=function(t,e){if(g.utils.emptyDomNode(t),e=g.utils.unwrapObservable(e),null!==e&&e!==i)if("string"!=typeof e&&(e=e.toString()),s)s(t).html(e);else for(var n=g.utils.parseHtmlFragment(e,t.ownerDocument),r=0;r<n.length;r++)t.appendChild(n[r])}}(),g.exportSymbol("utils.parseHtmlFragment",g.utils.parseHtmlFragment),g.exportSymbol("utils.setHtml",g.utils.setHtml),g.memoization=function(){function t(){return(4294967296*(1+Math.random())|0).toString(16).substring(1)}function e(){return t()+t()}function n(t,e){if(t)if(8==t.nodeType){var r=g.memoization.parseMemoText(t.nodeValue);null!=r&&e.push({domNode:t,memoId:r})}else if(1==t.nodeType)for(var i=0,o=t.childNodes,a=o.length;a>i;i++)n(o[i],e)}var r={};return{memoize:function(t){if("function"!=typeof t)throw new Error("You can only pass a function to ko.memoization.memoize()");var n=e();return r[n]=t,"<!--[ko_memo:"+n+"]-->"},unmemoize:function(t,e){var n=r[t];if(n===i)throw new Error("Couldn't find any memo with ID "+t+". Perhaps it's already been unmemoized.");try{return n.apply(null,e||[]),!0}finally{delete r[t]}},unmemoizeDomNodeAndDescendants:function(t,e){var r=[];n(t,r);for(var i=0,o=r.length;o>i;i++){var a=r[i].domNode,u=[a];e&&g.utils.arrayPushAll(u,e),g.memoization.unmemoize(r[i].memoId,u),a.nodeValue="",a.parentNode&&a.parentNode.removeChild(a)}},parseMemoText:function(t){var e=t.match(/^\[ko_memo\:(.*?)\]$/);return e?e[1]:null}}}(),g.exportSymbol("memoization",g.memoization),g.exportSymbol("memoization.memoize",g.memoization.memoize),g.exportSymbol("memoization.unmemoize",g.memoization.unmemoize),g.exportSymbol("memoization.parseMemoText",g.memoization.parseMemoText),g.exportSymbol("memoization.unmemoizeDomNodeAndDescendants",g.memoization.unmemoizeDomNodeAndDescendants),g.extenders={throttle:function(t,e){t.throttleEvaluation=e;var n=null;return g.dependentObservable({read:t,write:function(r){clearTimeout(n),n=setTimeout(function(){t(r)},e)}})},rateLimit:function(t,e){var n,r,i;"number"==typeof e?n=e:(n=e.timeout,r=e.method),i="notifyWhenChangesStop"==r?f:c,t.limit(function(t){return i(t,n)})},notify:function(t,e){t.equalityComparer="always"==e?null:n}};var m={undefined:1,"boolean":1,number:1,string:1};g.exportSymbol("extenders",g.extenders),g.subscription=function(t,e,n){this._target=t,this.callback=e,this.disposeCallback=n,this.isDisposed=!1,g.exportProperty(this,"dispose",this.dispose)},g.subscription.prototype.dispose=function(){this.isDisposed=!0,this.disposeCallback()},g.subscribable=function(){g.utils.setPrototypeOfOrExtend(this,g.subscribable.fn),this._subscriptions={},this._versionNumber=1};var v="change",y={subscribe:function(t,e,n){var r=this;n=n||v;var i=e?t.bind(e):t,o=new g.subscription(r,i,function(){g.utils.arrayRemoveItem(r._subscriptions[n],o),r.afterSubscriptionRemove&&r.afterSubscriptionRemove(n)});return r.beforeSubscriptionAdd&&r.beforeSubscriptionAdd(n),r._subscriptions[n]||(r._subscriptions[n]=[]),r._subscriptions[n].push(o),o},notifySubscribers:function(t,e){if(e=e||v,e===v&&this.updateVersion(),this.hasSubscriptionsForEvent(e))try{g.dependencyDetection.begin();for(var n,r=this._subscriptions[e].slice(0),i=0;n=r[i];++i)n.isDisposed||n.callback(t)}finally{g.dependencyDetection.end()}},getVersion:function(){return this._versionNumber},hasChanged:function(t){return this.getVersion()!==t},updateVersion:function(){++this._versionNumber},limit:function(t){var e,n,r,i=this,o=g.isObservable(i),a="beforeChange";i._origNotifySubscribers||(i._origNotifySubscribers=i.notifySubscribers,i.notifySubscribers=function(t,e){e&&e!==v?e===a?i._rateLimitedBeforeChange(t):i._origNotifySubscribers(t,e):i._rateLimitedChange(t)});var u=t(function(){o&&r===i&&(r=i()),e=!1,i.isDifferent(n,r)&&i._origNotifySubscribers(n=r)});i._rateLimitedChange=function(t){e=!0,r=t,u()},i._rateLimitedBeforeChange=function(t){e||(n=t,i._origNotifySubscribers(t,a))}},hasSubscriptionsForEvent:function(t){return this._subscriptions[t]&&this._subscriptions[t].length},getSubscriptionsCount:function(t){if(t)return this._subscriptions[t]&&this._subscriptions[t].length||0;var e=0;return g.utils.objectForEach(this._subscriptions,function(t,n){e+=n.length}),e},isDifferent:function(t,e){return!this.equalityComparer||!this.equalityComparer(t,e)},extend:p};g.exportProperty(y,"subscribe",y.subscribe),g.exportProperty(y,"extend",y.extend),g.exportProperty(y,"getSubscriptionsCount",y.getSubscriptionsCount),g.utils.canSetPrototype&&g.utils.setPrototypeOf(y,Function.prototype),g.subscribable.fn=y,g.isSubscribable=function(t){return null!=t&&"function"==typeof t.subscribe&&"function"==typeof t.notifySubscribers},g.exportSymbol("subscribable",g.subscribable),g.exportSymbol("isSubscribable",g.isSubscribable),g.computedContext=g.dependencyDetection=function(){function t(){return++o}function e(t){i.push(r),r=t}function n(){r=i.pop()}var r,i=[],o=0;return{begin:e,end:n,registerDependency:function(e){if(r){if(!g.isSubscribable(e))throw new Error("Only subscribable things can act as dependencies");r.callback(e,e._id||(e._id=t()))}},ignore:function(t,r,i){try{return e(),t.apply(r,i||[])}finally{n()}},getDependenciesCount:function(){return r?r.computed.getDependenciesCount():void 0},isInitial:function(){return r?r.isInitial:void 0}}}(),g.exportSymbol("computedContext",g.computedContext),g.exportSymbol("computedContext.getDependenciesCount",g.computedContext.getDependenciesCount),g.exportSymbol("computedContext.isInitial",g.computedContext.isInitial),g.exportSymbol("computedContext.isSleeping",g.computedContext.isSleeping),g.exportSymbol("ignoreDependencies",g.ignoreDependencies=g.dependencyDetection.ignore),g.observable=function(t){function e(){return arguments.length>0?(e.isDifferent(n,arguments[0])&&(e.valueWillMutate(),n=arguments[0],r&&(e._latestValue=n),e.valueHasMutated()),this):(g.dependencyDetection.registerDependency(e),n)}var n=t;return g.subscribable.call(e),g.utils.setPrototypeOfOrExtend(e,g.observable.fn),r&&(e._latestValue=n),e.peek=function(){return n},e.valueHasMutated=function(){e.notifySubscribers(n)},e.valueWillMutate=function(){e.notifySubscribers(n,"beforeChange")},g.exportProperty(e,"peek",e.peek),g.exportProperty(e,"valueHasMutated",e.valueHasMutated),g.exportProperty(e,"valueWillMutate",e.valueWillMutate),e},g.observable.fn={equalityComparer:n};var b=g.observable.protoProperty="__ko_proto__";g.observable.fn[b]=g.observable,g.utils.canSetPrototype&&g.utils.setPrototypeOf(g.observable.fn,g.subscribable.fn),g.hasPrototype=function(t,e){return null===t||t===i||t[b]===i?!1:t[b]===e?!0:g.hasPrototype(t[b],e)},g.isObservable=function(t){return g.hasPrototype(t,g.observable)},g.isWriteableObservable=function(t){return"function"==typeof t&&t[b]===g.observable?!0:"function"==typeof t&&t[b]===g.dependentObservable&&t.hasWriteFunction?!0:!1},g.exportSymbol("observable",g.observable),g.exportSymbol("isObservable",g.isObservable),g.exportSymbol("isWriteableObservable",g.isWriteableObservable),g.exportSymbol("isWritableObservable",g.isWriteableObservable),g.observableArray=function(t){if(t=t||[],"object"!=typeof t||!("length"in t))throw new Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");var e=g.observable(t);return g.utils.setPrototypeOfOrExtend(e,g.observableArray.fn),e.extend({trackArrayChanges:!0})},g.observableArray.fn={remove:function(t){for(var e=this.peek(),n=[],r="function"!=typeof t||g.isObservable(t)?function(e){return e===t}:t,i=0;i<e.length;i++){var o=e[i];r(o)&&(0===n.length&&this.valueWillMutate(),n.push(o),e.splice(i,1),i--)}return n.length&&this.valueHasMutated(),n},removeAll:function(t){if(t===i){var e=this.peek(),n=e.slice(0);return this.valueWillMutate(),e.splice(0,e.length),this.valueHasMutated(),n}return t?this.remove(function(e){return g.utils.arrayIndexOf(t,e)>=0}):[]},destroy:function(t){var e=this.peek(),n="function"!=typeof t||g.isObservable(t)?function(e){return e===t}:t;this.valueWillMutate();for(var r=e.length-1;r>=0;r--){var i=e[r];n(i)&&(e[r]._destroy=!0)}this.valueHasMutated()},destroyAll:function(t){return t===i?this.destroy(function(){return!0}):t?this.destroy(function(e){return g.utils.arrayIndexOf(t,e)>=0}):[]},indexOf:function(t){var e=this();return g.utils.arrayIndexOf(e,t)},replace:function(t,e){var n=this.indexOf(t);n>=0&&(this.valueWillMutate(),this.peek()[n]=e,this.valueHasMutated())}},g.utils.arrayForEach(["pop","push","reverse","shift","sort","splice","unshift"],function(t){g.observableArray.fn[t]=function(){var e=this.peek();this.valueWillMutate(),this.cacheDiffForKnownOperation(e,t,arguments);var n=e[t].apply(e,arguments);return this.valueHasMutated(),n}}),g.utils.arrayForEach(["slice"],function(t){g.observableArray.fn[t]=function(){var e=this();return e[t].apply(e,arguments)}}),g.utils.canSetPrototype&&g.utils.setPrototypeOf(g.observableArray.fn,g.observable.fn),g.exportSymbol("observableArray",g.observableArray);var x="arrayChange";g.extenders.trackArrayChanges=function(t){function e(){if(!i){i=!0;var e=t.notifySubscribers;t.notifySubscribers=function(t,n){return n&&n!==v||++a,e.apply(this,arguments)};var u=[].concat(t.peek()||[]);o=null,r=t.subscribe(function(e){if(e=[].concat(e||[]),t.hasSubscriptionsForEvent(x))var r=n(u,e);u=e,o=null,a=0,r&&r.length&&t.notifySubscribers(r,x)})}}function n(t,e){return(!o||a>1)&&(o=g.utils.compareArrays(t,e,{sparse:!0})),o}if(!t.cacheDiffForKnownOperation){var r,i=!1,o=null,a=0,u=t.beforeSubscriptionAdd,s=t.afterSubscriptionRemove;t.beforeSubscriptionAdd=function(n){u&&u.call(t,n),n===x&&e()},t.afterSubscriptionRemove=function(e){s&&s.call(t,e),e!==x||t.hasSubscriptionsForEvent(x)||(r.dispose(),i=!1)},t.cacheDiffForKnownOperation=function(t,e,n){function r(t,e,n){return u[u.length]={status:t,value:e,index:n}}if(i&&!a){var u=[],s=t.length,l=n.length,c=0;switch(e){case"push":c=s;case"unshift":for(var f=0;l>f;f++)r("added",n[f],c+f);break;case"pop":c=s-1;case"shift":s&&r("deleted",t[c],c);break;case"splice":for(var p=Math.min(Math.max(0,n[0]<0?s+n[0]:n[0]),s),h=1===l?s:Math.min(p+(n[1]||0),s),d=p+l-2,m=Math.max(h,d),v=[],y=[],f=p,b=2;m>f;++f,++b)h>f&&y.push(r("deleted",t[f],f)),d>f&&v.push(r("added",n[b],f));g.utils.findMovesInArrayComparison(y,v);break;default:return}o=u}}}},g.computed=g.dependentObservable=function(t,e,n){function o(t,e,n){if(w&&e===c)throw Error("A 'pure' computed must not be called recursively");N[t]=n,n._order=A++,n._version=e.getVersion()}function a(){var t,e;for(t in N)if(N.hasOwnProperty(t)&&(e=N[t],e._target.hasChanged(e._version)))return!0}function u(){!M&&N&&g.utils.objectForEach(N,function(t,e){e.dispose&&e.dispose()}),N=null,A=0,b=!0,m=!1,M=!1}function s(){var t=c.throttleEvaluation;t&&t>=0?(clearTimeout(T),T=setTimeout(function(){l(!0)},t)):c._evalRateLimited?c._evalRateLimited():l(!0)}function l(t){if(!v&&!b){if(_&&_()){if(!y)return void C()}else y=!1;v=!0;try{var n=N,a=A,u=w?i:!A;g.dependencyDetection.begin({callback:function(t,e){b||(a&&n[e]?(o(e,t,n[e]),delete n[e],--a):N[e]||o(e,t,M?{_target:t}:t.subscribe(s)))},computed:c,isInitial:u}),N={},A=0;try{var l=e?x.call(e):x()}finally{g.dependencyDetection.end(),a&&!M&&g.utils.objectForEach(n,function(t,e){e.dispose&&e.dispose()}),m=!1}c.isDifferent(d,l)&&(M||h(d,"beforeChange"),d=l,r&&(c._latestValue=d),M?c.updateVersion():t&&h(d)),u&&h(d,"awake")}finally{v=!1}A||C()}}function c(){if(arguments.length>0){if("function"!=typeof k)throw new Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return k.apply(e,arguments),this}return g.dependencyDetection.registerDependency(c),(m||M&&a())&&l(),d}function f(){return(m&&!A||M&&a())&&l(),d}function p(){return m||A>0}function h(t,e){c.notifySubscribers(t,e)}var d,m=!0,v=!1,y=!1,b=!1,x=t,w=!1,M=!1;if(x&&"object"==typeof x?(n=x,x=n.read):(n=n||{},x||(x=n.read)),"function"!=typeof x)throw new Error("Pass a function that returns the value of the ko.computed");var k=n.write,E=n.disposeWhenNodeIsRemoved||n.disposeWhenNodeIsRemoved||null,S=n.disposeWhen||n.disposeWhen,_=S,C=u,N={},A=0,T=null;e||(e=n.owner),g.subscribable.call(c),g.utils.setPrototypeOfOrExtend(c,g.dependentObservable.fn),c.peek=f,c.getDependenciesCount=function(){return A},c.hasWriteFunction="function"==typeof k,c.dispose=function(){C()},c.isActive=p;var D=c.limit;return c.limit=function(t){D.call(c,t),c._evalRateLimited=function(){c._rateLimitedBeforeChange(d),m=!0,c._rateLimitedChange(c)}},n.pure?(w=!0,M=!0,c.beforeSubscriptionAdd=function(t){if(!b&&M&&"change"==t){if(M=!1,m||a())N=null,A=0,m=!0,l();else{var e=[];g.utils.objectForEach(N,function(t,n){e[n._order]=t}),g.utils.arrayForEach(e,function(t,e){var n=N[t],r=n._target.subscribe(s);r._order=e,r._version=n._version,N[t]=r})}b||h(d,"awake")}},c.afterSubscriptionRemove=function(t){b||"change"!=t||c.hasSubscriptionsForEvent("change")||(g.utils.objectForEach(N,function(t,e){e.dispose&&(N[t]={_target:e._target,_order:e._order,_version:e._version},e.dispose())}),M=!0,h(i,"asleep"))},c._originalGetVersion=c.getVersion,c.getVersion=function(){return M&&(m||a())&&l(),c._originalGetVersion()}):n.deferEvaluation&&(c.beforeSubscriptionAdd=function(t){("change"==t||"beforeChange"==t)&&f()}),g.exportProperty(c,"peek",c.peek),g.exportProperty(c,"dispose",c.dispose),g.exportProperty(c,"isActive",c.isActive),g.exportProperty(c,"getDependenciesCount",c.getDependenciesCount),E&&(y=!0,E.nodeType&&(_=function(){return!g.utils.domNodeIsAttachedToDocument(E)||S&&S()})),M||n.deferEvaluation||l(),E&&p()&&E.nodeType&&(C=function(){g.utils.domNodeDisposal.removeDisposeCallback(E,C),u()},g.utils.domNodeDisposal.addDisposeCallback(E,C)),c},g.isComputed=function(t){return g.hasPrototype(t,g.dependentObservable)};var w=g.observable.protoProperty;g.dependentObservable[w]=g.observable,g.dependentObservable.fn={equalityComparer:n},g.dependentObservable.fn[w]=g.dependentObservable,g.utils.canSetPrototype&&g.utils.setPrototypeOf(g.dependentObservable.fn,g.subscribable.fn),g.exportSymbol("dependentObservable",g.dependentObservable),g.exportSymbol("computed",g.dependentObservable),g.exportSymbol("isComputed",g.isComputed),g.pureComputed=function(t,e){return"function"==typeof t?g.computed(t,e,{pure:!0}):(t=g.utils.extend({},t),t.pure=!0,g.computed(t,e))},g.exportSymbol("pureComputed",g.pureComputed),function(){function t(r,o,a){a=a||new n,r=o(r);var u=!("object"!=typeof r||null===r||r===i||r instanceof Date||r instanceof String||r instanceof Number||r instanceof Boolean);if(!u)return r;var s=r instanceof Array?[]:{};return a.save(r,s),e(r,function(e){var n=o(r[e]);switch(typeof n){case"boolean":case"number":case"string":case"function":s[e]=n;break;case"object":case"undefined":var u=a.get(n);s[e]=u!==i?u:t(n,o,a)}}),s}function e(t,e){if(t instanceof Array){for(var n=0;n<t.length;n++)e(n);"function"==typeof t.toJSON&&e("toJSON")}else for(var r in t)e(r)}function n(){this.keys=[],this.values=[]}var r=10;g.toJS=function(e){if(0==arguments.length)throw new Error("When calling ko.toJS, pass the object you want to convert.");return t(e,function(t){for(var e=0;g.isObservable(t)&&r>e;e++)t=t();return t})},g.toJSON=function(t,e,n){var r=g.toJS(t);return g.utils.stringifyJson(r,e,n)},n.prototype={constructor:n,save:function(t,e){var n=g.utils.arrayIndexOf(this.keys,t);n>=0?this.values[n]=e:(this.keys.push(t),this.values.push(e))},get:function(t){var e=g.utils.arrayIndexOf(this.keys,t);return e>=0?this.values[e]:i}}}(),g.exportSymbol("toJS",g.toJS),g.exportSymbol("toJSON",g.toJSON),function(){var t="__ko__hasDomDataOptionValue__";g.selectExtensions={readValue:function(e){switch(g.utils.tagNameLower(e)){case"option":return e[t]===!0?g.utils.domData.get(e,g.bindingHandlers.options.optionValueDomDataKey):g.utils.ieVersion<=7?e.getAttributeNode("value")&&e.getAttributeNode("value").specified?e.value:e.text:e.value;case"select":return e.selectedIndex>=0?g.selectExtensions.readValue(e.options[e.selectedIndex]):i;default:return e.value}},writeValue:function(e,n,r){switch(g.utils.tagNameLower(e)){case"option":switch(typeof n){case"string":g.utils.domData.set(e,g.bindingHandlers.options.optionValueDomDataKey,i),t in e&&delete e[t],e.value=n;break;default:g.utils.domData.set(e,g.bindingHandlers.options.optionValueDomDataKey,n),e[t]=!0,e.value="number"==typeof n?n:""}break;case"select":(""===n||null===n)&&(n=i);for(var o,a=-1,u=0,s=e.options.length;s>u;++u)if(o=g.selectExtensions.readValue(e.options[u]),o==n||""==o&&n===i){a=u;break}(r||a>=0||n===i&&e.size>1)&&(e.selectedIndex=a);break;default:(null===n||n===i)&&(n=""),e.value=n}}}}(),g.exportSymbol("selectExtensions",g.selectExtensions),g.exportSymbol("selectExtensions.readValue",g.selectExtensions.readValue),g.exportSymbol("selectExtensions.writeValue",g.selectExtensions.writeValue),g.expressionRewriting=function(){function t(t){if(g.utils.arrayIndexOf(r,t)>=0)return!1;var e=t.match(i);return null===e?!1:e[1]?"Object("+e[1]+")"+e[2]:t}function e(t){var e=g.utils.stringTrim(t);123===e.charCodeAt(0)&&(e=e.slice(1,-1));var n,r=[],i=e.match(f),o=[],a=0;if(i){i.push(",");for(var u,s=0;u=i[s];++s){var l=u.charCodeAt(0);if(44===l){if(0>=a){r.push(n&&o.length?{key:n,value:o.join("")}:{unknown:n||o.join("")}),n=a=0,o=[];continue}}else if(58===l){if(!a&&!n&&1===o.length){n=o.pop();continue}}else if(47===l&&s&&u.length>1){var c=i[s-1].match(p);c&&!h[c[0]]&&(e=e.substr(e.indexOf(u)+1),i=e.match(f),i.push(","),s=-1,u="/")}else 40===l||123===l||91===l?++a:41===l||125===l||93===l?--a:n||o.length||34!==l&&39!==l||(u=u.slice(1,-1));o.push(u)}}return r}function n(n,r){function i(e,n){function r(t){return t&&t.preprocess?n=t.preprocess(n,e,i):!0}var l;if(!s){if(!r(g.getBindingHandler(e)))return;d[e]&&(l=t(n))&&a.push("'"+e+"':function(_z){"+l+"=_z}")}u&&(n="function(){return "+n+" }"),o.push("'"+e+"':"+n)}r=r||{};var o=[],a=[],u=r.valueAccessors,s=r.bindingParams,l="string"==typeof n?e(n):n;return g.utils.arrayForEach(l,function(t){i(t.key||t.unknown,t.value)}),a.length&&i("_ko_property_writers","{"+a.join(",")+" }"),o.join(",")}var r=["true","false","null","undefined"],i=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,o='"(?:[^"\\\\]|\\\\.)*"',a="'(?:[^'\\\\]|\\\\.)*'",u="/(?:[^/\\\\]|\\\\.)*/w*",s=",\"'{}()/:[\\]",l="[^\\s:,/][^"+s+"]*[^\\s"+s+"]",c="[^\\s]",f=RegExp(o+"|"+a+"|"+u+"|"+l+"|"+c,"g"),p=/[\])"'A-Za-z0-9_$]+$/,h={"in":1,"return":1,"typeof":1},d={};return{bindingRewriteValidators:[],twoWayBindings:d,parseObjectLiteral:e,preProcessBindings:n,keyValueArrayContainsKey:function(t,e){for(var n=0;n<t.length;n++)if(t[n].key==e)return!0;return!1},writeValueToProperty:function(t,e,n,r,i){if(t&&g.isObservable(t))!g.isWriteableObservable(t)||i&&t.peek()===r||t(r);else{var o=e.get("_ko_property_writers");o&&o[n]&&o[n](r)}}}}(),g.exportSymbol("expressionRewriting",g.expressionRewriting),g.exportSymbol("expressionRewriting.bindingRewriteValidators",g.expressionRewriting.bindingRewriteValidators),g.exportSymbol("expressionRewriting.parseObjectLiteral",g.expressionRewriting.parseObjectLiteral),g.exportSymbol("expressionRewriting.preProcessBindings",g.expressionRewriting.preProcessBindings),g.exportSymbol("expressionRewriting._twoWayBindings",g.expressionRewriting.twoWayBindings),g.exportSymbol("jsonExpressionRewriting",g.expressionRewriting),g.exportSymbol("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",g.expressionRewriting.preProcessBindings),function(){function t(t){return 8==t.nodeType&&u.test(o?t.text:t.nodeValue)}function e(t){return 8==t.nodeType&&s.test(o?t.text:t.nodeValue)}function n(n,r){for(var i=n,o=1,a=[];i=i.nextSibling;){if(e(i)&&(o--,0===o))return a;a.push(i),t(i)&&o++}if(!r)throw new Error("Cannot find closing comment tag to match: "+n.nodeValue);return null}function r(t,e){var r=n(t,e);return r?r.length>0?r[r.length-1].nextSibling:t.nextSibling:null}function i(n){var i=n.firstChild,o=null;if(i)do if(o)o.push(i);else if(t(i)){var a=r(i,!0);a?i=a:o=[i]}else e(i)&&(o=[i]);while(i=i.nextSibling);return o}var o=a&&"<!--test-->"===a.createComment("test").text,u=o?/^<!--\s*ko(?:\s+([\s\S]+))?\s*-->$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,s=o?/^<!--\s*\/ko\s*-->$/:/^\s*\/ko\s*$/,l={ul:!0,ol:!0};g.virtualElements={allowedBindings:{},childNodes:function(e){return t(e)?n(e):e.childNodes},emptyNode:function(e){if(t(e))for(var n=g.virtualElements.childNodes(e),r=0,i=n.length;i>r;r++)g.removeNode(n[r]);else g.utils.emptyDomNode(e)},setDomNodeChildren:function(e,n){if(t(e)){g.virtualElements.emptyNode(e);for(var r=e.nextSibling,i=0,o=n.length;o>i;i++)r.parentNode.insertBefore(n[i],r)}else g.utils.setDomNodeChildren(e,n)},prepend:function(e,n){t(e)?e.parentNode.insertBefore(n,e.nextSibling):e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)},insertAfter:function(e,n,r){r?t(e)?e.parentNode.insertBefore(n,r.nextSibling):r.nextSibling?e.insertBefore(n,r.nextSibling):e.appendChild(n):g.virtualElements.prepend(e,n)},firstChild:function(n){return t(n)?!n.nextSibling||e(n.nextSibling)?null:n.nextSibling:n.firstChild},nextSibling:function(n){return t(n)&&(n=r(n)),n.nextSibling&&e(n.nextSibling)?null:n.nextSibling},hasBindingValue:t,virtualNodeBindingValue:function(t){var e=(o?t.text:t.nodeValue).match(u);return e?e[1]:null},normaliseVirtualElementDomStructure:function(t){if(l[g.utils.tagNameLower(t)]){var e=t.firstChild;if(e)do if(1===e.nodeType){var n=i(e);if(n)for(var r=e.nextSibling,o=0;o<n.length;o++)r?t.insertBefore(n[o],r):t.appendChild(n[o])}while(e=e.nextSibling)}}}}(),g.exportSymbol("virtualElements",g.virtualElements),g.exportSymbol("virtualElements.allowedBindings",g.virtualElements.allowedBindings),g.exportSymbol("virtualElements.emptyNode",g.virtualElements.emptyNode),g.exportSymbol("virtualElements.insertAfter",g.virtualElements.insertAfter),g.exportSymbol("virtualElements.prepend",g.virtualElements.prepend),g.exportSymbol("virtualElements.setDomNodeChildren",g.virtualElements.setDomNodeChildren),function(){function t(t,n,r){var i=t+(r&&r.valueAccessors||"");return n[i]||(n[i]=e(t,r))}function e(t,e){var n=g.expressionRewriting.preProcessBindings(t,e),r="with($context){with($data||{}){return{"+n+"}}}";return new Function("$context","$element",r)}var n="data-bind";g.bindingProvider=function(){this.bindingCache={}},g.utils.extend(g.bindingProvider.prototype,{nodeHasBindings:function(t){switch(t.nodeType){case 1:return null!=t.getAttribute(n)||g.components.getComponentNameForNode(t);case 8:return g.virtualElements.hasBindingValue(t);default:return!1}},getBindings:function(t,e){var n=this.getBindingsString(t,e),r=n?this.parseBindingsString(n,e,t):null;return g.components.addBindingsForCustomElement(r,t,e,!1)},getBindingAccessors:function(t,e){var n=this.getBindingsString(t,e),r=n?this.parseBindingsString(n,e,t,{valueAccessors:!0}):null;return g.components.addBindingsForCustomElement(r,t,e,!0)},getBindingsString:function(t){switch(t.nodeType){case 1:return t.getAttribute(n);case 8:return g.virtualElements.virtualNodeBindingValue(t);default:return null}},parseBindingsString:function(e,n,r,i){try{var o=t(e,this.bindingCache,i);return o(n,r)}catch(a){throw a.message="Unable to parse bindings.\nBindings value: "+e+"\nMessage: "+a.message,a}}}),g.bindingProvider.instance=new g.bindingProvider}(),g.exportSymbol("bindingProvider",g.bindingProvider),function(){function t(t){return function(){return t}}function e(t){return t()}function n(t){return g.utils.objectMap(g.dependencyDetection.ignore(t),function(e,n){return function(){return t()[n]}})}function r(e,r,i){return"function"==typeof e?n(e.bind(null,r,i)):g.utils.objectMap(e,t)}function a(t,e){return n(this.getBindings.bind(this,t,e))}function u(t){var e=g.virtualElements.allowedBindings[t];if(!e)throw new Error("The binding '"+t+"' cannot be used with virtual elements")}function l(t,e,n){var r,i=g.virtualElements.firstChild(e),o=g.bindingProvider.instance,a=o.preprocessNode;if(a){for(;r=i;)i=g.virtualElements.nextSibling(r),a.call(o,r);i=g.virtualElements.firstChild(e)}for(;r=i;)i=g.virtualElements.nextSibling(r),c(t,r,n)}function c(t,e,n){var r=!0,i=1===e.nodeType;i&&g.virtualElements.normaliseVirtualElementDomStructure(e);var o=i&&n||g.bindingProvider.instance.nodeHasBindings(e);o&&(r=p(e,null,t,n).shouldBindDescendants),r&&!d[g.utils.tagNameLower(e)]&&l(t,e,!i)}function f(t){var e=[],n={},r=[];return g.utils.objectForEach(t,function i(o){if(!n[o]){var a=g.getBindingHandler(o);a&&(a.after&&(r.push(o),g.utils.arrayForEach(a.after,function(e){if(t[e]){if(-1!==g.utils.arrayIndexOf(r,e))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+r.join(", "));i(e)}}),r.length--),e.push({key:o,handler:a})),n[o]=!0}}),e}function p(t,n,r,o){function s(){return g.utils.objectMap(d?d():c,e)}var l=g.utils.domData.get(t,m);if(!n){if(l)throw Error("You cannot apply bindings multiple times to the same element.");g.utils.domData.set(t,m,!0)}!l&&o&&g.storedBindingContextForNode(t,r);var c;if(n&&"function"!=typeof n)c=n;else{var p=g.bindingProvider.instance,h=p.getBindingAccessors||a,d=g.dependentObservable(function(){return c=n?n(r,t):h.call(p,t,r),c&&r._subscribable&&r._subscribable(),c},null,{disposeWhenNodeIsRemoved:t});c&&d.isActive()||(d=null)}var v;if(c){var y=d?function(t){return function(){return e(d()[t])}}:function(t){return c[t]};s.get=function(t){return c[t]&&e(y(t))},s.has=function(t){return t in c};var b=f(c);g.utils.arrayForEach(b,function(e){var n=e.handler.init,o=e.handler.update,a=e.key;
8===t.nodeType&&u(a);try{"function"==typeof n&&g.dependencyDetection.ignore(function(){var e=n(t,y(a),s,r.$data,r);if(e&&e.controlsDescendantBindings){if(v!==i)throw new Error("Multiple bindings ("+v+" and "+a+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");v=a}}),"function"==typeof o&&g.dependentObservable(function(){o(t,y(a),s,r.$data,r)},null,{disposeWhenNodeIsRemoved:t})}catch(l){throw l.message='Unable to process binding "'+a+": "+c[a]+'"\nMessage: '+l.message,l}})}return{shouldBindDescendants:v===i}}function h(t){return t&&t instanceof g.bindingContext?t:new g.bindingContext(t)}g.bindingHandlers={};var d={script:!0,textarea:!0};g.getBindingHandler=function(t){return g.bindingHandlers[t]},g.bindingContext=function(t,e,n,r){function o(){var i=l?t():t,o=g.utils.unwrapObservable(i);return e?(e._subscribable&&e._subscribable(),g.utils.extend(s,e),c&&(s._subscribable=c)):(s.$parents=[],s.$root=o,s.ko=g),s.$rawData=i,s.$data=o,n&&(s[n]=o),r&&r(s,e,o),s.$data}function a(){return u&&!g.utils.anyDomNodeIsAttachedToDocument(u)}var u,s=this,l="function"==typeof t&&!g.isObservable(t),c=g.dependentObservable(o,null,{disposeWhen:a,disposeWhenNodeIsRemoved:!0});c.isActive()&&(s._subscribable=c,c.equalityComparer=null,u=[],c._addNode=function(t){u.push(t),g.utils.domNodeDisposal.addDisposeCallback(t,function(t){g.utils.arrayRemoveItem(u,t),u.length||(c.dispose(),s._subscribable=c=i)})})},g.bindingContext.prototype.createChildContext=function(t,e,n){return new g.bindingContext(t,this,e,function(t,e){t.$parentContext=e,t.$parent=e.$data,t.$parents=(e.$parents||[]).slice(0),t.$parents.unshift(t.$parent),n&&n(t)})},g.bindingContext.prototype.extend=function(t){return new g.bindingContext(this._subscribable||this.$data,this,null,function(e,n){e.$rawData=n.$rawData,g.utils.extend(e,"function"==typeof t?t():t)})};var m=g.utils.domData.nextKey(),v=g.utils.domData.nextKey();g.storedBindingContextForNode=function(t,e){return 2!=arguments.length?g.utils.domData.get(t,v):(g.utils.domData.set(t,v,e),void(e._subscribable&&e._subscribable._addNode(t)))},g.applyBindingAccessorsToNode=function(t,e,n){return 1===t.nodeType&&g.virtualElements.normaliseVirtualElementDomStructure(t),p(t,e,h(n),!0)},g.applyBindingsToNode=function(t,e,n){var i=h(n);return g.applyBindingAccessorsToNode(t,r(e,i,t),i)},g.applyBindingsToDescendants=function(t,e){(1===e.nodeType||8===e.nodeType)&&l(h(t),e,!0)},g.applyBindings=function(t,e){if(!s&&o.jQuery&&(s=o.jQuery),e&&1!==e.nodeType&&8!==e.nodeType)throw new Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");e=e||o.document.body,c(h(t),e,!0)},g.contextFor=function(t){switch(t.nodeType){case 1:case 8:var e=g.storedBindingContextForNode(t);if(e)return e;if(t.parentNode)return g.contextFor(t.parentNode)}return i},g.dataFor=function(t){var e=g.contextFor(t);return e?e.$data:i},g.exportSymbol("bindingHandlers",g.bindingHandlers),g.exportSymbol("applyBindings",g.applyBindings),g.exportSymbol("applyBindingsToDescendants",g.applyBindingsToDescendants),g.exportSymbol("applyBindingAccessorsToNode",g.applyBindingAccessorsToNode),g.exportSymbol("applyBindingsToNode",g.applyBindingsToNode),g.exportSymbol("contextFor",g.contextFor),g.exportSymbol("dataFor",g.dataFor)}(),function(t){function e(e,n){return e.hasOwnProperty(n)?e[n]:t}function n(t,n){var i,u=e(o,t);u?u.subscribe(n):(u=o[t]=new g.subscribable,u.subscribe(n),r(t,function(e,n){var r=!(!n||!n.synchronous);a[t]={definition:e,isSynchronousComponent:r},delete o[t],i||r?u.notifySubscribers(e):setTimeout(function(){u.notifySubscribers(e)},0)}),i=!0)}function r(t,e){i("getConfig",[t],function(n){n?i("loadComponent",[t,n],function(t){e(t,n)}):e(null,null)})}function i(e,n,r,o){o||(o=g.components.loaders.slice(0));var a=o.shift();if(a){var u=a[e];if(u){var s=!1,l=u.apply(a,n.concat(function(t){s?r(null):null!==t?r(t):i(e,n,r,o)}));if(l!==t&&(s=!0,!a.suppressLoaderExceptions))throw new Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.")}else i(e,n,r,o)}else r(null)}var o={},a={};g.components={get:function(t,r){var i=e(a,t);i?i.isSynchronousComponent?g.dependencyDetection.ignore(function(){r(i.definition)}):setTimeout(function(){r(i.definition)},0):n(t,r)},clearCachedDefinition:function(t){delete a[t]},_getFirstResultFromLoaders:i},g.components.loaders=[],g.exportSymbol("components",g.components),g.exportSymbol("components.get",g.components.get),g.exportSymbol("components.clearCachedDefinition",g.components.clearCachedDefinition)}(),function(){function t(t,e,n,r){var i={},o=2,a=function(){0===--o&&r(i)},u=n.template,s=n.viewModel;u?l(e,u,function(e){g.components._getFirstResultFromLoaders("loadTemplate",[t,e],function(t){i.template=t,a()})}):a(),s?l(e,s,function(e){g.components._getFirstResultFromLoaders("loadViewModel",[t,e],function(t){i[p]=t,a()})}):a()}function n(t,e,n){if("string"==typeof e)n(g.utils.parseHtmlFragment(e));else if(e instanceof Array)n(e);else if(s(e))n(g.utils.makeArray(e.childNodes));else if(e.element){var r=e.element;if(u(r))n(i(r));else if("string"==typeof r){var o=a.getElementById(r);o?n(i(o)):t("Cannot find element with ID "+r)}else t("Unknown element type: "+r)}else t("Unknown template value: "+e)}function r(t,e,n){if("function"==typeof e)n(function(t){return new e(t)});else if("function"==typeof e[p])n(e[p]);else if("instance"in e){var i=e.instance;n(function(){return i})}else"viewModel"in e?r(t,e.viewModel,n):t("Unknown viewModel value: "+e)}function i(t){switch(g.utils.tagNameLower(t)){case"script":return g.utils.parseHtmlFragment(t.text);case"textarea":return g.utils.parseHtmlFragment(t.value);case"template":if(s(t.content))return g.utils.cloneNodes(t.content.childNodes)}return g.utils.cloneNodes(t.childNodes)}function u(t){return o.HTMLElement?t instanceof HTMLElement:t&&t.tagName&&1===t.nodeType}function s(t){return o.DocumentFragment?t instanceof DocumentFragment:t&&11===t.nodeType}function l(t,n,r){"string"==typeof n.require?e||o.require?(e||o.require)([n.require],r):t("Uses require, but no AMD loader is present"):r(n)}function c(t){return function(e){throw new Error("Component '"+t+"': "+e)}}var f={};g.components.register=function(t,e){if(!e)throw new Error("Invalid configuration for "+t);if(g.components.isRegistered(t))throw new Error("Component "+t+" is already registered");f[t]=e},g.components.isRegistered=function(t){return t in f},g.components.unregister=function(t){delete f[t],g.components.clearCachedDefinition(t)},g.components.defaultLoader={getConfig:function(t,e){var n=f.hasOwnProperty(t)?f[t]:null;e(n)},loadComponent:function(e,n,r){var i=c(e);l(i,n,function(n){t(e,i,n,r)})},loadTemplate:function(t,e,r){n(c(t),e,r)},loadViewModel:function(t,e,n){r(c(t),e,n)}};var p="createViewModel";g.exportSymbol("components.register",g.components.register),g.exportSymbol("components.isRegistered",g.components.isRegistered),g.exportSymbol("components.unregister",g.components.unregister),g.exportSymbol("components.defaultLoader",g.components.defaultLoader),g.components.loaders.push(g.components.defaultLoader),g.components._allRegisteredComponents=f}(),function(){function t(t,n){var r=t.getAttribute("params");if(r){var i=e.parseBindingsString(r,n,t,{valueAccessors:!0,bindingParams:!0}),o=g.utils.objectMap(i,function(e){return g.computed(e,null,{disposeWhenNodeIsRemoved:t})}),a=g.utils.objectMap(o,function(e){var n=e.peek();return e.isActive()?g.computed({read:function(){return g.utils.unwrapObservable(e())},write:g.isWriteableObservable(n)&&function(t){e()(t)},disposeWhenNodeIsRemoved:t}):n});return a.hasOwnProperty("$raw")||(a.$raw=o),a}return{$raw:{}}}g.components.getComponentNameForNode=function(t){var e=g.utils.tagNameLower(t);return g.components.isRegistered(e)&&e},g.components.addBindingsForCustomElement=function(e,n,r,i){if(1===n.nodeType){var o=g.components.getComponentNameForNode(n);if(o){if(e=e||{},e.component)throw new Error('Cannot use the "component" binding on a custom element matching a component');var a={name:o,params:t(n,r)};e.component=i?function(){return a}:a}}return e};var e=new g.bindingProvider;g.utils.ieVersion<9&&(g.components.register=function(t){return function(e){return a.createElement(e),t.apply(this,arguments)}}(g.components.register),a.createDocumentFragment=function(t){return function(){var e=t(),n=g.components._allRegisteredComponents;for(var r in n)n.hasOwnProperty(r)&&e.createElement(r);return e}}(a.createDocumentFragment))}(),function(t){function e(t,e,n){var r=e.template;if(!r)throw new Error("Component '"+t+"' has no template");var i=g.utils.cloneNodes(r);g.virtualElements.setDomNodeChildren(n,i)}function n(t,e,n,r){var i=t.createViewModel;return i?i.call(t,r,{element:e,templateNodes:n}):r}var r=0;g.bindingHandlers.component={init:function(i,o,a,u,s){var l,c,f=function(){var t=l&&l.dispose;"function"==typeof t&&t.call(l),c=null},p=g.utils.makeArray(g.virtualElements.childNodes(i));return g.utils.domNodeDisposal.addDisposeCallback(i,f),g.computed(function(){var a,u,h=g.utils.unwrapObservable(o());if("string"==typeof h?a=h:(a=g.utils.unwrapObservable(h.name),u=g.utils.unwrapObservable(h.params)),!a)throw new Error("No component name specified");var d=c=++r;g.components.get(a,function(r){if(c===d){if(f(),!r)throw new Error("Unknown component '"+a+"'");e(a,r,i);var o=n(r,i,p,u),h=s.createChildContext(o,t,function(t){t.$component=o,t.$componentTemplateNodes=p});l=o,g.applyBindingsToDescendants(h,i)}})},null,{disposeWhenNodeIsRemoved:i}),{controlsDescendantBindings:!0}}},g.virtualElements.allowedBindings.component=!0}();var M={"class":"className","for":"htmlFor"};g.bindingHandlers.attr={update:function(t,e){var n=g.utils.unwrapObservable(e())||{};g.utils.objectForEach(n,function(e,n){n=g.utils.unwrapObservable(n);var r=n===!1||null===n||n===i;r&&t.removeAttribute(e),g.utils.ieVersion<=8&&e in M?(e=M[e],r?t.removeAttribute(e):t[e]=n):r||t.setAttribute(e,n.toString()),"name"===e&&g.utils.setElementName(t,r?"":n.toString())})}},function(){g.bindingHandlers.checked={after:["value","attr"],init:function(t,e,n){function r(){var r=t.checked,i=f?a():r;if(!g.computedContext.isInitial()&&(!s||r)){var o=g.dependencyDetection.ignore(e);l?c!==i?(r&&(g.utils.addOrRemoveItem(o,i,!0),g.utils.addOrRemoveItem(o,c,!1)),c=i):g.utils.addOrRemoveItem(o,i,r):g.expressionRewriting.writeValueToProperty(o,n,"checked",i,!0)}}function o(){var n=g.utils.unwrapObservable(e());t.checked=l?g.utils.arrayIndexOf(n,a())>=0:u?n:a()===n}var a=g.pureComputed(function(){return n.has("checkedValue")?g.utils.unwrapObservable(n.get("checkedValue")):n.has("value")?g.utils.unwrapObservable(n.get("value")):t.value}),u="checkbox"==t.type,s="radio"==t.type;if(u||s){var l=u&&g.utils.unwrapObservable(e())instanceof Array,c=l?a():i,f=s||l;s&&!t.name&&g.bindingHandlers.uniqueName.init(t,function(){return!0}),g.computed(r,null,{disposeWhenNodeIsRemoved:t}),g.utils.registerEventHandler(t,"click",r),g.computed(o,null,{disposeWhenNodeIsRemoved:t})}}},g.expressionRewriting.twoWayBindings.checked=!0,g.bindingHandlers.checkedValue={update:function(t,e){t.value=g.utils.unwrapObservable(e())}}}();var k="__ko__cssValue";g.bindingHandlers.css={update:function(t,e){var n=g.utils.unwrapObservable(e());null!==n&&"object"==typeof n?g.utils.objectForEach(n,function(e,n){n=g.utils.unwrapObservable(n),g.utils.toggleDomNodeCssClass(t,e,n)}):(n=String(n||""),g.utils.toggleDomNodeCssClass(t,t[k],!1),t[k]=n,g.utils.toggleDomNodeCssClass(t,n,!0))}},g.bindingHandlers.enable={update:function(t,e){var n=g.utils.unwrapObservable(e());n&&t.disabled?t.removeAttribute("disabled"):n||t.disabled||(t.disabled=!0)}},g.bindingHandlers.disable={update:function(t,e){g.bindingHandlers.enable.update(t,function(){return!g.utils.unwrapObservable(e())})}},g.bindingHandlers.event={init:function(t,e,n,r,i){var o=e()||{};g.utils.objectForEach(o,function(o){"string"==typeof o&&g.utils.registerEventHandler(t,o,function(t){var a,u=e()[o];if(u){try{var s=g.utils.makeArray(arguments);r=i.$data,s.unshift(r),a=u.apply(r,s)}finally{a!==!0&&(t.preventDefault?t.preventDefault():t.returnValue=!1)}var l=n.get(o+"Bubble")!==!1;l||(t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation())}})})}},g.bindingHandlers.foreach={makeTemplateValueAccessor:function(t){return function(){var e=t(),n=g.utils.peekObservable(e);return n&&"number"!=typeof n.length?(g.utils.unwrapObservable(e),{foreach:n.data,as:n.as,includeDestroyed:n.includeDestroyed,afterAdd:n.afterAdd,beforeRemove:n.beforeRemove,afterRender:n.afterRender,beforeMove:n.beforeMove,afterMove:n.afterMove,templateEngine:g.nativeTemplateEngine.instance}):{foreach:e,templateEngine:g.nativeTemplateEngine.instance}}},init:function(t,e){return g.bindingHandlers.template.init(t,g.bindingHandlers.foreach.makeTemplateValueAccessor(e))},update:function(t,e,n,r,i){return g.bindingHandlers.template.update(t,g.bindingHandlers.foreach.makeTemplateValueAccessor(e),n,r,i)}},g.expressionRewriting.bindingRewriteValidators.foreach=!1,g.virtualElements.allowedBindings.foreach=!0;var E="__ko_hasfocusUpdating",S="__ko_hasfocusLastValue";g.bindingHandlers.hasfocus={init:function(t,e,n){var r=function(r){t[E]=!0;var i=t.ownerDocument;if("activeElement"in i){var o;try{o=i.activeElement}catch(a){o=i.body}r=o===t}var u=e();g.expressionRewriting.writeValueToProperty(u,n,"hasfocus",r,!0),t[S]=r,t[E]=!1},i=r.bind(null,!0),o=r.bind(null,!1);g.utils.registerEventHandler(t,"focus",i),g.utils.registerEventHandler(t,"focusin",i),g.utils.registerEventHandler(t,"blur",o),g.utils.registerEventHandler(t,"focusout",o)},update:function(t,e){var n=!!g.utils.unwrapObservable(e());t[E]||t[S]===n||(n?t.focus():t.blur(),g.dependencyDetection.ignore(g.utils.triggerEvent,null,[t,n?"focusin":"focusout"]))}},g.expressionRewriting.twoWayBindings.hasfocus=!0,g.bindingHandlers.hasFocus=g.bindingHandlers.hasfocus,g.expressionRewriting.twoWayBindings.hasFocus=!0,g.bindingHandlers.html={init:function(){return{controlsDescendantBindings:!0}},update:function(t,e){g.utils.setHtml(t,e())}},d("if"),d("ifnot",!1,!0),d("with",!0,!1,function(t,e){return t.createChildContext(e)});var _={};g.bindingHandlers.options={init:function(t){if("select"!==g.utils.tagNameLower(t))throw new Error("options binding applies only to SELECT elements");for(;t.length>0;)t.remove(0);return{controlsDescendantBindings:!0}},update:function(t,e,n){function r(){return g.utils.arrayFilter(t.options,function(t){return t.selected})}function o(t,e,n){var r=typeof e;return"function"==r?e(t):"string"==r?t[e]:n}function a(e,r,a){a.length&&(y=!d&&a[0].selected?[g.selectExtensions.readValue(a[0])]:[],b=!0);var u=t.ownerDocument.createElement("option");if(e===_)g.utils.setTextContent(u,n.get("optionsCaption")),g.selectExtensions.writeValue(u,i);else{var s=o(e,n.get("optionsValue"),e);g.selectExtensions.writeValue(u,g.utils.unwrapObservable(s));var l=o(e,n.get("optionsText"),s);g.utils.setTextContent(u,l)}return[u]}function u(e,r){if(b&&d)g.selectExtensions.writeValue(t,g.utils.unwrapObservable(n.get("value")),!0);else if(y.length){var i=g.utils.arrayIndexOf(y,g.selectExtensions.readValue(r[0]))>=0;g.utils.setOptionNodeSelectionState(r[0],i),b&&!i&&g.dependencyDetection.ignore(g.utils.triggerEvent,null,[t,"change"])}}var s,l,c=0==t.length,f=t.multiple,p=!c&&f?t.scrollTop:null,h=g.utils.unwrapObservable(e()),d=n.get("valueAllowUnset")&&n.has("value"),m=n.get("optionsIncludeDestroyed"),v={},y=[];d||(f?y=g.utils.arrayMap(r(),g.selectExtensions.readValue):t.selectedIndex>=0&&y.push(g.selectExtensions.readValue(t.options[t.selectedIndex]))),h&&("undefined"==typeof h.length&&(h=[h]),l=g.utils.arrayFilter(h,function(t){return m||t===i||null===t||!g.utils.unwrapObservable(t._destroy)}),n.has("optionsCaption")&&(s=g.utils.unwrapObservable(n.get("optionsCaption")),null!==s&&s!==i&&l.unshift(_)));var b=!1;v.beforeRemove=function(e){t.removeChild(e)};var x=u;n.has("optionsAfterRender")&&"function"==typeof n.get("optionsAfterRender")&&(x=function(t,e){u(t,e),g.dependencyDetection.ignore(n.get("optionsAfterRender"),null,[e[0],t!==_?t:i])}),g.utils.setDomNodeChildrenFromArrayMapping(t,l,a,v,x),g.dependencyDetection.ignore(function(){if(d)g.selectExtensions.writeValue(t,g.utils.unwrapObservable(n.get("value")),!0);else{var e;e=f?y.length&&r().length<y.length:y.length&&t.selectedIndex>=0?g.selectExtensions.readValue(t.options[t.selectedIndex])!==y[0]:y.length||t.selectedIndex>=0,e&&g.utils.triggerEvent(t,"change")}}),g.utils.ensureSelectElementIsRenderedCorrectly(t),p&&Math.abs(p-t.scrollTop)>20&&(t.scrollTop=p)}},g.bindingHandlers.options.optionValueDomDataKey=g.utils.domData.nextKey(),g.bindingHandlers.selectedOptions={after:["options","foreach"],init:function(t,e,n){g.utils.registerEventHandler(t,"change",function(){var r=e(),i=[];g.utils.arrayForEach(t.getElementsByTagName("option"),function(t){t.selected&&i.push(g.selectExtensions.readValue(t))}),g.expressionRewriting.writeValueToProperty(r,n,"selectedOptions",i)})},update:function(t,e){if("select"!=g.utils.tagNameLower(t))throw new Error("values binding applies only to SELECT elements");var n=g.utils.unwrapObservable(e());n&&"number"==typeof n.length&&g.utils.arrayForEach(t.getElementsByTagName("option"),function(t){var e=g.utils.arrayIndexOf(n,g.selectExtensions.readValue(t))>=0;g.utils.setOptionNodeSelectionState(t,e)})}},g.expressionRewriting.twoWayBindings.selectedOptions=!0,g.bindingHandlers.style={update:function(t,e){var n=g.utils.unwrapObservable(e()||{});g.utils.objectForEach(n,function(e,n){n=g.utils.unwrapObservable(n),(null===n||n===i||n===!1)&&(n=""),t.style[e]=n})}},g.bindingHandlers.submit={init:function(t,e,n,r,i){if("function"!=typeof e())throw new Error("The value for a submit binding must be a function");g.utils.registerEventHandler(t,"submit",function(n){var r,o=e();try{r=o.call(i.$data,t)}finally{r!==!0&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}})}},g.bindingHandlers.text={init:function(){return{controlsDescendantBindings:!0}},update:function(t,e){g.utils.setTextContent(t,e())}},g.virtualElements.allowedBindings.text=!0,function(){if(o&&o.navigator)var t=function(t){return t?parseFloat(t[1]):void 0},e=o.opera&&o.opera.version&&parseInt(o.opera.version()),n=o.navigator.userAgent,a=t(n.match(/^(?:(?!chrome).)*version\/([^ ]*) safari/i)),u=t(n.match(/Firefox\/([^ ]*)/));if(g.utils.ieVersion<10)var s=g.utils.domData.nextKey(),l=g.utils.domData.nextKey(),c=function(t){var e=this.activeElement,n=e&&g.utils.domData.get(e,l);n&&n(t)},f=function(t,e){var n=t.ownerDocument;g.utils.domData.get(n,s)||(g.utils.domData.set(n,s,!0),g.utils.registerEventHandler(n,"selectionchange",c)),g.utils.domData.set(t,l,e)};g.bindingHandlers.textInput={init:function(t,n,o){var s,l,c=t.value,p=function(e){clearTimeout(s),l=s=i;var a=t.value;c!==a&&(r&&e&&(t._ko_textInputProcessedEvent=e.type),c=a,g.expressionRewriting.writeValueToProperty(n(),o,"textInput",a))},h=function(e){if(!s){l=t.value;var n=r?p.bind(t,{type:e.type}):p;s=setTimeout(n,4)}},d=function(){var e=g.utils.unwrapObservable(n());return(null===e||e===i)&&(e=""),l!==i&&e===l?void setTimeout(d,4):void(t.value!==e&&(c=e,t.value=e))},m=function(e,n){g.utils.registerEventHandler(t,e,n)};r&&g.bindingHandlers.textInput._forceUpdateOn?g.utils.arrayForEach(g.bindingHandlers.textInput._forceUpdateOn,function(t){"after"==t.slice(0,5)?m(t.slice(5),h):m(t,p)}):g.utils.ieVersion<10?(m("propertychange",function(t){"value"===t.propertyName&&p(t)}),8==g.utils.ieVersion&&(m("keyup",p),m("keydown",p)),g.utils.ieVersion>=8&&(f(t,p),m("dragend",h))):(m("input",p),5>a&&"textarea"===g.utils.tagNameLower(t)?(m("keydown",h),m("paste",h),m("cut",h)):11>e?m("keydown",h):4>u&&(m("DOMAutoComplete",p),m("dragdrop",p),m("drop",p))),m("change",p),g.computed(d,null,{disposeWhenNodeIsRemoved:t})}},g.expressionRewriting.twoWayBindings.textInput=!0,g.bindingHandlers.textinput={preprocess:function(t,e,n){n("textInput",t)}}}(),g.bindingHandlers.uniqueName={init:function(t,e){if(e()){var n="ko_unique_"+ ++g.bindingHandlers.uniqueName.currentIndex;g.utils.setElementName(t,n)}}},g.bindingHandlers.uniqueName.currentIndex=0,g.bindingHandlers.value={after:["options","foreach"],init:function(t,e,n){if("input"==t.tagName.toLowerCase()&&("checkbox"==t.type||"radio"==t.type))return void g.applyBindingAccessorsToNode(t,{checkedValue:e});var r=["change"],i=n.get("valueUpdate"),o=!1,a=null;i&&("string"==typeof i&&(i=[i]),g.utils.arrayPushAll(r,i),r=g.utils.arrayGetDistinctValues(r));var u=function(){a=null,o=!1;var r=e(),i=g.selectExtensions.readValue(t);g.expressionRewriting.writeValueToProperty(r,n,"value",i)},s=g.utils.ieVersion&&"input"==t.tagName.toLowerCase()&&"text"==t.type&&"off"!=t.autocomplete&&(!t.form||"off"!=t.form.autocomplete);s&&-1==g.utils.arrayIndexOf(r,"propertychange")&&(g.utils.registerEventHandler(t,"propertychange",function(){o=!0}),g.utils.registerEventHandler(t,"focus",function(){o=!1}),g.utils.registerEventHandler(t,"blur",function(){o&&u()})),g.utils.arrayForEach(r,function(e){var n=u;g.utils.stringStartsWith(e,"after")&&(n=function(){a=g.selectExtensions.readValue(t),setTimeout(u,0)},e=e.substring("after".length)),g.utils.registerEventHandler(t,e,n)});var l=function(){var r=g.utils.unwrapObservable(e()),i=g.selectExtensions.readValue(t);if(null!==a&&r===a)return void setTimeout(l,0);var o=r!==i;if(o)if("select"===g.utils.tagNameLower(t)){var u=n.get("valueAllowUnset"),s=function(){g.selectExtensions.writeValue(t,r,u)};s(),u||r===g.selectExtensions.readValue(t)?setTimeout(s,0):g.dependencyDetection.ignore(g.utils.triggerEvent,null,[t,"change"])}else g.selectExtensions.writeValue(t,r)};g.computed(l,null,{disposeWhenNodeIsRemoved:t})},update:function(){}},g.expressionRewriting.twoWayBindings.value=!0,g.bindingHandlers.visible={update:function(t,e){var n=g.utils.unwrapObservable(e()),r=!("none"==t.style.display);n&&!r?t.style.display="":!n&&r&&(t.style.display="none")}},h("click"),g.templateEngine=function(){},g.templateEngine.prototype.renderTemplateSource=function(){throw new Error("Override renderTemplateSource")},g.templateEngine.prototype.createJavaScriptEvaluatorBlock=function(){throw new Error("Override createJavaScriptEvaluatorBlock")},g.templateEngine.prototype.makeTemplateSource=function(t,e){if("string"==typeof t){e=e||a;var n=e.getElementById(t);if(!n)throw new Error("Cannot find template with ID "+t);return new g.templateSources.domElement(n)}if(1==t.nodeType||8==t.nodeType)return new g.templateSources.anonymousTemplate(t);throw new Error("Unknown template type: "+t)},g.templateEngine.prototype.renderTemplate=function(t,e,n,r){var i=this.makeTemplateSource(t,r);return this.renderTemplateSource(i,e,n,r)},g.templateEngine.prototype.isTemplateRewritten=function(t,e){return this.allowTemplateRewriting===!1?!0:this.makeTemplateSource(t,e).data("isRewritten")},g.templateEngine.prototype.rewriteTemplate=function(t,e,n){var r=this.makeTemplateSource(t,n),i=e(r.text());r.text(i),r.data("isRewritten",!0)},g.exportSymbol("templateEngine",g.templateEngine),g.templateRewriting=function(){function t(t){for(var e=g.expressionRewriting.bindingRewriteValidators,n=0;n<t.length;n++){var r=t[n].key;if(e.hasOwnProperty(r)){var i=e[r];if("function"==typeof i){var o=i(t[n].value);if(o)throw new Error(o)}else if(!i)throw new Error("This template engine does not support the '"+r+"' binding within its templates")}}}function e(e,n,r,i){var o=g.expressionRewriting.parseObjectLiteral(e);t(o);var a=g.expressionRewriting.preProcessBindings(o,{valueAccessors:!0}),u="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+a+" } })()},'"+r.toLowerCase()+"')";return i.createJavaScriptEvaluatorBlock(u)+n}var n=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'|[^>]*))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,r=/<!--\s*ko\b\s*([\s\S]*?)\s*-->/g;return{ensureTemplateIsRewritten:function(t,e,n){e.isTemplateRewritten(t,n)||e.rewriteTemplate(t,function(t){return g.templateRewriting.memoizeBindingAttributeSyntax(t,e)},n)},memoizeBindingAttributeSyntax:function(t,i){return t.replace(n,function(){return e(arguments[4],arguments[1],arguments[2],i)}).replace(r,function(){return e(arguments[1],"<!-- ko -->","#comment",i)})},applyMemoizedBindingsToNextSibling:function(t,e){return g.memoization.memoize(function(n,r){var i=n.nextSibling;i&&i.nodeName.toLowerCase()===e&&g.applyBindingAccessorsToNode(i,t,r)})}}}(),g.exportSymbol("__tr_ambtns",g.templateRewriting.applyMemoizedBindingsToNextSibling),function(){g.templateSources={},g.templateSources.domElement=function(t){this.domElement=t},g.templateSources.domElement.prototype.text=function(){var t=g.utils.tagNameLower(this.domElement),e="script"===t?"text":"textarea"===t?"value":"innerHTML";if(0==arguments.length)return this.domElement[e];var n=arguments[0];"innerHTML"===e?g.utils.setHtml(this.domElement,n):this.domElement[e]=n};var t=g.utils.domData.nextKey()+"_";g.templateSources.domElement.prototype.data=function(e){return 1===arguments.length?g.utils.domData.get(this.domElement,t+e):void g.utils.domData.set(this.domElement,t+e,arguments[1])};var e=g.utils.domData.nextKey();g.templateSources.anonymousTemplate=function(t){this.domElement=t},g.templateSources.anonymousTemplate.prototype=new g.templateSources.domElement,g.templateSources.anonymousTemplate.prototype.constructor=g.templateSources.anonymousTemplate,g.templateSources.anonymousTemplate.prototype.text=function(){if(0==arguments.length){var t=g.utils.domData.get(this.domElement,e)||{};return t.textData===i&&t.containerData&&(t.textData=t.containerData.innerHTML),t.textData}var n=arguments[0];g.utils.domData.set(this.domElement,e,{textData:n})},g.templateSources.domElement.prototype.nodes=function(){if(0==arguments.length){var t=g.utils.domData.get(this.domElement,e)||{};return t.containerData}var n=arguments[0];g.utils.domData.set(this.domElement,e,{containerData:n})},g.exportSymbol("templateSources",g.templateSources),g.exportSymbol("templateSources.domElement",g.templateSources.domElement),g.exportSymbol("templateSources.anonymousTemplate",g.templateSources.anonymousTemplate)}(),function(){function t(t,e,n){for(var r,i=t,o=g.virtualElements.nextSibling(e);i&&(r=i)!==o;)i=g.virtualElements.nextSibling(r),n(r,i)}function e(e,n){if(e.length){var r=e[0],i=e[e.length-1],o=r.parentNode,a=g.bindingProvider.instance,u=a.preprocessNode;if(u){if(t(r,i,function(t,e){var n=t.previousSibling,o=u.call(a,t);o&&(t===r&&(r=o[0]||e),t===i&&(i=o[o.length-1]||n))}),e.length=0,!r)return;r===i?e.push(r):(e.push(r,i),g.utils.fixUpContinuousNodeArray(e,o))}t(r,i,function(t){(1===t.nodeType||8===t.nodeType)&&g.applyBindings(n,t)}),t(r,i,function(t){(1===t.nodeType||8===t.nodeType)&&g.memoization.unmemoizeDomNodeAndDescendants(t,[n])}),g.utils.fixUpContinuousNodeArray(e,o)}}function n(t){return t.nodeType?t:t.length>0?t[0]:null}function r(t,r,i,o,a){a=a||{};var s=t&&n(t),l=(s||i||{}).ownerDocument,c=a.templateEngine||u;g.templateRewriting.ensureTemplateIsRewritten(i,c,l);var f=c.renderTemplate(i,o,a,l);if("number"!=typeof f.length||f.length>0&&"number"!=typeof f[0].nodeType)throw new Error("Template engine must return an array of DOM nodes");var p=!1;switch(r){case"replaceChildren":g.virtualElements.setDomNodeChildren(t,f),p=!0;break;case"replaceNode":g.utils.replaceDomNodes(t,f),p=!0;break;case"ignoreTargetNode":break;default:throw new Error("Unknown renderMode: "+r)}return p&&(e(f,o),a.afterRender&&g.dependencyDetection.ignore(a.afterRender,null,[f,o.$data])),f}function o(t,e,n){return g.isObservable(t)?t():"function"==typeof t?t(e,n):t}function a(t,e){var n=g.utils.domData.get(t,s);n&&"function"==typeof n.dispose&&n.dispose(),g.utils.domData.set(t,s,e&&e.isActive()?e:i)}var u;g.setTemplateEngine=function(t){if(t!=i&&!(t instanceof g.templateEngine))throw new Error("templateEngine must inherit from ko.templateEngine");u=t},g.renderTemplate=function(t,e,a,s,l){if(a=a||{},(a.templateEngine||u)==i)throw new Error("Set a template engine before calling renderTemplate");if(l=l||"replaceChildren",s){var c=n(s),f=function(){return!c||!g.utils.domNodeIsAttachedToDocument(c)},p=c&&"replaceNode"==l?c.parentNode:c;return g.dependentObservable(function(){var i=e&&e instanceof g.bindingContext?e:new g.bindingContext(g.utils.unwrapObservable(e)),u=o(t,i.$data,i),f=r(s,l,u,i,a);"replaceNode"==l&&(s=f,c=n(s))},null,{disposeWhen:f,disposeWhenNodeIsRemoved:p})}return g.memoization.memoize(function(n){g.renderTemplate(t,e,a,n,"replaceNode")})},g.renderTemplateForEach=function(t,n,a,u,s){var l,c=function(e,n){l=s.createChildContext(e,a.as,function(t){t.$index=n});var i=o(t,e,l);return r(null,"ignoreTargetNode",i,l,a)},f=function(t,n){e(n,l),a.afterRender&&a.afterRender(n,t),l=null};return g.dependentObservable(function(){var t=g.utils.unwrapObservable(n)||[];"undefined"==typeof t.length&&(t=[t]);var e=g.utils.arrayFilter(t,function(t){return a.includeDestroyed||t===i||null===t||!g.utils.unwrapObservable(t._destroy)});g.dependencyDetection.ignore(g.utils.setDomNodeChildrenFromArrayMapping,null,[u,e,c,a,f])},null,{disposeWhenNodeIsRemoved:u})};var s=g.utils.domData.nextKey();g.bindingHandlers.template={init:function(t,e){var n=g.utils.unwrapObservable(e());if("string"==typeof n||n.name)g.virtualElements.emptyNode(t);else if("nodes"in n){var r=n.nodes||[];if(g.isObservable(r))throw new Error('The "nodes" option must be a plain, non-observable array.');var i=g.utils.moveCleanedNodesToContainerElement(r);new g.templateSources.anonymousTemplate(t).nodes(i)}else{var o=g.virtualElements.childNodes(t),i=g.utils.moveCleanedNodesToContainerElement(o);new g.templateSources.anonymousTemplate(t).nodes(i)}return{controlsDescendantBindings:!0}},update:function(t,e,n,r,i){var o,u,s=e(),l=g.utils.unwrapObservable(s),c=!0,f=null;if("string"==typeof l?(u=s,l={}):(u=l.name,"if"in l&&(c=g.utils.unwrapObservable(l["if"])),c&&"ifnot"in l&&(c=!g.utils.unwrapObservable(l.ifnot)),o=g.utils.unwrapObservable(l.data)),"foreach"in l){var p=c&&l.foreach||[];f=g.renderTemplateForEach(u||t,p,l,t,i)}else if(c){var h="data"in l?i.createChildContext(o,l.as):i;f=g.renderTemplate(u||t,h,l,t)}else g.virtualElements.emptyNode(t);a(t,f)}},g.expressionRewriting.bindingRewriteValidators.template=function(t){var e=g.expressionRewriting.parseObjectLiteral(t);return 1==e.length&&e[0].unknown?null:g.expressionRewriting.keyValueArrayContainsKey(e,"name")?null:"This template engine does not support anonymous templates nested within its templates"},g.virtualElements.allowedBindings.template=!0}(),g.exportSymbol("setTemplateEngine",g.setTemplateEngine),g.exportSymbol("renderTemplate",g.renderTemplate),g.utils.findMovesInArrayComparison=function(t,e,n){if(t.length&&e.length){var r,i,o,a,u;for(r=i=0;(!n||n>r)&&(a=t[i]);++i){for(o=0;u=e[o];++o)if(a.value===u.value){a.moved=u.index,u.moved=a.index,e.splice(o,1),r=o=0;break}r+=o}}},g.utils.compareArrays=function(){function t(t,i,o){return o="boolean"==typeof o?{dontLimitMoves:o}:o||{},t=t||[],i=i||[],t.length<=i.length?e(t,i,n,r,o):e(i,t,r,n,o)}function e(t,e,n,r,i){var o,a,u,s,l,c,f=Math.min,p=Math.max,h=[],d=t.length,m=e.length,v=m-d||1,y=d+m+1;for(o=0;d>=o;o++)for(s=u,h.push(u=[]),l=f(m,o+v),c=p(0,o-1),a=c;l>=a;a++)if(a)if(o)if(t[o-1]===e[a-1])u[a]=s[a-1];else{var b=s[a]||y,x=u[a-1]||y;u[a]=f(b,x)+1}else u[a]=a+1;else u[a]=o+1;var w,M=[],k=[],E=[];for(o=d,a=m;o||a;)w=h[o][a]-1,a&&w===h[o][a-1]?k.push(M[M.length]={status:n,value:e[--a],index:a}):o&&w===h[o-1][a]?E.push(M[M.length]={status:r,value:t[--o],index:o}):(--a,--o,i.sparse||M.push({status:"retained",value:e[a]}));return g.utils.findMovesInArrayComparison(k,E,10*d),M.reverse()}var n="added",r="deleted";return t}(),g.exportSymbol("utils.compareArrays",g.utils.compareArrays),function(){function t(t,e,n,r,o){var a=[],u=g.dependentObservable(function(){var i=e(n,o,g.utils.fixUpContinuousNodeArray(a,t))||[];a.length>0&&(g.utils.replaceDomNodes(a,i),r&&g.dependencyDetection.ignore(r,null,[n,i,o])),a.length=0,g.utils.arrayPushAll(a,i)
},null,{disposeWhenNodeIsRemoved:t,disposeWhen:function(){return!g.utils.anyDomNodeIsAttachedToDocument(a)}});return{mappedNodes:a,dependentObservable:u.isActive()?u:i}}var e=g.utils.domData.nextKey();g.utils.setDomNodeChildrenFromArrayMapping=function(n,r,o,a,u){function s(t,e){c=d[e],x!==e&&(E[t]=c),c.indexObservable(x++),g.utils.fixUpContinuousNodeArray(c.mappedNodes,n),y.push(c),M.push(c)}function l(t,e){if(t)for(var n=0,r=e.length;r>n;n++)e[n]&&g.utils.arrayForEach(e[n].mappedNodes,function(r){t(r,n,e[n].arrayEntry)})}r=r||[],a=a||{};for(var c,f,p,h=g.utils.domData.get(n,e)===i,d=g.utils.domData.get(n,e)||[],m=g.utils.arrayMap(d,function(t){return t.arrayEntry}),v=g.utils.compareArrays(m,r,a.dontLimitMoves),y=[],b=0,x=0,w=[],M=[],k=[],E=[],S=[],_=0;f=v[_];_++)switch(p=f.moved,f.status){case"deleted":p===i&&(c=d[b],c.dependentObservable&&c.dependentObservable.dispose(),w.push.apply(w,g.utils.fixUpContinuousNodeArray(c.mappedNodes,n)),a.beforeRemove&&(k[_]=c,M.push(c))),b++;break;case"retained":s(_,b++);break;case"added":p!==i?s(_,p):(c={arrayEntry:f.value,indexObservable:g.observable(x++)},y.push(c),M.push(c),h||(S[_]=c))}l(a.beforeMove,E),g.utils.arrayForEach(w,a.beforeRemove?g.cleanNode:g.removeNode);for(var C,N,_=0,A=g.virtualElements.firstChild(n);c=M[_];_++){c.mappedNodes||g.utils.extend(c,t(n,o,c.arrayEntry,u,c.indexObservable));for(var T=0;N=c.mappedNodes[T];A=N.nextSibling,C=N,T++)N!==A&&g.virtualElements.insertAfter(n,N,C);!c.initialized&&u&&(u(c.arrayEntry,c.mappedNodes,c.indexObservable),c.initialized=!0)}l(a.beforeRemove,k),l(a.afterMove,E),l(a.afterAdd,S),g.utils.domData.set(n,e,y)}}(),g.exportSymbol("utils.setDomNodeChildrenFromArrayMapping",g.utils.setDomNodeChildrenFromArrayMapping),g.nativeTemplateEngine=function(){this.allowTemplateRewriting=!1},g.nativeTemplateEngine.prototype=new g.templateEngine,g.nativeTemplateEngine.prototype.constructor=g.nativeTemplateEngine,g.nativeTemplateEngine.prototype.renderTemplateSource=function(t,e,n,r){var i=!(g.utils.ieVersion<9),o=i?t.nodes:null,a=o?t.nodes():null;if(a)return g.utils.makeArray(a.cloneNode(!0).childNodes);var u=t.text();return g.utils.parseHtmlFragment(u,r)},g.nativeTemplateEngine.instance=new g.nativeTemplateEngine,g.setTemplateEngine(g.nativeTemplateEngine.instance),g.exportSymbol("nativeTemplateEngine",g.nativeTemplateEngine),function(){g.jqueryTmplTemplateEngine=function(){function t(){if(2>n)throw new Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.")}function e(t,e,n){return s.tmpl(t,e,n)}var n=this.jQueryTmplVersion=function(){if(!s||!s.tmpl)return 0;try{if(s.tmpl.tag.tmpl.open.toString().indexOf("__")>=0)return 2}catch(t){}return 1}();this.renderTemplateSource=function(n,r,i,o){o=o||a,i=i||{},t();var u=n.data("precompiled");if(!u){var l=n.text()||"";l="{{ko_with $item.koBindingContext}}"+l+"{{/ko_with}}",u=s.template(null,l),n.data("precompiled",u)}var c=[r.$data],f=s.extend({koBindingContext:r},i.templateOptions),p=e(u,c,f);return p.appendTo(o.createElement("div")),s.fragments={},p},this.createJavaScriptEvaluatorBlock=function(t){return"{{ko_code ((function() { return "+t+" })()) }}"},this.addTemplate=function(t,e){a.write("<script type='text/html' id='"+t+"'>"+e+"</script>")},n>0&&(s.tmpl.tag.ko_code={open:"__.push($1 || '');"},s.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},g.jqueryTmplTemplateEngine.prototype=new g.templateEngine,g.jqueryTmplTemplateEngine.prototype.constructor=g.jqueryTmplTemplateEngine;var t=new g.jqueryTmplTemplateEngine;t.jQueryTmplVersion>0&&g.setTemplateEngine(t),g.exportSymbol("jqueryTmplTemplateEngine",g.jqueryTmplTemplateEngine)}()})}()}()},{}],"socket.io-client":[function(t,e){e.exports=t("./lib/")},{"./lib/":1}]},{},[]);